{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\login-detail-scroll\\\\src\\\\views\\\\Detail\\\\Diancan\\\\Diancan.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport \"../../../mock/mock.js\";\nimport Item from \"../../../components/Item\";\nimport BScroll from \"better-scroll\";\nexport default class Diancan extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      list: [],\n      ind: 0,\n      scrollH: []\n    };\n\n    this.handClick = ind => {\n      this.setState({\n        ind\n      });\n      this.myScroll.scrollToElement('.title' + ind, 1000);\n    };\n  }\n\n  componentDidMount() {\n    Axios.get('/getlist').then(res => {\n      console.log(res.data.goods);\n      this.setState({\n        list: res.data.goods\n      }); // 开启 better-scroll 滚动\n\n      this.myScroll = new BScroll(\".right\", {\n        probeType: 3\n      });\n      let scrollH = this.state.scrollH; // 把伪数组转为数组\n\n      let child = Array.from(this.refs.rightlist.children);\n      console.log(child, \"child\"); //获取滚动元素的所有列表\n      //获取每个子元素与顶部的距离\n\n      child.forEach(item => {\n        scrollH.push(item.offsetTop - 45);\n      });\n      let last = child[child.length - 1]; //最后一个子元素\n\n      scrollH.push(last.offsetTop + last.offsetHeight);\n      this.setState({\n        scrollH\n      }); //更新设置 scrollH 的值\n      // 监听滚动\n\n      this.myScroll.on('scroll', ({\n        y\n      }) => {\n        let scrollY = Math.abs(y); //获取滚动的高度，并转为绝对值\n        // console.log(scrollY,\"00000000\")//滚动条滚动的高度\n\n        for (let i = 0; i < scrollH.length; i++) {\n          if (scrollY > scrollH[i] && scrollY < scrollH[i + 1]) {\n            // console.log(i,\"iiiii\");\n            this.setState({\n              ind: i\n            });\n          }\n        }\n      });\n    });\n  } // 点击左侧列表\n\n\n  render() {\n    let _this$state = this.state,\n        list = _this$state.list,\n        ind = _this$state.ind;\n    return React.createElement(\"div\", {\n      className: \"diancan\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, list && list.map((item, index) => {\n      return React.createElement(\"p\", {\n        key: index,\n        onClick: this.handClick.bind(this, index),\n        className: index == ind ? \"active\" : \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, item.name);\n    })), React.createElement(\"div\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      ref: \"rightlist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, list && list.map((item, index) => {\n      return React.createElement(Item, {\n        key: index,\n        item: item,\n        index: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      });\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Dell/Desktop/login-detail-scroll/src/views/Detail/Diancan/Diancan.js"],"names":["React","Component","Axios","Item","BScroll","Diancan","state","list","ind","scrollH","handClick","setState","myScroll","scrollToElement","componentDidMount","get","then","res","console","log","data","goods","probeType","child","Array","from","refs","rightlist","children","forEach","item","push","offsetTop","last","length","offsetHeight","on","y","scrollY","Math","abs","i","render","map","index","bind","name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,uBAAP;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AAEA,OAAOC,OAAP,MAAoB,eAApB;AACA,eAAe,MAAMC,OAAN,SAAsBJ,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC3CK,KAD2C,GACnC;AACJC,MAAAA,IAAI,EAAE,EADF;AAEJC,MAAAA,GAAG,EAAE,CAFD;AAGJC,MAAAA,OAAO,EAAE;AAHL,KADmC;;AAAA,SA+C3CC,SA/C2C,GA+C9BF,GAAD,IAAS;AACjB,WAAKG,QAAL,CAAc;AAAEH,QAAAA;AAAF,OAAd;AACA,WAAKI,QAAL,CAAcC,eAAd,CAA8B,WAAWL,GAAzC,EAA8C,IAA9C;AACH,KAlD0C;AAAA;;AAM3CM,EAAAA,iBAAiB,GAAG;AAChBZ,IAAAA,KAAK,CAACa,GAAN,CAAU,UAAV,EAAsBC,IAAtB,CAA2BC,GAAG,IAAI;AAC9BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAJ,CAASC,KAArB;AACA,WAAKV,QAAL,CAAc;AAAEJ,QAAAA,IAAI,EAAEU,GAAG,CAACG,IAAJ,CAASC;AAAjB,OAAd,EAF8B,CAI9B;;AACA,WAAKT,QAAL,GAAgB,IAAIR,OAAJ,CAAY,QAAZ,EAAsB;AAClCkB,QAAAA,SAAS,EAAE;AADuB,OAAtB,CAAhB;AAL8B,UAUxBb,OAVwB,GAUZ,KAAKH,KAVO,CAUxBG,OAVwB,EAW9B;;AACA,UAAIc,KAAK,GAAGC,KAAK,CAACC,IAAN,CAAW,KAAKC,IAAL,CAAUC,SAAV,CAAoBC,QAA/B,CAAZ;AACAV,MAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ,EAAmB,OAAnB,EAb8B,CAaH;AAC3B;;AACAA,MAAAA,KAAK,CAACM,OAAN,CAAeC,IAAD,IAAQ;AAClBrB,QAAAA,OAAO,CAACsB,IAAR,CAAaD,IAAI,CAACE,SAAL,GAAiB,EAA9B;AACH,OAFD;AAGA,UAAIC,IAAI,GAAGV,KAAK,CAACA,KAAK,CAACW,MAAN,GAAa,CAAd,CAAhB,CAlB8B,CAkBE;;AAChCzB,MAAAA,OAAO,CAACsB,IAAR,CAAaE,IAAI,CAACD,SAAL,GAAiBC,IAAI,CAACE,YAAnC;AACA,WAAKxB,QAAL,CAAc;AAACF,QAAAA;AAAD,OAAd,EApB8B,CAoBN;AAExB;;AACA,WAAKG,QAAL,CAAcwB,EAAd,CAAiB,QAAjB,EAA0B,CAAC;AAACC,QAAAA;AAAD,OAAD,KAAO;AAC7B,YAAIC,OAAO,GAAGC,IAAI,CAACC,GAAL,CAASH,CAAT,CAAd,CAD6B,CACH;AAC1B;;AACA,aAAI,IAAII,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAChC,OAAO,CAACyB,MAAtB,EAA6BO,CAAC,EAA9B,EAAiC;AAC7B,cAAGH,OAAO,GAAC7B,OAAO,CAACgC,CAAD,CAAf,IAAsBH,OAAO,GAAC7B,OAAO,CAACgC,CAAC,GAAC,CAAH,CAAxC,EAA8C;AAC1C;AACA,iBAAK9B,QAAL,CAAc;AAACH,cAAAA,GAAG,EAACiC;AAAL,aAAd;AACH;AACJ;AACJ,OATD;AAWH,KAlCD;AAsCH,GA7C0C,CA8C3C;;;AAKAC,EAAAA,MAAM,GAAG;AAAA,sBACe,KAAKpC,KADpB;AAAA,QACCC,IADD,eACCA,IADD;AAAA,QACOC,GADP,eACOA,GADP;AAEL,WACI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQD,IAAI,IAAIA,IAAI,CAACoC,GAAL,CAAS,CAACb,IAAD,EAAOc,KAAP,KAAiB;AAC9B,aAAO;AAAG,QAAA,GAAG,EAAEA,KAAR;AAAe,QAAA,OAAO,EAAE,KAAKlC,SAAL,CAAemC,IAAf,CAAoB,IAApB,EAA0BD,KAA1B,CAAxB;AAA0D,QAAA,SAAS,EAAEA,KAAK,IAAIpC,GAAT,GAAe,QAAf,GAA0B,EAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAoGsB,IAAI,CAACgB,IAAzG,CAAP;AACH,KAFO,CAFhB,CAFJ,EAUI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,GAAG,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQvC,IAAI,IAAIA,IAAI,CAACoC,GAAL,CAAS,CAACb,IAAD,EAAOc,KAAP,KAAiB;AAC9B,aACI,oBAAC,IAAD;AAAM,QAAA,GAAG,EAAEA,KAAX;AAAkB,QAAA,IAAI,EAAEd,IAAxB;AAA8B,QAAA,KAAK,EAAEc,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH,KAJO,CAFhB,CADJ,CAVJ,CADJ;AAwBH;;AA7E0C","sourcesContent":["import React, { Component } from 'react'\r\nimport Axios from 'axios';\r\nimport \"../../../mock/mock.js\"\r\nimport Item from \"../../../components/Item\"\r\n\r\nimport BScroll from \"better-scroll\";\r\nexport default class Diancan extends Component {\r\n    state = {\r\n        list: [],\r\n        ind: 0,\r\n        scrollH: []\r\n    }\r\n    componentDidMount() {\r\n        Axios.get('/getlist').then(res => {\r\n            console.log(res.data.goods);\r\n            this.setState({ list: res.data.goods })\r\n\r\n            // 开启 better-scroll 滚动\r\n            this.myScroll = new BScroll(\".right\", {\r\n                probeType: 3\r\n            })\r\n\r\n\r\n            let { scrollH } = this.state;\r\n            // 把伪数组转为数组\r\n            let child = Array.from(this.refs.rightlist.children);\r\n            console.log(child, \"child\")//获取滚动元素的所有列表\r\n            //获取每个子元素与顶部的距离\r\n            child.forEach((item)=>{\r\n                scrollH.push(item.offsetTop - 45);\r\n            })\r\n            let last = child[child.length-1]//最后一个子元素\r\n            scrollH.push(last.offsetTop + last.offsetHeight);\r\n            this.setState({scrollH})//更新设置 scrollH 的值\r\n    \r\n            // 监听滚动\r\n            this.myScroll.on('scroll',({y})=>{\r\n                let scrollY = Math.abs(y);//获取滚动的高度，并转为绝对值\r\n                // console.log(scrollY,\"00000000\")//滚动条滚动的高度\r\n                for(let i=0;i<scrollH.length;i++){\r\n                    if(scrollY>scrollH[i] && scrollY<scrollH[i+1]){\r\n                        // console.log(i,\"iiiii\");\r\n                        this.setState({ind:i})\r\n                    }\r\n                }\r\n            })\r\n\r\n        })\r\n\r\n\r\n        \r\n    }\r\n    // 点击左侧列表\r\n    handClick = (ind) => {\r\n        this.setState({ ind })\r\n        this.myScroll.scrollToElement('.title' + ind, 1000)\r\n    }\r\n    render() {\r\n        let { list, ind } = this.state;\r\n        return (\r\n            <div className=\"diancan\">\r\n                {/* 左侧列表导航 */}\r\n                <div className=\"left\">\r\n                    {\r\n                        list && list.map((item, index) => {\r\n                            return <p key={index} onClick={this.handClick.bind(this, index)} className={index == ind ? \"active\" : \"\"}>{item.name}</p>\r\n                        })\r\n                    }\r\n                </div>\r\n                {/* 右侧数据列表 */}\r\n                <div className=\"right\">\r\n                    <div ref=\"rightlist\">\r\n                        {\r\n                            list && list.map((item, index) => {\r\n                                return (\r\n                                    <Item key={index} item={item} index={index}></Item>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}