{"ast":null,"code":"/*!\n * better-normal-scroll v1.15.2\n * (c) 2016-2019 ustbhuangyi\n * Released under the MIT License.\n */\n// As of V8 6.6, depending on the size of the array, this is anywhere\n// between 1.5-10x faster than the two-arg version of Array#splice()\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) {\n    list[index] = list[index + 1];\n  }\n\n  list.pop();\n}\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nfunction eventMixin(BScroll) {\n  BScroll.prototype.on = function (type, fn) {\n    var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n\n    if (!this._events[type]) {\n      this._events[type] = [];\n    }\n\n    this._events[type].push([fn, context]);\n  };\n\n  BScroll.prototype.once = function (type, fn) {\n    var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n\n    function magic() {\n      this.off(type, magic);\n      fn.apply(context, arguments);\n    } // To expose the corresponding function method in order to execute the off method\n\n\n    magic.fn = fn;\n    this.on(type, magic);\n  };\n\n  BScroll.prototype.off = function (type, fn) {\n    var _events = this._events[type];\n\n    if (!_events) {\n      return;\n    }\n\n    var count = _events.length;\n\n    while (count--) {\n      if (_events[count][0] === fn || _events[count][0] && _events[count][0].fn === fn) {\n        spliceOne(_events, count);\n      }\n    }\n  };\n\n  BScroll.prototype.trigger = function (type) {\n    var events = this._events[type];\n\n    if (!events) {\n      return;\n    }\n\n    var len = events.length;\n    var eventsCopy = [].concat(toConsumableArray(events));\n\n    for (var i = 0; i < len; i++) {\n      var event = eventsCopy[i];\n\n      var _event = slicedToArray(event, 2),\n          fn = _event[0],\n          context = _event[1];\n\n      if (fn) {\n        fn.apply(context, [].slice.call(arguments, 1));\n      }\n    }\n  };\n} // ssr support\n\n\nvar inBrowser = typeof window !== 'undefined';\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\nvar isWeChatDevTools = ua && /wechatdevtools/.test(ua);\nvar isAndroid = ua && ua.indexOf('android') > 0;\n\nfunction getNow() {\n  return window.performance && window.performance.now ? window.performance.now() + window.performance.timing.navigationStart : +new Date();\n}\n\nfunction extend(target) {\n  for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    rest[_key - 1] = arguments[_key];\n  }\n\n  for (var i = 0; i < rest.length; i++) {\n    var source = rest[i];\n\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction isUndef(v) {\n  return v === undefined || v === null;\n}\n\nfunction getDistance(x, y) {\n  return Math.sqrt(x * x + y * y);\n}\n\nvar elementStyle = inBrowser && document.createElement('div').style;\n\nvar vendor = function () {\n  if (!inBrowser) {\n    return false;\n  } // first pick up standard to fix #743\n\n\n  var transformNames = {\n    standard: 'transform',\n    webkit: 'webkitTransform',\n    Moz: 'MozTransform',\n    O: 'OTransform',\n    ms: 'msTransform'\n  };\n\n  for (var key in transformNames) {\n    if (elementStyle[transformNames[key]] !== undefined) {\n      return key;\n    }\n  }\n\n  return false;\n}();\n\nfunction prefixStyle(style) {\n  if (vendor === false) {\n    return false;\n  }\n\n  if (vendor === 'standard') {\n    if (style === 'transitionEnd') {\n      return 'transitionend';\n    }\n\n    return style;\n  }\n\n  return vendor + style.charAt(0).toUpperCase() + style.substr(1);\n}\n\nfunction addEvent(el, type, fn, capture) {\n  el.addEventListener(type, fn, {\n    passive: false,\n    capture: !!capture\n  });\n}\n\nfunction removeEvent(el, type, fn, capture) {\n  el.removeEventListener(type, fn, {\n    passive: false,\n    capture: !!capture\n  });\n}\n\nfunction offset(el) {\n  var left = 0;\n  var top = 0;\n\n  while (el) {\n    left -= el.offsetLeft;\n    top -= el.offsetTop;\n    el = el.offsetParent;\n  }\n\n  return {\n    left: left,\n    top: top\n  };\n}\n\nfunction offsetToBody(el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    left: -(rect.left + window.pageXOffset),\n    top: -(rect.top + window.pageYOffset)\n  };\n}\n\nvar cssVendor = vendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\nvar transform = prefixStyle('transform');\nvar transition = prefixStyle('transition');\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle; // fix issue #361\n\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\nvar hasTransform = transform !== false;\nvar hasTransition = inBrowser && transition in elementStyle;\nvar style = {\n  transform: transform,\n  transition: transition,\n  transitionTimingFunction: prefixStyle('transitionTimingFunction'),\n  transitionDuration: prefixStyle('transitionDuration'),\n  transitionDelay: prefixStyle('transitionDelay'),\n  transformOrigin: prefixStyle('transformOrigin'),\n  transitionEnd: prefixStyle('transitionEnd')\n};\nvar TOUCH_EVENT = 1;\nvar MOUSE_EVENT = 2;\nvar eventType = {\n  touchstart: TOUCH_EVENT,\n  touchmove: TOUCH_EVENT,\n  touchend: TOUCH_EVENT,\n  mousedown: MOUSE_EVENT,\n  mousemove: MOUSE_EVENT,\n  mouseup: MOUSE_EVENT\n};\n\nfunction getRect(el) {\n  if (el instanceof window.SVGElement) {\n    var rect = el.getBoundingClientRect();\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    };\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n}\n\nfunction preventDefaultException(el, exceptions) {\n  for (var i in exceptions) {\n    if (exceptions[i].test(el[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction tap(e, eventName) {\n  var ev = document.createEvent('Event');\n  ev.initEvent(eventName, true, true);\n  ev.pageX = e.pageX;\n  ev.pageY = e.pageY;\n  e.target.dispatchEvent(ev);\n}\n\nfunction click(e) {\n  var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'click';\n  var eventSource = void 0;\n\n  if (e.type === 'mouseup' || e.type === 'mousecancel') {\n    eventSource = e;\n  } else if (e.type === 'touchend' || e.type === 'touchcancel') {\n    eventSource = e.changedTouches[0];\n  }\n\n  var posSrc = {};\n\n  if (eventSource) {\n    posSrc.screenX = eventSource.screenX || 0;\n    posSrc.screenY = eventSource.screenY || 0;\n    posSrc.clientX = eventSource.clientX || 0;\n    posSrc.clientY = eventSource.clientY || 0;\n  }\n\n  var ev = void 0;\n  var bubbles = true;\n  var cancelable = true;\n\n  if (typeof MouseEvent !== 'undefined') {\n    try {\n      ev = new MouseEvent(event, extend({\n        bubbles: bubbles,\n        cancelable: cancelable\n      }, posSrc));\n    } catch (e) {\n      createEvent();\n    }\n  } else {\n    createEvent();\n  }\n\n  function createEvent() {\n    ev = document.createEvent('Event');\n    ev.initEvent(event, bubbles, cancelable);\n    extend(ev, posSrc);\n  } // forwardedTouchEvent set to true in case of the conflict with fastclick\n\n\n  ev.forwardedTouchEvent = true;\n  ev._constructed = true;\n  e.target.dispatchEvent(ev);\n}\n\nfunction dblclick(e) {\n  click(e, 'dblclick');\n}\n\nfunction prepend(el, target) {\n  if (target.firstChild) {\n    before(el, target.firstChild);\n  } else {\n    target.appendChild(el);\n  }\n}\n\nfunction before(el, target) {\n  target.parentNode.insertBefore(el, target);\n}\n\nfunction removeChild(el, child) {\n  el.removeChild(child);\n}\n\nvar DEFAULT_OPTIONS = {\n  startX: 0,\n  startY: 0,\n  scrollX: false,\n  scrollY: true,\n  freeScroll: false,\n  directionLockThreshold: 5,\n  eventPassthrough: '',\n  click: false,\n  tap: false,\n\n  /**\n   * support any side\n   * bounce: {\n   *   top: true,\n   *   bottom: true,\n   *   left: true,\n   *   right: true\n   * }\n   */\n  bounce: true,\n  bounceTime: 800,\n  momentum: true,\n  momentumLimitTime: 300,\n  momentumLimitDistance: 15,\n  swipeTime: 2500,\n  swipeBounceTime: 500,\n  deceleration: 0.0015,\n  flickLimitTime: 200,\n  flickLimitDistance: 100,\n  resizePolling: 60,\n  probeType: 0,\n  preventDefault: true,\n  preventDefaultException: {\n    tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/\n  },\n  HWCompositing: true,\n  useTransition: true,\n  useTransform: true,\n  bindToWrapper: false,\n  disableMouse: hasTouch,\n  disableTouch: !hasTouch,\n  observeDOM: true,\n  autoBlur: true,\n\n  /**\n   * for picker\n   * wheel: {\n   *   selectedIndex: 0,\n   *   rotate: 25,\n   *   adjustTime: 400\n   *   wheelWrapperClass: 'wheel-scroll',\n   *   wheelItemClass: 'wheel-item'\n   * }\n   */\n  wheel: false,\n\n  /**\n   * for slide\n   * snap: {\n   *   loop: false,\n   *   el: domEl,\n   *   threshold: 0.1,\n   *   stepX: 100,\n   *   stepY: 100,\n   *   speed: 400,\n   *   easing: {\n   *     style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n   *     fn: function (t) {\n   *       return t * (2 - t)\n   *     }\n   *   }\n   *   listenFlick: true\n   * }\n   */\n  snap: false,\n\n  /**\n   * for scrollbar\n   * scrollbar: {\n   *   fade: true,\n   *   interactive: false\n   * }\n   */\n  scrollbar: false,\n\n  /**\n   * for pull down and refresh\n   * pullDownRefresh: {\n   *   threshold: 50,\n   *   stop: 20\n   * }\n   */\n  pullDownRefresh: false,\n\n  /**\n   * for pull up and load\n   * pullUpLoad: {\n   *   threshold: 50\n   * }\n   */\n  pullUpLoad: false,\n\n  /**\n   * for mouse wheel\n   * mouseWheel: {\n   *   speed: 20,\n   *   invert: false,\n   *   easeTime: 300\n   * }\n   */\n  mouseWheel: false,\n  stopPropagation: false,\n\n  /**\n   * for zoom\n   * zoom: {\n   *   start: 1,\n   *   min: 1,\n   *   max: 4\n   * }\n   */\n  zoom: false,\n\n  /**\n   * for infinity\n   * infinity: {\n   *   render(item, div) {\n   *   },\n   *   createTombstone() {\n   *   },\n   *   fetch(count) {\n   *   }\n   * }\n   */\n  infinity: false,\n\n  /**\n   * for double click\n   * dblclick: {\n   *   delay: 300\n   * }\n   */\n  dblclick: false\n};\n\nfunction initMixin(BScroll) {\n  BScroll.prototype._init = function (options) {\n    this._handleOptions(options); // init private custom events\n\n\n    this._events = {};\n    this.x = 0;\n    this.y = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.setScale(1);\n\n    this._addDOMEvents();\n\n    this._initExtFeatures();\n\n    this._watchTransition();\n\n    if (this.options.observeDOM) {\n      this._initDOMObserver();\n    }\n\n    if (this.options.autoBlur) {\n      this._handleAutoBlur();\n    }\n\n    this.refresh();\n\n    if (!this.options.snap) {\n      this.scrollTo(this.options.startX, this.options.startY);\n    }\n\n    this.enable();\n  };\n\n  BScroll.prototype.setScale = function (scale) {\n    this.lastScale = isUndef(this.scale) ? scale : this.scale;\n    this.scale = scale;\n  };\n\n  BScroll.prototype._handleOptions = function (options) {\n    this.options = extend({}, DEFAULT_OPTIONS, options);\n    this.translateZ = this.options.HWCompositing && hasPerspective ? ' translateZ(0)' : '';\n    this.options.useTransition = this.options.useTransition && hasTransition;\n    this.options.useTransform = this.options.useTransform && hasTransform;\n    this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault; // If you want eventPassthrough I have to lock one of the axes\n\n    this.options.scrollX = this.options.eventPassthrough === 'horizontal' ? false : this.options.scrollX;\n    this.options.scrollY = this.options.eventPassthrough === 'vertical' ? false : this.options.scrollY; // With eventPassthrough we also need lockDirection mechanism\n\n    this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\n    this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\n\n    if (this.options.tap === true) {\n      this.options.tap = 'tap';\n    }\n  };\n\n  BScroll.prototype._addDOMEvents = function () {\n    var eventOperation = addEvent;\n\n    this._handleDOMEvents(eventOperation);\n  };\n\n  BScroll.prototype._removeDOMEvents = function () {\n    var eventOperation = removeEvent;\n\n    this._handleDOMEvents(eventOperation);\n  };\n\n  BScroll.prototype._handleDOMEvents = function (eventOperation) {\n    var target = this.options.bindToWrapper ? this.wrapper : window;\n    eventOperation(window, 'orientationchange', this);\n    eventOperation(window, 'resize', this);\n\n    if (this.options.click) {\n      eventOperation(this.wrapper, 'click', this, true);\n    }\n\n    if (!this.options.disableMouse) {\n      eventOperation(this.wrapper, 'mousedown', this);\n      eventOperation(target, 'mousemove', this);\n      eventOperation(target, 'mousecancel', this);\n      eventOperation(target, 'mouseup', this);\n    }\n\n    if (hasTouch && !this.options.disableTouch) {\n      eventOperation(this.wrapper, 'touchstart', this);\n      eventOperation(target, 'touchmove', this);\n      eventOperation(target, 'touchcancel', this);\n      eventOperation(target, 'touchend', this);\n    }\n\n    eventOperation(this.scroller, style.transitionEnd, this);\n  };\n\n  BScroll.prototype._initExtFeatures = function () {\n    if (this.options.snap) {\n      this._initSnap();\n    }\n\n    if (this.options.scrollbar) {\n      this._initScrollbar();\n    }\n\n    if (this.options.pullUpLoad) {\n      this._initPullUp();\n    }\n\n    if (this.options.pullDownRefresh) {\n      this._initPullDown();\n    }\n\n    if (this.options.wheel) {\n      this._initWheel();\n    }\n\n    if (this.options.mouseWheel) {\n      this._initMouseWheel();\n    }\n\n    if (this.options.zoom) {\n      this._initZoom();\n    }\n\n    if (this.options.infinity) {\n      this._initInfinite();\n    }\n  };\n\n  BScroll.prototype._watchTransition = function () {\n    if (typeof Object.defineProperty !== 'function') {\n      return;\n    }\n\n    var me = this;\n    var isInTransition = false;\n    var key = this.options.useTransition ? 'isInTransition' : 'isAnimating';\n    Object.defineProperty(this, key, {\n      get: function get() {\n        return isInTransition;\n      },\n      set: function set(newVal) {\n        isInTransition = newVal; // fix issue #359\n\n        var el = me.scroller.children.length ? me.scroller.children : [me.scroller];\n        var pointerEvents = isInTransition && !me.pulling ? 'none' : 'auto';\n\n        for (var i = 0; i < el.length; i++) {\n          el[i].style.pointerEvents = pointerEvents;\n        }\n      }\n    });\n  };\n\n  BScroll.prototype._handleAutoBlur = function () {\n    this.on('scrollStart', function () {\n      var activeElement = document.activeElement;\n\n      if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {\n        activeElement.blur();\n      }\n    });\n  };\n\n  BScroll.prototype._initDOMObserver = function () {\n    var _this = this;\n\n    if (typeof MutationObserver !== 'undefined') {\n      var timer = void 0;\n      var observer = new MutationObserver(function (mutations) {\n        // don't do any refresh during the transition, or outside of the boundaries\n        if (_this._shouldNotRefresh()) {\n          return;\n        }\n\n        var immediateRefresh = false;\n        var deferredRefresh = false;\n\n        for (var i = 0; i < mutations.length; i++) {\n          var mutation = mutations[i];\n\n          if (mutation.type !== 'attributes') {\n            immediateRefresh = true;\n            break;\n          } else {\n            if (mutation.target !== _this.scroller) {\n              deferredRefresh = true;\n              break;\n            }\n          }\n        }\n\n        if (immediateRefresh) {\n          _this.refresh();\n        } else if (deferredRefresh) {\n          // attributes changes too often\n          clearTimeout(timer);\n          timer = setTimeout(function () {\n            if (!_this._shouldNotRefresh()) {\n              _this.refresh();\n            }\n          }, 60);\n        }\n      });\n      var config = {\n        attributes: true,\n        childList: true,\n        subtree: true\n      };\n      observer.observe(this.scroller, config);\n      this.on('destroy', function () {\n        observer.disconnect();\n      });\n    } else {\n      this._checkDOMUpdate();\n    }\n  };\n\n  BScroll.prototype._shouldNotRefresh = function () {\n    var outsideBoundaries = this.x > this.minScrollX || this.x < this.maxScrollX || this.y > this.minScrollY || this.y < this.maxScrollY;\n    return this.isInTransition || this.stopFromTransition || outsideBoundaries;\n  };\n\n  BScroll.prototype._checkDOMUpdate = function () {\n    var scrollerRect = getRect(this.scroller);\n    var oldWidth = scrollerRect.width;\n    var oldHeight = scrollerRect.height;\n\n    function check() {\n      if (this.destroyed) {\n        return;\n      }\n\n      scrollerRect = getRect(this.scroller);\n      var newWidth = scrollerRect.width;\n      var newHeight = scrollerRect.height;\n\n      if (oldWidth !== newWidth || oldHeight !== newHeight) {\n        this.refresh();\n      }\n\n      oldWidth = newWidth;\n      oldHeight = newHeight;\n      next.call(this);\n    }\n\n    function next() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        check.call(_this2);\n      }, 1000);\n    }\n\n    next.call(this);\n  };\n\n  BScroll.prototype.handleEvent = function (e) {\n    switch (e.type) {\n      case 'touchstart':\n      case 'mousedown':\n        this._start(e);\n\n        if (this.options.zoom && e.touches && e.touches.length > 1) {\n          this._zoomStart(e);\n        }\n\n        break;\n\n      case 'touchmove':\n      case 'mousemove':\n        if (this.options.zoom && e.touches && e.touches.length > 1) {\n          this._zoom(e);\n        } else {\n          this._move(e);\n        }\n\n        break;\n\n      case 'touchend':\n      case 'mouseup':\n      case 'touchcancel':\n      case 'mousecancel':\n        if (this.scaled) {\n          this._zoomEnd(e);\n        } else {\n          this._end(e);\n        }\n\n        break;\n\n      case 'orientationchange':\n      case 'resize':\n        this._resize();\n\n        break;\n\n      case 'transitionend':\n      case 'webkitTransitionEnd':\n      case 'oTransitionEnd':\n      case 'MSTransitionEnd':\n        this._transitionEnd(e);\n\n        break;\n\n      case 'click':\n        if (this.enabled && !e._constructed) {\n          if (!preventDefaultException(e.target, this.options.preventDefaultException)) {\n            e.preventDefault();\n            e.stopPropagation();\n          }\n        }\n\n        break;\n\n      case 'wheel':\n      case 'DOMMouseScroll':\n      case 'mousewheel':\n        this._onMouseWheel(e);\n\n        break;\n    }\n  };\n\n  BScroll.prototype.refresh = function () {\n    var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\n    var wrapperRect = getRect(this.wrapper);\n    this.wrapperWidth = wrapperRect.width;\n    this.wrapperHeight = wrapperRect.height;\n    var scrollerRect = getRect(this.scroller);\n    this.scrollerWidth = Math.round(scrollerRect.width * this.scale);\n    this.scrollerHeight = Math.round(scrollerRect.height * this.scale);\n    this.relativeX = scrollerRect.left;\n    this.relativeY = scrollerRect.top;\n\n    if (isWrapperStatic) {\n      this.relativeX -= wrapperRect.left;\n      this.relativeY -= wrapperRect.top;\n    }\n\n    this.minScrollX = 0;\n    this.minScrollY = 0;\n    var wheel = this.options.wheel;\n\n    if (wheel) {\n      this.items = this.scroller.children; // check whether there are all disable items or not when refresh\n\n      this._checkWheelAllDisabled();\n\n      this.options.itemHeight = this.itemHeight = this.items.length ? this.scrollerHeight / this.items.length : 0;\n\n      if (this.selectedIndex === undefined) {\n        this.selectedIndex = wheel.selectedIndex || 0;\n      }\n\n      this.options.startY = -this.selectedIndex * this.itemHeight;\n      this.maxScrollX = 0;\n      this.maxScrollY = -this.itemHeight * (this.items.length - 1);\n    } else {\n      this.maxScrollX = this.wrapperWidth - this.scrollerWidth;\n\n      if (!this.options.infinity) {\n        this.maxScrollY = this.wrapperHeight - this.scrollerHeight;\n      }\n\n      if (this.maxScrollX < 0) {\n        this.maxScrollX -= this.relativeX;\n        this.minScrollX = -this.relativeX;\n      } else if (this.scale > 1) {\n        this.maxScrollX = this.maxScrollX / 2 - this.relativeX;\n        this.minScrollX = this.maxScrollX;\n      }\n\n      if (this.maxScrollY < 0) {\n        this.maxScrollY -= this.relativeY;\n        this.minScrollY = -this.relativeY;\n      } else if (this.scale > 1) {\n        this.maxScrollY = this.maxScrollY / 2 - this.relativeY;\n        this.minScrollY = this.maxScrollY;\n      }\n    }\n\n    this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < this.minScrollX;\n    this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < this.minScrollY;\n\n    if (!this.hasHorizontalScroll) {\n      this.maxScrollX = this.minScrollX;\n      this.scrollerWidth = this.wrapperWidth;\n    }\n\n    if (!this.hasVerticalScroll) {\n      this.maxScrollY = this.minScrollY;\n      this.scrollerHeight = this.wrapperHeight;\n    }\n\n    this.endTime = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.wrapperOffset = offset(this.wrapper);\n    this.trigger('refresh');\n    !this.scaled && this.resetPosition();\n  };\n\n  BScroll.prototype.enable = function () {\n    this.enabled = true;\n  };\n\n  BScroll.prototype.disable = function () {\n    this.enabled = false;\n  };\n}\n\nvar ease = {\n  // easeOutQuint\n  swipe: {\n    style: 'cubic-bezier(0.23, 1, 0.32, 1)',\n    fn: function fn(t) {\n      return 1 + --t * t * t * t * t;\n    }\n  },\n  // easeOutQuard\n  swipeBounce: {\n    style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    fn: function fn(t) {\n      return t * (2 - t);\n    }\n  },\n  // easeOutQuart\n  bounce: {\n    style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n    fn: function fn(t) {\n      return 1 - --t * t * t * t;\n    }\n  }\n};\n\nfunction momentum(current, start, time, lowerMargin, upperMargin, wrapperSize, options, scroll) {\n  var distance = current - start;\n  var speed = Math.abs(distance) / time;\n  var deceleration = options.deceleration,\n      itemHeight = options.itemHeight,\n      swipeBounceTime = options.swipeBounceTime,\n      wheel = options.wheel,\n      swipeTime = options.swipeTime;\n  var duration = swipeTime;\n  var rate = wheel ? 4 : 15;\n  var destination = current + speed / deceleration * (distance < 0 ? -1 : 1);\n\n  if (wheel && itemHeight) {\n    destination = scroll._findNearestValidWheel(destination).y;\n  }\n\n  if (destination < lowerMargin) {\n    destination = wrapperSize ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - wrapperSize / rate * speed) : lowerMargin;\n    duration = swipeBounceTime;\n  } else if (destination > upperMargin) {\n    destination = wrapperSize ? Math.min(upperMargin + wrapperSize / 4, upperMargin + wrapperSize / rate * speed) : upperMargin;\n    duration = swipeBounceTime;\n  }\n\n  return {\n    destination: Math.round(destination),\n    duration: duration\n  };\n}\n\nvar DEFAULT_INTERVAL = 100 / 60;\n\nfunction noop() {}\n\nvar requestAnimationFrame = function () {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop;\n  }\n\n  return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || // if all else fails, use setTimeout\n  function (callback) {\n    return window.setTimeout(callback, (callback.interval || DEFAULT_INTERVAL) / 2); // make interval as precise as possible.\n  };\n}();\n\nvar cancelAnimationFrame = function () {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop;\n  }\n\n  return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || function (id) {\n    window.clearTimeout(id);\n  };\n}();\n\nvar DIRECTION_UP = 1;\nvar DIRECTION_DOWN = -1;\nvar DIRECTION_LEFT = 1;\nvar DIRECTION_RIGHT = -1;\nvar PROBE_DEBOUNCE = 1;\nvar PROBE_REALTIME = 3;\n\nfunction warn(msg) {\n  console.error('[BScroll warn]: ' + msg);\n}\n\nfunction assert(condition, msg) {\n  if (!condition) {\n    throw new Error('[BScroll] ' + msg);\n  }\n}\n\nfunction coreMixin(BScroll) {\n  BScroll.prototype._start = function (e) {\n    var _eventType = eventType[e.type];\n\n    if (_eventType !== TOUCH_EVENT) {\n      if (e.button !== 0) {\n        return;\n      }\n    }\n\n    if (!this.enabled || this.destroyed || this.initiated && this.initiated !== _eventType) {\n      return;\n    }\n\n    this.initiated = _eventType;\n\n    if (this.options.preventDefault && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.moved = false;\n    this.distX = 0;\n    this.distY = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.movingDirectionX = 0;\n    this.movingDirectionY = 0;\n    this.directionLocked = 0;\n\n    this._transitionTime();\n\n    this.startTime = getNow();\n\n    if (this.options.wheel) {\n      this.target = e.target;\n    }\n\n    this.stop();\n    var point = e.touches ? e.touches[0] : e;\n    this.startX = this.x;\n    this.startY = this.y;\n    this.absStartX = this.x;\n    this.absStartY = this.y;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n    this.trigger('beforeScrollStart');\n  };\n\n  BScroll.prototype._move = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    var point = e.touches ? e.touches[0] : e;\n    var deltaX = point.pageX - this.pointX;\n    var deltaY = point.pageY - this.pointY;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n    this.distX += deltaX;\n    this.distY += deltaY;\n    var absDistX = Math.abs(this.distX);\n    var absDistY = Math.abs(this.distY);\n    var timestamp = getNow(); // We need to move at least momentumLimitDistance pixels for the scrolling to initiate\n\n    if (timestamp - this.endTime > this.options.momentumLimitTime && !this.moved && absDistY < this.options.momentumLimitDistance && absDistX < this.options.momentumLimitDistance) {\n      return;\n    } // If you are scrolling in one direction lock the other\n\n\n    if (!this.directionLocked && !this.options.freeScroll) {\n      if (absDistX > absDistY + this.options.directionLockThreshold) {\n        this.directionLocked = 'h'; // lock horizontally\n      } else if (absDistY >= absDistX + this.options.directionLockThreshold) {\n        this.directionLocked = 'v'; // lock vertically\n      } else {\n        this.directionLocked = 'n'; // no lock\n      }\n    }\n\n    if (this.directionLocked === 'h') {\n      if (this.options.eventPassthrough === 'vertical') {\n        e.preventDefault();\n      } else if (this.options.eventPassthrough === 'horizontal') {\n        this.initiated = false;\n        return;\n      }\n\n      deltaY = 0;\n    } else if (this.directionLocked === 'v') {\n      if (this.options.eventPassthrough === 'horizontal') {\n        e.preventDefault();\n      } else if (this.options.eventPassthrough === 'vertical') {\n        this.initiated = false;\n        return;\n      }\n\n      deltaX = 0;\n    }\n\n    deltaX = this.hasHorizontalScroll ? deltaX : 0;\n    deltaY = this.hasVerticalScroll ? deltaY : 0;\n    this.movingDirectionX = deltaX > 0 ? DIRECTION_RIGHT : deltaX < 0 ? DIRECTION_LEFT : 0;\n    this.movingDirectionY = deltaY > 0 ? DIRECTION_DOWN : deltaY < 0 ? DIRECTION_UP : 0;\n    var newX = this.x + deltaX;\n    var newY = this.y + deltaY;\n    var top = false;\n    var bottom = false;\n    var left = false;\n    var right = false; // Slow down or stop if outside of the boundaries\n\n    var bounce = this.options.bounce;\n\n    if (bounce !== false) {\n      top = bounce.top === undefined ? true : bounce.top;\n      bottom = bounce.bottom === undefined ? true : bounce.bottom;\n      left = bounce.left === undefined ? true : bounce.left;\n      right = bounce.right === undefined ? true : bounce.right;\n    }\n\n    if (newX > this.minScrollX || newX < this.maxScrollX) {\n      if (newX > this.minScrollX && left || newX < this.maxScrollX && right) {\n        newX = this.x + deltaX / 3;\n      } else {\n        newX = newX > this.minScrollX ? this.minScrollX : this.maxScrollX;\n      }\n    }\n\n    if (newY > this.minScrollY || newY < this.maxScrollY) {\n      if (newY > this.minScrollY && top || newY < this.maxScrollY && bottom) {\n        newY = this.y + deltaY / 3;\n      } else {\n        newY = newY > this.minScrollY ? this.minScrollY : this.maxScrollY;\n      }\n    }\n\n    if (!this.moved) {\n      this.moved = true;\n      this.trigger('scrollStart');\n    }\n\n    this._translate(newX, newY);\n\n    if (timestamp - this.startTime > this.options.momentumLimitTime) {\n      this.startTime = timestamp;\n      this.startX = this.x;\n      this.startY = this.y;\n\n      if (this.options.probeType === PROBE_DEBOUNCE) {\n        this.trigger('scroll', {\n          x: this.x,\n          y: this.y\n        });\n      }\n    }\n\n    if (this.options.probeType > PROBE_DEBOUNCE) {\n      this.trigger('scroll', {\n        x: this.x,\n        y: this.y\n      });\n    }\n\n    var scrollLeft = document.documentElement.scrollLeft || window.pageXOffset || document.body.scrollLeft;\n    var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n    var pX = this.pointX - scrollLeft;\n    var pY = this.pointY - scrollTop;\n\n    if (pX > document.documentElement.clientWidth - this.options.momentumLimitDistance || pX < this.options.momentumLimitDistance || pY < this.options.momentumLimitDistance || pY > document.documentElement.clientHeight - this.options.momentumLimitDistance) {\n      this._end(e);\n    }\n  };\n\n  BScroll.prototype._end = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    this.initiated = false;\n\n    if (this.options.preventDefault && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.trigger('touchEnd', {\n      x: this.x,\n      y: this.y\n    });\n    this.isInTransition = false; // ensures that the last position is rounded\n\n    var newX = Math.round(this.x);\n    var newY = Math.round(this.y);\n    var deltaX = newX - this.absStartX;\n    var deltaY = newY - this.absStartY;\n    this.directionX = deltaX > 0 ? DIRECTION_RIGHT : deltaX < 0 ? DIRECTION_LEFT : 0;\n    this.directionY = deltaY > 0 ? DIRECTION_DOWN : deltaY < 0 ? DIRECTION_UP : 0; // if configure pull down refresh, check it first\n\n    if (this.options.pullDownRefresh && this._checkPullDown()) {\n      return;\n    } // check if it is a click operation\n\n\n    if (this._checkClick(e)) {\n      this.trigger('scrollCancel');\n      return;\n    } // reset if we are outside of the boundaries\n\n\n    if (this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      return;\n    }\n\n    this._translate(newX, newY);\n\n    this.endTime = getNow();\n    var duration = this.endTime - this.startTime;\n    var absDistX = Math.abs(newX - this.startX);\n    var absDistY = Math.abs(newY - this.startY); // flick\n\n    if (this._events.flick && duration < this.options.flickLimitTime && absDistX < this.options.flickLimitDistance && absDistY < this.options.flickLimitDistance) {\n      this.trigger('flick');\n      return;\n    }\n\n    var time = 0; // start momentum animation if needed\n\n    if (this.options.momentum && duration < this.options.momentumLimitTime && (absDistY > this.options.momentumLimitDistance || absDistX > this.options.momentumLimitDistance)) {\n      var top = false;\n      var bottom = false;\n      var left = false;\n      var right = false;\n      var bounce = this.options.bounce;\n\n      if (bounce !== false) {\n        top = bounce.top === undefined ? true : bounce.top;\n        bottom = bounce.bottom === undefined ? true : bounce.bottom;\n        left = bounce.left === undefined ? true : bounce.left;\n        right = bounce.right === undefined ? true : bounce.right;\n      }\n\n      var wrapperWidth = this.directionX === DIRECTION_RIGHT && left || this.directionX === DIRECTION_LEFT && right ? this.wrapperWidth : 0;\n      var wrapperHeight = this.directionY === DIRECTION_DOWN && top || this.directionY === DIRECTION_UP && bottom ? this.wrapperHeight : 0;\n      var momentumX = this.hasHorizontalScroll ? momentum(this.x, this.startX, duration, this.maxScrollX, this.minScrollX, wrapperWidth, this.options, this) : {\n        destination: newX,\n        duration: 0\n      };\n      var momentumY = this.hasVerticalScroll ? momentum(this.y, this.startY, duration, this.maxScrollY, this.minScrollY, wrapperHeight, this.options, this) : {\n        destination: newY,\n        duration: 0\n      };\n      newX = momentumX.destination;\n      newY = momentumY.destination;\n      time = Math.max(momentumX.duration, momentumY.duration);\n      this.isInTransition = true;\n    } else {\n      if (this.options.wheel) {\n        newY = this._findNearestValidWheel(newY).y;\n        time = this.options.wheel.adjustTime || 400;\n      }\n    }\n\n    var easing = ease.swipe;\n\n    if (this.options.snap) {\n      var snap = this._nearestSnap(newX, newY);\n\n      this.currentPage = snap;\n      time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(newX - snap.x), 1000), Math.min(Math.abs(newY - snap.y), 1000)), 300);\n      newX = snap.x;\n      newY = snap.y;\n      this.directionX = 0;\n      this.directionY = 0;\n      easing = this.options.snap.easing || ease.bounce;\n    }\n\n    if (newX !== this.x || newY !== this.y) {\n      // change easing function when scroller goes out of the boundaries\n      if (newX > this.minScrollX || newX < this.maxScrollX || newY > this.minScrollY || newY < this.maxScrollY) {\n        easing = ease.swipeBounce;\n      }\n\n      this.scrollTo(newX, newY, time, easing);\n      return;\n    }\n\n    if (this.options.wheel) {\n      this.selectedIndex = this._findNearestValidWheel(this.y).index;\n    }\n\n    this.trigger('scrollEnd', {\n      x: this.x,\n      y: this.y\n    });\n  };\n\n  BScroll.prototype._checkClick = function (e) {\n    // when in the process of pulling down, it should not prevent click\n    var preventClick = this.stopFromTransition && !this.pulling;\n    this.stopFromTransition = false; // we scrolled less than 15 pixels\n\n    if (!this.moved) {\n      if (this.options.wheel) {\n        if (this.target && this.target.className === this.options.wheel.wheelWrapperClass) {\n          var index = this._findNearestValidWheel(this.y).index;\n\n          var _offset = Math.round((this.pointY + offsetToBody(this.wrapper).top - this.wrapperHeight / 2) / this.itemHeight);\n\n          this.target = this.items[index + _offset];\n        }\n\n        var top = offset(this.target).top;\n        var left = offset(this.target).left;\n        top -= this.wrapperOffset.top;\n        top -= Math.round(this.target.offsetHeight / 2 - this.wrapper.offsetHeight / 2) || 0;\n        left -= this.wrapperOffset.left;\n        left -= Math.round(this.target.offsetWidth / 2 - this.wrapper.offsetWidth / 2) || 0;\n        top = this._findNearestValidWheel(top).y;\n        this.scrollTo(left, top, this.options.wheel.adjustTime || 400, ease.swipe);\n        return true;\n      } else {\n        if (!preventClick) {\n          var _dblclick = this.options.dblclick;\n          var dblclickTrigged = false;\n\n          if (_dblclick && this.lastClickTime) {\n            var _dblclick$delay = _dblclick.delay,\n                delay = _dblclick$delay === undefined ? 300 : _dblclick$delay;\n\n            if (getNow() - this.lastClickTime < delay) {\n              dblclickTrigged = true;\n              dblclick(e);\n            }\n          }\n\n          if (this.options.tap) {\n            tap(e, this.options.tap);\n          }\n\n          if (this.options.click && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n            click(e);\n          }\n\n          this.lastClickTime = dblclickTrigged ? null : getNow();\n          return true;\n        }\n\n        return false;\n      }\n    }\n\n    return false;\n  };\n\n  BScroll.prototype._resize = function () {\n    var _this = this;\n\n    if (!this.enabled) {\n      return;\n    } // fix a scroll problem under Android condition\n\n\n    if (isAndroid) {\n      this.wrapper.scrollTop = 0;\n    }\n\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = setTimeout(function () {\n      _this.refresh();\n    }, this.options.resizePolling);\n  };\n\n  BScroll.prototype._startProbe = function () {\n    cancelAnimationFrame(this.probeTimer);\n    this.probeTimer = requestAnimationFrame(probe);\n    var me = this;\n\n    function probe() {\n      var pos = me.getComputedPosition();\n      me.trigger('scroll', pos);\n\n      if (!me.isInTransition) {\n        me.trigger('scrollEnd', pos);\n        return;\n      }\n\n      me.probeTimer = requestAnimationFrame(probe);\n    }\n  };\n\n  BScroll.prototype._transitionTime = function () {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    this.scrollerStyle[style.transitionDuration] = time + 'ms';\n\n    if (this.options.wheel) {\n      for (var i = 0; i < this.items.length; i++) {\n        this.items[i].style[style.transitionDuration] = time + 'ms';\n      }\n    }\n\n    if (this.indicators) {\n      for (var _i = 0; _i < this.indicators.length; _i++) {\n        this.indicators[_i].transitionTime(time);\n      }\n    }\n  };\n\n  BScroll.prototype._transitionTimingFunction = function (easing) {\n    this.scrollerStyle[style.transitionTimingFunction] = easing;\n\n    if (this.options.wheel) {\n      for (var i = 0; i < this.items.length; i++) {\n        this.items[i].style[style.transitionTimingFunction] = easing;\n      }\n    }\n\n    if (this.indicators) {\n      for (var _i2 = 0; _i2 < this.indicators.length; _i2++) {\n        this.indicators[_i2].transitionTimingFunction(easing);\n      }\n    }\n  };\n\n  BScroll.prototype._transitionEnd = function (e) {\n    if (e.target !== this.scroller || !this.isInTransition) {\n      return;\n    }\n\n    this._transitionTime();\n\n    var needReset = !this.pulling || this.movingDirectionY === DIRECTION_UP;\n\n    if (needReset && !this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      this.isInTransition = false;\n\n      if (this.options.probeType !== PROBE_REALTIME) {\n        this.trigger('scrollEnd', {\n          x: this.x,\n          y: this.y\n        });\n      }\n    }\n  };\n\n  BScroll.prototype._translate = function (x, y, scale) {\n    assert(!isUndef(x) && !isUndef(y), 'Translate x or y is null or undefined.');\n\n    if (isUndef(scale)) {\n      scale = this.scale;\n    }\n\n    if (this.options.useTransform) {\n      this.scrollerStyle[style.transform] = 'translate(' + x + 'px,' + y + 'px) scale(' + scale + ')' + this.translateZ;\n    } else {\n      x = Math.round(x);\n      y = Math.round(y);\n      this.scrollerStyle.left = x + 'px';\n      this.scrollerStyle.top = y + 'px';\n    }\n\n    if (this.options.wheel) {\n      var _options$wheel$rotate = this.options.wheel.rotate,\n          rotate = _options$wheel$rotate === undefined ? 25 : _options$wheel$rotate;\n\n      for (var i = 0; i < this.items.length; i++) {\n        var deg = rotate * (y / this.itemHeight + i);\n        this.items[i].style[style.transform] = 'rotateX(' + deg + 'deg)';\n      }\n    }\n\n    this.x = x;\n    this.y = y;\n    this.setScale(scale);\n\n    if (this.indicators) {\n      for (var _i3 = 0; _i3 < this.indicators.length; _i3++) {\n        this.indicators[_i3].updatePosition();\n      }\n    }\n  };\n\n  BScroll.prototype._animate = function (destX, destY, duration, easingFn) {\n    var me = this;\n    var startX = this.x;\n    var startY = this.y;\n    var startScale = this.lastScale;\n    var destScale = this.scale;\n    var startTime = getNow();\n    var destTime = startTime + duration;\n\n    function step() {\n      var now = getNow();\n\n      if (now >= destTime) {\n        me.isAnimating = false;\n\n        me._translate(destX, destY, destScale);\n\n        me.trigger('scroll', {\n          x: me.x,\n          y: me.y\n        });\n\n        if (!me.pulling && !me.resetPosition(me.options.bounceTime)) {\n          me.trigger('scrollEnd', {\n            x: me.x,\n            y: me.y\n          });\n        }\n\n        return;\n      }\n\n      now = (now - startTime) / duration;\n      var easing = easingFn(now);\n      var newX = (destX - startX) * easing + startX;\n      var newY = (destY - startY) * easing + startY;\n      var newScale = (destScale - startScale) * easing + startScale;\n\n      me._translate(newX, newY, newScale);\n\n      if (me.isAnimating) {\n        me.animateTimer = requestAnimationFrame(step);\n      }\n\n      if (me.options.probeType === PROBE_REALTIME) {\n        me.trigger('scroll', {\n          x: me.x,\n          y: me.y\n        });\n      }\n    }\n\n    this.isAnimating = true;\n    cancelAnimationFrame(this.animateTimer);\n    step();\n  };\n\n  BScroll.prototype.scrollBy = function (x, y) {\n    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ease.bounce;\n    x = this.x + x;\n    y = this.y + y;\n    this.scrollTo(x, y, time, easing);\n  };\n\n  BScroll.prototype.scrollTo = function (x, y) {\n    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ease.bounce;\n    var isSilent = arguments[4];\n\n    if (this.options.wheel) {\n      y = this._findNearestValidWheel(y).y;\n    }\n\n    if (x === this.x && y === this.y) {\n      return;\n    }\n\n    this.isInTransition = this.options.useTransition && time > 0 && (this.x !== x || this.y !== y);\n\n    if (!time || this.options.useTransition) {\n      this._transitionTimingFunction(easing.style);\n\n      this._transitionTime(time);\n\n      this._translate(x, y);\n\n      if (time && this.options.probeType === PROBE_REALTIME) {\n        this._startProbe();\n      }\n\n      if (!time && !isSilent) {\n        // don't trigger resetPosition when zoom feature is open, fix #748\n        if (this.options.zoom) return;\n        this.trigger('scroll', {\n          x: x,\n          y: y\n        }); // force reflow to put everything in position\n\n        this._reflow = document.body.offsetHeight;\n\n        if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\n          this.trigger('scrollEnd', {\n            x: x,\n            y: y\n          });\n        }\n      }\n\n      if (this.options.wheel) {\n        this.selectedIndex = this._findNearestValidWheel(y).index;\n      }\n    } else {\n      this._animate(x, y, time, easing.fn);\n    }\n  };\n\n  BScroll.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\n    if (!el) {\n      return;\n    }\n\n    el = el.nodeType ? el : this.scroller.querySelector(el);\n\n    if (this.options.wheel && !el.classList.contains(this.options.wheel.wheelItemClass)) {\n      return;\n    }\n\n    var pos = offset(el);\n    pos.left -= this.wrapperOffset.left;\n    pos.top -= this.wrapperOffset.top; // if offsetX/Y are true we center the element to the screen\n\n    if (offsetX === true) {\n      offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\n    }\n\n    if (offsetY === true) {\n      offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\n    }\n\n    pos.left -= offsetX || 0;\n    pos.top -= offsetY || 0;\n    pos.left = pos.left > this.minScrollX ? this.minScrollX : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\n    pos.top = pos.top > this.minScrollY ? this.minScrollY : pos.top < this.maxScrollY ? this.maxScrollY : pos.top;\n\n    if (this.options.wheel) {\n      pos.top = this._findNearestValidWheel(pos.top).y;\n    }\n\n    this.scrollTo(pos.left, pos.top, time, easing);\n  };\n\n  BScroll.prototype.resetPosition = function () {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var easeing = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ease.bounce;\n    var x = this.x;\n    var roundX = Math.round(x);\n\n    if (!this.hasHorizontalScroll || roundX > this.minScrollX) {\n      x = this.minScrollX;\n    } else if (roundX < this.maxScrollX) {\n      x = this.maxScrollX;\n    }\n\n    var y = this.y;\n    var roundY = Math.round(y);\n\n    if (!this.hasVerticalScroll || roundY > this.minScrollY) {\n      y = this.minScrollY;\n    } else if (roundY < this.maxScrollY) {\n      y = this.maxScrollY;\n    }\n\n    if (x === this.x && y === this.y) {\n      return false;\n    }\n\n    this.scrollTo(x, y, time, easeing);\n    return true;\n  };\n\n  BScroll.prototype.getComputedPosition = function () {\n    var matrix = window.getComputedStyle(this.scroller, null);\n    var x = void 0;\n    var y = void 0;\n\n    if (this.options.useTransform) {\n      matrix = matrix[style.transform].split(')')[0].split(', ');\n      x = +(matrix[12] || matrix[4]);\n      y = +(matrix[13] || matrix[5]);\n    } else {\n      x = +matrix.left.replace(/[^-\\d.]/g, '');\n      y = +matrix.top.replace(/[^-\\d.]/g, '');\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  BScroll.prototype.stop = function () {\n    if (this.options.useTransition && this.isInTransition) {\n      this.isInTransition = false;\n      cancelAnimationFrame(this.probeTimer);\n      var pos = this.getComputedPosition();\n\n      this._translate(pos.x, pos.y);\n\n      if (this.options.wheel) {\n        this.target = this.items[this._findNearestValidWheel(pos.y).index];\n      } else {\n        this.trigger('scrollEnd', {\n          x: this.x,\n          y: this.y\n        });\n      }\n\n      this.stopFromTransition = true;\n    } else if (!this.options.useTransition && this.isAnimating) {\n      this.isAnimating = false;\n      cancelAnimationFrame(this.animateTimer);\n      this.trigger('scrollEnd', {\n        x: this.x,\n        y: this.y\n      });\n      this.stopFromTransition = true;\n    }\n  };\n\n  BScroll.prototype.destroy = function () {\n    this.destroyed = true;\n    this.trigger('destroy');\n\n    if (this.options.useTransition) {\n      cancelAnimationFrame(this.probeTimer);\n    } else {\n      cancelAnimationFrame(this.animateTimer);\n    }\n\n    this._removeDOMEvents(); // remove custom events\n\n\n    this._events = {};\n  };\n}\n\nfunction snapMixin(BScroll) {\n  BScroll.prototype._initSnap = function () {\n    var _this = this;\n\n    this.currentPage = {};\n    var snap = this.options.snap;\n\n    if (snap.loop) {\n      var children = this.scroller.children;\n\n      if (children.length > 1) {\n        prepend(children[children.length - 1].cloneNode(true), this.scroller);\n        this.scroller.appendChild(children[1].cloneNode(true));\n      } else {\n        // Loop does not make any sense if there is only one child.\n        snap.loop = false;\n      }\n    }\n\n    var el = snap.el;\n\n    if (typeof el === 'string') {\n      el = this.scroller.querySelectorAll(el);\n    }\n\n    this.on('refresh', function () {\n      _this.pages = [];\n\n      if (!_this.wrapperWidth || !_this.wrapperHeight || !_this.scrollerWidth || !_this.scrollerHeight) {\n        return;\n      }\n\n      var stepX = snap.stepX || _this.wrapperWidth;\n      var stepY = snap.stepY || _this.wrapperHeight;\n      var x = 0;\n      var y = void 0;\n      var cx = void 0;\n      var cy = void 0;\n      var i = 0;\n      var l = void 0;\n      var m = 0;\n      var n = void 0;\n      var rect = void 0;\n\n      if (!el) {\n        cx = Math.round(stepX / 2);\n        cy = Math.round(stepY / 2);\n\n        while (x > -_this.scrollerWidth) {\n          _this.pages[i] = [];\n          l = 0;\n          y = 0;\n\n          while (y > -_this.scrollerHeight) {\n            _this.pages[i][l] = {\n              x: Math.max(x, _this.maxScrollX),\n              y: Math.max(y, _this.maxScrollY),\n              width: stepX,\n              height: stepY,\n              cx: x - cx,\n              cy: y - cy\n            };\n            y -= stepY;\n            l++;\n          }\n\n          x -= stepX;\n          i++;\n        }\n      } else {\n        l = el.length;\n        n = -1;\n\n        for (; i < l; i++) {\n          rect = getRect(el[i]);\n\n          if (i === 0 || rect.left <= getRect(el[i - 1]).left) {\n            m = 0;\n            n++;\n          }\n\n          if (!_this.pages[m]) {\n            _this.pages[m] = [];\n          }\n\n          x = Math.max(-rect.left, _this.maxScrollX);\n          y = Math.max(-rect.top, _this.maxScrollY);\n          cx = x - Math.round(rect.width / 2);\n          cy = y - Math.round(rect.height / 2);\n          _this.pages[m][n] = {\n            x: x,\n            y: y,\n            width: rect.width,\n            height: rect.height,\n            cx: cx,\n            cy: cy\n          };\n\n          if (x > _this.maxScrollX) {\n            m++;\n          }\n        }\n      }\n\n      _this._checkSnapLoop();\n\n      var initPageX = snap._loopX ? 1 : 0;\n      var initPageY = snap._loopY ? 1 : 0;\n\n      _this._goToPage(_this.currentPage.pageX || initPageX, _this.currentPage.pageY || initPageY, 0, undefined, true); // Update snap threshold if needed.\n\n\n      var snapThreshold = snap.threshold;\n\n      if (snapThreshold % 1 === 0) {\n        _this.snapThresholdX = snapThreshold;\n        _this.snapThresholdY = snapThreshold;\n      } else {\n        _this.snapThresholdX = Math.round(_this.pages[_this.currentPage.pageX][_this.currentPage.pageY].width * snapThreshold);\n        _this.snapThresholdY = Math.round(_this.pages[_this.currentPage.pageX][_this.currentPage.pageY].height * snapThreshold);\n      }\n    });\n    this.on('scrollEnd', function () {\n      if (snap.loop) {\n        if (snap._loopX) {\n          if (_this.currentPage.pageX === 0) {\n            _this._goToPage(_this.pages.length - 2, _this.currentPage.pageY, 0, undefined, true);\n          }\n\n          if (_this.currentPage.pageX === _this.pages.length - 1) {\n            _this._goToPage(1, _this.currentPage.pageY, 0, undefined, true);\n          }\n        } else {\n          if (_this.currentPage.pageY === 0) {\n            _this._goToPage(_this.currentPage.pageX, _this.pages[0].length - 2, 0, undefined, true);\n          }\n\n          if (_this.currentPage.pageY === _this.pages[0].length - 1) {\n            _this._goToPage(_this.currentPage.pageX, 1, 0, undefined, true);\n          }\n        }\n      }\n    });\n\n    if (snap.listenFlick !== false) {\n      this.on('flick', function () {\n        var time = snap.speed || Math.max(Math.max(Math.min(Math.abs(_this.x - _this.startX), 1000), Math.min(Math.abs(_this.y - _this.startY), 1000)), 300);\n\n        _this._goToPage(_this.currentPage.pageX + _this.directionX, _this.currentPage.pageY + _this.directionY, time);\n      });\n    }\n\n    this.on('destroy', function () {\n      if (snap.loop) {\n        var _children = _this.scroller.children;\n\n        if (_children.length > 2) {\n          removeChild(_this.scroller, _children[_children.length - 1]);\n          removeChild(_this.scroller, _children[0]);\n        }\n      }\n    });\n  };\n\n  BScroll.prototype._checkSnapLoop = function () {\n    var snap = this.options.snap;\n\n    if (!snap.loop || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    if (this.pages.length > 1) {\n      snap._loopX = true;\n    }\n\n    if (this.pages[0] && this.pages[0].length > 1) {\n      snap._loopY = true;\n    }\n\n    if (snap._loopX && snap._loopY) {\n      warn('Loop does not support two direction at the same time.');\n    }\n  };\n\n  BScroll.prototype._nearestSnap = function (x, y) {\n    if (!this.pages.length) {\n      return {\n        x: 0,\n        y: 0,\n        pageX: 0,\n        pageY: 0\n      };\n    }\n\n    var i = 0; // Check if we exceeded the snap threshold\n\n    if (Math.abs(x - this.absStartX) <= this.snapThresholdX && Math.abs(y - this.absStartY) <= this.snapThresholdY) {\n      return this.currentPage;\n    }\n\n    if (x > this.minScrollX) {\n      x = this.minScrollX;\n    } else if (x < this.maxScrollX) {\n      x = this.maxScrollX;\n    }\n\n    if (y > this.minScrollY) {\n      y = this.minScrollY;\n    } else if (y < this.maxScrollY) {\n      y = this.maxScrollY;\n    }\n\n    var l = this.pages.length;\n\n    for (; i < l; i++) {\n      if (x >= this.pages[i][0].cx) {\n        x = this.pages[i][0].x;\n        break;\n      }\n    }\n\n    l = this.pages[i].length;\n    var m = 0;\n\n    for (; m < l; m++) {\n      if (y >= this.pages[0][m].cy) {\n        y = this.pages[0][m].y;\n        break;\n      }\n    }\n\n    if (i === this.currentPage.pageX) {\n      i += this.directionX;\n\n      if (i < 0) {\n        i = 0;\n      } else if (i >= this.pages.length) {\n        i = this.pages.length - 1;\n      }\n\n      x = this.pages[i][0].x;\n    }\n\n    if (m === this.currentPage.pageY) {\n      m += this.directionY;\n\n      if (m < 0) {\n        m = 0;\n      } else if (m >= this.pages[0].length) {\n        m = this.pages[0].length - 1;\n      }\n\n      y = this.pages[0][m].y;\n    }\n\n    return {\n      x: x,\n      y: y,\n      pageX: i,\n      pageY: m\n    };\n  };\n\n  BScroll.prototype._goToPage = function (x) {\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var time = arguments[2];\n    var easing = arguments[3];\n    var isSilent = arguments[4];\n    var snap = this.options.snap;\n\n    if (!snap || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    easing = easing || snap.easing || ease.bounce;\n\n    if (x >= this.pages.length) {\n      x = this.pages.length - 1;\n    } else if (x < 0) {\n      x = 0;\n    }\n\n    if (!this.pages[x]) {\n      return;\n    }\n\n    if (y >= this.pages[x].length) {\n      y = this.pages[x].length - 1;\n    } else if (y < 0) {\n      y = 0;\n    }\n\n    var posX = this.pages[x][y].x;\n    var posY = this.pages[x][y].y;\n    time = time === undefined ? snap.speed || Math.max(Math.max(Math.min(Math.abs(posX - this.x), 1000), Math.min(Math.abs(posY - this.y), 1000)), 300) : time;\n    this.currentPage = {\n      x: posX,\n      y: posY,\n      pageX: x,\n      pageY: y\n    };\n    this.scrollTo(posX, posY, time, easing, isSilent);\n  };\n\n  BScroll.prototype.goToPage = function (x, y, time, easing) {\n    var snap = this.options.snap;\n\n    if (!snap || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    if (snap.loop) {\n      var len = void 0;\n\n      if (snap._loopX) {\n        len = this.pages.length - 2;\n\n        if (x >= len) {\n          x = len - 1;\n        } else if (x < 0) {\n          x = 0;\n        }\n\n        x += 1;\n      } else {\n        len = this.pages[0].length - 2;\n\n        if (y >= len) {\n          y = len - 1;\n        } else if (y < 0) {\n          y = 0;\n        }\n\n        y += 1;\n      }\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.next = function (time, easing) {\n    var snap = this.options.snap;\n\n    if (!snap) {\n      return;\n    }\n\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n    x++;\n\n    if (x >= this.pages.length && this.hasVerticalScroll) {\n      x = 0;\n      y++;\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.prev = function (time, easing) {\n    var snap = this.options.snap;\n\n    if (!snap) {\n      return;\n    }\n\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n    x--;\n\n    if (x < 0 && this.hasVerticalScroll) {\n      x = 0;\n      y--;\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.getCurrentPage = function () {\n    var snap = this.options.snap;\n\n    if (!snap) {\n      return null;\n    }\n\n    if (snap.loop) {\n      var currentPage = void 0;\n\n      if (snap._loopX) {\n        currentPage = extend({}, this.currentPage, {\n          pageX: this.currentPage.pageX - 1\n        });\n      } else {\n        currentPage = extend({}, this.currentPage, {\n          pageY: this.currentPage.pageY - 1\n        });\n      }\n\n      return currentPage;\n    }\n\n    return this.currentPage;\n  };\n}\n\nfunction wheelMixin(BScroll) {\n  BScroll.prototype.wheelTo = function () {\n    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (this.options.wheel) {\n      var y = -index * this.itemHeight;\n      this.scrollTo(0, y);\n    }\n  };\n\n  BScroll.prototype.getSelectedIndex = function () {\n    return this.options.wheel && this.selectedIndex;\n  };\n\n  BScroll.prototype._initWheel = function () {\n    var wheel = this.options.wheel;\n\n    if (!wheel.wheelWrapperClass) {\n      wheel.wheelWrapperClass = 'wheel-scroll';\n    }\n\n    if (!wheel.wheelItemClass) {\n      wheel.wheelItemClass = 'wheel-item';\n    }\n\n    if (!wheel.wheelDisabledItemClass) {\n      wheel.wheelDisabledItemClass = 'wheel-disabled-item';\n    }\n\n    if (wheel.selectedIndex === undefined) {\n      wheel.selectedIndex = 0;\n    }\n  };\n\n  BScroll.prototype._findNearestValidWheel = function (y) {\n    y = y > 0 ? 0 : y < this.maxScrollY ? this.maxScrollY : y;\n    var wheel = this.options.wheel;\n    var currentIndex = Math.abs(Math.round(-y / this.itemHeight));\n    var cacheIndex = currentIndex;\n    var items = this.items; // Impersonation web native select\n    // first, check whether there is a enable item whose index is smaller than currentIndex\n    // then, check whether there is a enable item whose index is bigger than currentIndex\n    // otherwise, there are all disabled items, just keep currentIndex unchange\n\n    while (currentIndex >= 0) {\n      if (items[currentIndex].className.indexOf(wheel.wheelDisabledItemClass) === -1) {\n        break;\n      }\n\n      currentIndex--;\n    }\n\n    if (currentIndex < 0) {\n      currentIndex = cacheIndex;\n\n      while (currentIndex <= items.length - 1) {\n        if (items[currentIndex].className.indexOf(wheel.wheelDisabledItemClass) === -1) {\n          break;\n        }\n\n        currentIndex++;\n      }\n    } // keep it unchange when all the items are disabled\n\n\n    if (currentIndex === items.length) {\n      currentIndex = cacheIndex;\n    } // when all the items are disabled, this.selectedIndex should always be -1\n\n\n    return {\n      index: this.wheelItemsAllDisabled ? -1 : currentIndex,\n      y: -currentIndex * this.itemHeight\n    };\n  };\n\n  BScroll.prototype._checkWheelAllDisabled = function () {\n    var wheel = this.options.wheel;\n    var items = this.items;\n    this.wheelItemsAllDisabled = true;\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].className.indexOf(wheel.wheelDisabledItemClass) === -1) {\n        this.wheelItemsAllDisabled = false;\n        break;\n      }\n    }\n  };\n}\n\nvar INDICATOR_MIN_LEN = 8;\n\nfunction scrollbarMixin(BScroll) {\n  BScroll.prototype._initScrollbar = function () {\n    var _this = this;\n\n    var _options$scrollbar = this.options.scrollbar,\n        _options$scrollbar$fa = _options$scrollbar.fade,\n        fade = _options$scrollbar$fa === undefined ? true : _options$scrollbar$fa,\n        _options$scrollbar$in = _options$scrollbar.interactive,\n        interactive = _options$scrollbar$in === undefined ? false : _options$scrollbar$in;\n    this.indicators = [];\n    var indicator = void 0;\n\n    if (this.options.scrollX) {\n      indicator = {\n        el: createScrollbar('horizontal'),\n        direction: 'horizontal',\n        fade: fade,\n        interactive: interactive\n      };\n\n      this._insertScrollBar(indicator.el);\n\n      this.indicators.push(new Indicator(this, indicator));\n    }\n\n    if (this.options.scrollY) {\n      indicator = {\n        el: createScrollbar('vertical'),\n        direction: 'vertical',\n        fade: fade,\n        interactive: interactive\n      };\n\n      this._insertScrollBar(indicator.el);\n\n      this.indicators.push(new Indicator(this, indicator));\n    }\n\n    this.on('refresh', function () {\n      for (var i = 0; i < _this.indicators.length; i++) {\n        _this.indicators[i].refresh();\n      }\n    });\n\n    if (fade) {\n      this.on('scrollEnd', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade();\n        }\n      });\n      this.on('scrollCancel', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade();\n        }\n      });\n      this.on('scrollStart', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade(true);\n        }\n      });\n      this.on('beforeScrollStart', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade(true, true);\n        }\n      });\n    }\n\n    this.on('destroy', function () {\n      _this._removeScrollBars();\n    });\n  };\n\n  BScroll.prototype._insertScrollBar = function (scrollbar) {\n    this.wrapper.appendChild(scrollbar);\n  };\n\n  BScroll.prototype._removeScrollBars = function () {\n    for (var i = 0; i < this.indicators.length; i++) {\n      this.indicators[i].destroy();\n    }\n  };\n}\n\nfunction createScrollbar(direction) {\n  var scrollbar = document.createElement('div');\n  var indicator = document.createElement('div');\n  scrollbar.style.cssText = 'position:absolute;z-index:9999;pointerEvents:none';\n  indicator.style.cssText = 'box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;';\n  indicator.className = 'bscroll-indicator';\n\n  if (direction === 'horizontal') {\n    scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\n    indicator.style.height = '100%';\n    scrollbar.className = 'bscroll-horizontal-scrollbar';\n  } else {\n    scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\n    indicator.style.width = '100%';\n    scrollbar.className = 'bscroll-vertical-scrollbar';\n  }\n\n  scrollbar.style.cssText += ';overflow:hidden';\n  scrollbar.appendChild(indicator);\n  return scrollbar;\n}\n\nfunction Indicator(scroller, options) {\n  this.wrapper = options.el;\n  this.wrapperStyle = this.wrapper.style;\n  this.indicator = this.wrapper.children[0];\n  this.indicatorStyle = this.indicator.style;\n  this.scroller = scroller;\n  this.direction = options.direction;\n\n  if (options.fade) {\n    this.visible = 0;\n    this.wrapperStyle.opacity = '0';\n  } else {\n    this.visible = 1;\n  }\n\n  this.sizeRatioX = 1;\n  this.sizeRatioY = 1;\n  this.maxPosX = 0;\n  this.maxPosY = 0;\n  this.x = 0;\n  this.y = 0;\n\n  if (options.interactive) {\n    this._addDOMEvents();\n  }\n}\n\nIndicator.prototype.handleEvent = function (e) {\n  switch (e.type) {\n    case 'touchstart':\n    case 'mousedown':\n      this._start(e);\n\n      break;\n\n    case 'touchmove':\n    case 'mousemove':\n      this._move(e);\n\n      break;\n\n    case 'touchend':\n    case 'mouseup':\n    case 'touchcancel':\n    case 'mousecancel':\n      this._end(e);\n\n      break;\n  }\n};\n\nIndicator.prototype.refresh = function () {\n  if (this._shouldShow()) {\n    this.transitionTime();\n\n    this._calculate();\n\n    this.updatePosition();\n  }\n};\n\nIndicator.prototype.fade = function (visible, hold) {\n  var _this2 = this;\n\n  if (hold && !this.visible) {\n    return;\n  }\n\n  var time = visible ? 250 : 500;\n  visible = visible ? '1' : '0';\n  this.wrapperStyle[style.transitionDuration] = time + 'ms';\n  clearTimeout(this.fadeTimeout);\n  this.fadeTimeout = setTimeout(function () {\n    _this2.wrapperStyle.opacity = visible;\n    _this2.visible = +visible;\n  }, 0);\n};\n\nIndicator.prototype.updatePosition = function () {\n  if (this.direction === 'vertical') {\n    var y = Math.round(this.sizeRatioY * this.scroller.y);\n\n    if (y < 0) {\n      this.transitionTime(500);\n      var height = Math.max(this.indicatorHeight + y * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.height = height + 'px';\n      y = 0;\n    } else if (y > this.maxPosY) {\n      this.transitionTime(500);\n\n      var _height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, INDICATOR_MIN_LEN);\n\n      this.indicatorStyle.height = _height + 'px';\n      y = this.maxPosY + this.indicatorHeight - _height;\n    } else {\n      this.indicatorStyle.height = this.indicatorHeight + 'px';\n    }\n\n    this.y = y;\n\n    if (this.scroller.options.useTransform) {\n      this.indicatorStyle[style.transform] = 'translateY(' + y + 'px)' + this.scroller.translateZ;\n    } else {\n      this.indicatorStyle.top = y + 'px';\n    }\n  } else {\n    var x = Math.round(this.sizeRatioX * this.scroller.x);\n\n    if (x < 0) {\n      this.transitionTime(500);\n      var width = Math.max(this.indicatorWidth + x * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.width = width + 'px';\n      x = 0;\n    } else if (x > this.maxPosX) {\n      this.transitionTime(500);\n\n      var _width = Math.max(this.indicatorWidth - (x - this.maxPosX) * 3, INDICATOR_MIN_LEN);\n\n      this.indicatorStyle.width = _width + 'px';\n      x = this.maxPosX + this.indicatorWidth - _width;\n    } else {\n      this.indicatorStyle.width = this.indicatorWidth + 'px';\n    }\n\n    this.x = x;\n\n    if (this.scroller.options.useTransform) {\n      this.indicatorStyle[style.transform] = 'translateX(' + x + 'px)' + this.scroller.translateZ;\n    } else {\n      this.indicatorStyle.left = x + 'px';\n    }\n  }\n};\n\nIndicator.prototype.transitionTime = function () {\n  var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  this.indicatorStyle[style.transitionDuration] = time + 'ms';\n};\n\nIndicator.prototype.transitionTimingFunction = function (easing) {\n  this.indicatorStyle[style.transitionTimingFunction] = easing;\n};\n\nIndicator.prototype.destroy = function () {\n  this._removeDOMEvents();\n\n  this.wrapper.parentNode.removeChild(this.wrapper);\n};\n\nIndicator.prototype._start = function (e) {\n  var point = e.touches ? e.touches[0] : e;\n  e.preventDefault();\n  e.stopPropagation();\n  this.transitionTime();\n  this.initiated = true;\n  this.moved = false;\n  this.lastPointX = point.pageX;\n  this.lastPointY = point.pageY;\n  this.startTime = getNow();\n\n  this._handleMoveEvents(addEvent);\n\n  this.scroller.trigger('beforeScrollStart');\n};\n\nIndicator.prototype._move = function (e) {\n  var point = e.touches ? e.touches[0] : e;\n  e.preventDefault();\n  e.stopPropagation();\n\n  if (!this.moved) {\n    this.scroller.trigger('scrollStart');\n  }\n\n  this.moved = true;\n  var deltaX = point.pageX - this.lastPointX;\n  this.lastPointX = point.pageX;\n  var deltaY = point.pageY - this.lastPointY;\n  this.lastPointY = point.pageY;\n  var newX = this.x + deltaX;\n  var newY = this.y + deltaY;\n\n  this._pos(newX, newY);\n};\n\nIndicator.prototype._end = function (e) {\n  if (!this.initiated) {\n    return;\n  }\n\n  this.initiated = false;\n  e.preventDefault();\n  e.stopPropagation();\n\n  this._handleMoveEvents(removeEvent);\n\n  var snapOption = this.scroller.options.snap;\n\n  if (snapOption) {\n    var speed = snapOption.speed,\n        _snapOption$easing = snapOption.easing,\n        easing = _snapOption$easing === undefined ? ease.bounce : _snapOption$easing;\n\n    var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\n\n    var time = speed || Math.max(Math.max(Math.min(Math.abs(this.scroller.x - snap.x), 1000), Math.min(Math.abs(this.scroller.y - snap.y), 1000)), 300);\n\n    if (this.scroller.x !== snap.x || this.scroller.y !== snap.y) {\n      this.scroller.directionX = 0;\n      this.scroller.directionY = 0;\n      this.scroller.currentPage = snap;\n      this.scroller.scrollTo(snap.x, snap.y, time, easing);\n    }\n  }\n\n  if (this.moved) {\n    this.scroller.trigger('scrollEnd', {\n      x: this.scroller.x,\n      y: this.scroller.y\n    });\n  }\n};\n\nIndicator.prototype._pos = function (x, y) {\n  if (x < 0) {\n    x = 0;\n  } else if (x > this.maxPosX) {\n    x = this.maxPosX;\n  }\n\n  if (y < 0) {\n    y = 0;\n  } else if (y > this.maxPosY) {\n    y = this.maxPosY;\n  }\n\n  x = Math.round(x / this.sizeRatioX);\n  y = Math.round(y / this.sizeRatioY);\n  this.scroller.scrollTo(x, y);\n  this.scroller.trigger('scroll', {\n    x: this.scroller.x,\n    y: this.scroller.y\n  });\n};\n\nIndicator.prototype._shouldShow = function () {\n  if (this.direction === 'vertical' && this.scroller.hasVerticalScroll || this.direction === 'horizontal' && this.scroller.hasHorizontalScroll) {\n    this.wrapper.style.display = '';\n    return true;\n  }\n\n  this.wrapper.style.display = 'none';\n  return false;\n};\n\nIndicator.prototype._calculate = function () {\n  if (this.direction === 'vertical') {\n    var wrapperHeight = this.wrapper.clientHeight;\n    this.indicatorHeight = Math.max(Math.round(wrapperHeight * wrapperHeight / (this.scroller.scrollerHeight || wrapperHeight || 1)), INDICATOR_MIN_LEN);\n    this.indicatorStyle.height = this.indicatorHeight + 'px';\n    this.maxPosY = wrapperHeight - this.indicatorHeight;\n    this.sizeRatioY = this.maxPosY / this.scroller.maxScrollY;\n  } else {\n    var wrapperWidth = this.wrapper.clientWidth;\n    this.indicatorWidth = Math.max(Math.round(wrapperWidth * wrapperWidth / (this.scroller.scrollerWidth || wrapperWidth || 1)), INDICATOR_MIN_LEN);\n    this.indicatorStyle.width = this.indicatorWidth + 'px';\n    this.maxPosX = wrapperWidth - this.indicatorWidth;\n    this.sizeRatioX = this.maxPosX / this.scroller.maxScrollX;\n  }\n};\n\nIndicator.prototype._addDOMEvents = function () {\n  var eventOperation = addEvent;\n\n  this._handleDOMEvents(eventOperation);\n};\n\nIndicator.prototype._removeDOMEvents = function () {\n  var eventOperation = removeEvent;\n\n  this._handleDOMEvents(eventOperation);\n\n  this._handleMoveEvents(eventOperation);\n};\n\nIndicator.prototype._handleMoveEvents = function (eventOperation) {\n  if (!this.scroller.options.disableTouch) {\n    eventOperation(window, 'touchmove', this);\n  }\n\n  if (!this.scroller.options.disableMouse) {\n    eventOperation(window, 'mousemove', this);\n  }\n};\n\nIndicator.prototype._handleDOMEvents = function (eventOperation) {\n  if (!this.scroller.options.disableTouch) {\n    eventOperation(this.indicator, 'touchstart', this);\n    eventOperation(window, 'touchend', this);\n  }\n\n  if (!this.scroller.options.disableMouse) {\n    eventOperation(this.indicator, 'mousedown', this);\n    eventOperation(window, 'mouseup', this);\n  }\n};\n\nfunction pullDownMixin(BScroll) {\n  BScroll.prototype._initPullDown = function () {\n    // must watch scroll in real time\n    this.options.probeType = PROBE_REALTIME;\n  };\n\n  BScroll.prototype._checkPullDown = function () {\n    var _options$pullDownRefr = this.options.pullDownRefresh,\n        _options$pullDownRefr2 = _options$pullDownRefr.threshold,\n        threshold = _options$pullDownRefr2 === undefined ? 90 : _options$pullDownRefr2,\n        _options$pullDownRefr3 = _options$pullDownRefr.stop,\n        stop = _options$pullDownRefr3 === undefined ? 40 : _options$pullDownRefr3; // check if a real pull down action\n\n    if (this.directionY !== DIRECTION_DOWN || this.y < threshold) {\n      return false;\n    }\n\n    if (!this.pulling) {\n      this.pulling = true;\n      this.trigger('pullingDown');\n    }\n\n    this.scrollTo(this.x, stop, this.options.bounceTime, ease.bounce);\n    return this.pulling;\n  };\n\n  BScroll.prototype.finishPullDown = function () {\n    this.pulling = false;\n    this.resetPosition(this.options.bounceTime, ease.bounce);\n  };\n\n  BScroll.prototype.openPullDown = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.options.pullDownRefresh = config;\n\n    this._initPullDown();\n  };\n\n  BScroll.prototype.closePullDown = function () {\n    this.options.pullDownRefresh = false;\n  };\n\n  BScroll.prototype.autoPullDownRefresh = function () {\n    var _options$pullDownRefr4 = this.options.pullDownRefresh,\n        _options$pullDownRefr5 = _options$pullDownRefr4.threshold,\n        threshold = _options$pullDownRefr5 === undefined ? 90 : _options$pullDownRefr5,\n        _options$pullDownRefr6 = _options$pullDownRefr4.stop,\n        stop = _options$pullDownRefr6 === undefined ? 40 : _options$pullDownRefr6;\n\n    if (this.pulling) {\n      return;\n    }\n\n    this.pulling = true;\n    this.scrollTo(this.x, threshold);\n    this.trigger('pullingDown');\n    this.scrollTo(this.x, stop, this.options.bounceTime, ease.bounce);\n  };\n}\n\nfunction pullUpMixin(BScroll) {\n  BScroll.prototype._initPullUp = function () {\n    // must watch scroll in real time\n    this.options.probeType = PROBE_REALTIME;\n    this.pullupWatching = false;\n\n    this._watchPullUp();\n  };\n\n  BScroll.prototype._watchPullUp = function () {\n    if (this.pullupWatching) {\n      return;\n    }\n\n    this.pullupWatching = true;\n    this.on('scroll', this._checkToEnd);\n  };\n\n  BScroll.prototype._checkToEnd = function (pos) {\n    var _this = this;\n\n    var _options$pullUpLoad$t = this.options.pullUpLoad.threshold,\n        threshold = _options$pullUpLoad$t === undefined ? 0 : _options$pullUpLoad$t;\n\n    if (this.movingDirectionY === DIRECTION_UP && pos.y <= this.maxScrollY + threshold) {\n      // reset pullupWatching status after scroll end.\n      this.once('scrollEnd', function () {\n        _this.pullupWatching = false;\n      });\n      this.trigger('pullingUp');\n      this.off('scroll', this._checkToEnd);\n    }\n  };\n\n  BScroll.prototype.finishPullUp = function () {\n    var _this2 = this;\n\n    if (this.pullupWatching) {\n      this.once('scrollEnd', function () {\n        _this2._watchPullUp();\n      });\n    } else {\n      this._watchPullUp();\n    }\n  };\n\n  BScroll.prototype.openPullUp = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.options.pullUpLoad = config;\n\n    this._initPullUp();\n  };\n\n  BScroll.prototype.closePullUp = function () {\n    this.options.pullUpLoad = false;\n\n    if (!this.pullupWatching) {\n      return;\n    }\n\n    this.pullupWatching = false;\n    this.off('scroll', this._checkToEnd);\n  };\n}\n\nfunction mouseWheelMixin(BScroll) {\n  BScroll.prototype._initMouseWheel = function () {\n    var _this = this;\n\n    this._handleMouseWheelEvent(addEvent);\n\n    this.on('destroy', function () {\n      clearTimeout(_this.mouseWheelTimer);\n      clearTimeout(_this.mouseWheelEndTimer);\n\n      _this._handleMouseWheelEvent(removeEvent);\n    });\n    this.firstWheelOpreation = true;\n  };\n\n  BScroll.prototype._handleMouseWheelEvent = function (eventOperation) {\n    eventOperation(this.wrapper, 'wheel', this);\n    eventOperation(this.wrapper, 'mousewheel', this);\n    eventOperation(this.wrapper, 'DOMMouseScroll', this);\n  };\n\n  BScroll.prototype._onMouseWheel = function (e) {\n    var _this2 = this;\n\n    if (!this.enabled) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    if (this.firstWheelOpreation) {\n      this.trigger('scrollStart');\n    }\n\n    this.firstWheelOpreation = false;\n    var _options$mouseWheel = this.options.mouseWheel,\n        _options$mouseWheel$s = _options$mouseWheel.speed,\n        speed = _options$mouseWheel$s === undefined ? 20 : _options$mouseWheel$s,\n        _options$mouseWheel$i = _options$mouseWheel.invert,\n        invert = _options$mouseWheel$i === undefined ? false : _options$mouseWheel$i,\n        _options$mouseWheel$e = _options$mouseWheel.easeTime,\n        easeTime = _options$mouseWheel$e === undefined ? 300 : _options$mouseWheel$e;\n    clearTimeout(this.mouseWheelTimer);\n    this.mouseWheelTimer = setTimeout(function () {\n      if (!_this2.options.snap && !easeTime) {\n        _this2.trigger('scrollEnd', {\n          x: _this2.x,\n          y: _this2.y\n        });\n      }\n\n      _this2.firstWheelOpreation = true;\n    }, 400);\n    var wheelDeltaX = void 0;\n    var wheelDeltaY = void 0;\n\n    switch (true) {\n      case 'deltaX' in e:\n        if (e.deltaMode === 1) {\n          wheelDeltaX = -e.deltaX * speed;\n          wheelDeltaY = -e.deltaY * speed;\n        } else {\n          wheelDeltaX = -e.deltaX;\n          wheelDeltaY = -e.deltaY;\n        }\n\n        break;\n\n      case 'wheelDeltaX' in e:\n        wheelDeltaX = e.wheelDeltaX / 120 * speed;\n        wheelDeltaY = e.wheelDeltaY / 120 * speed;\n        break;\n\n      case 'wheelDelta' in e:\n        wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * speed;\n        break;\n\n      case 'detail' in e:\n        wheelDeltaX = wheelDeltaY = -e.detail / 3 * speed;\n        break;\n\n      default:\n        return;\n    }\n\n    var direction = invert ? -1 : 1;\n    wheelDeltaX *= direction;\n    wheelDeltaY *= direction;\n\n    if (!this.hasVerticalScroll) {\n      wheelDeltaX = wheelDeltaY;\n      wheelDeltaY = 0;\n    }\n\n    var newX = void 0;\n    var newY = void 0;\n\n    if (this.options.snap) {\n      newX = this.currentPage.pageX;\n      newY = this.currentPage.pageY;\n\n      if (wheelDeltaX > 0) {\n        newX--;\n      } else if (wheelDeltaX < 0) {\n        newX++;\n      }\n\n      if (wheelDeltaY > 0) {\n        newY--;\n      } else if (wheelDeltaY < 0) {\n        newY++;\n      }\n\n      this._goToPage(newX, newY);\n\n      return;\n    }\n\n    newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\n    newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\n    this.movingDirectionX = this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;\n    this.movingDirectionY = this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;\n\n    if (newX > this.minScrollX) {\n      newX = this.minScrollX;\n    } else if (newX < this.maxScrollX) {\n      newX = this.maxScrollX;\n    }\n\n    if (newY > this.minScrollY) {\n      newY = this.minScrollY;\n    } else if (newY < this.maxScrollY) {\n      newY = this.maxScrollY;\n    }\n\n    var needTriggerEnd = this.y === newY;\n    this.scrollTo(newX, newY, easeTime, ease.swipe);\n    this.trigger('scroll', {\n      x: this.x,\n      y: this.y\n    });\n    clearTimeout(this.mouseWheelEndTimer);\n\n    if (needTriggerEnd) {\n      this.mouseWheelEndTimer = setTimeout(function () {\n        _this2.trigger('scrollEnd', {\n          x: _this2.x,\n          y: _this2.y\n        });\n      }, easeTime);\n    }\n  };\n}\n\nfunction zoomMixin(BScroll) {\n  BScroll.prototype._initZoom = function () {\n    var _options$zoom = this.options.zoom,\n        _options$zoom$start = _options$zoom.start,\n        start = _options$zoom$start === undefined ? 1 : _options$zoom$start,\n        _options$zoom$min = _options$zoom.min,\n        min = _options$zoom$min === undefined ? 1 : _options$zoom$min,\n        _options$zoom$max = _options$zoom.max,\n        max = _options$zoom$max === undefined ? 4 : _options$zoom$max;\n    this.scale = Math.min(Math.max(start, min), max);\n    this.setScale(this.scale);\n    this.scrollerStyle[style.transformOrigin] = '0 0';\n  };\n\n  BScroll.prototype._zoomTo = function (scale, originX, originY, startScale) {\n    this.scaled = true;\n    var lastScale = scale / (startScale || this.scale);\n    this.setScale(scale);\n    this.refresh();\n    var newX = Math.round(this.startX - (originX - this.relativeX) * (lastScale - 1));\n    var newY = Math.round(this.startY - (originY - this.relativeY) * (lastScale - 1));\n\n    if (newX > this.minScrollX) {\n      newX = this.minScrollX;\n    } else if (newX < this.maxScrollX) {\n      newX = this.maxScrollX;\n    }\n\n    if (newY > this.minScrollY) {\n      newY = this.minScrollY;\n    } else if (newY < this.maxScrollY) {\n      newY = this.maxScrollY;\n    }\n\n    if (this.x !== newX || this.y !== newY) {\n      this.scrollTo(newX, newY, this.options.bounceTime);\n    }\n\n    this.scaled = false;\n  };\n\n  BScroll.prototype.zoomTo = function (scale, x, y) {\n    var _offsetToBody = offsetToBody(this.wrapper),\n        left = _offsetToBody.left,\n        top = _offsetToBody.top;\n\n    var originX = x + left - this.x;\n    var originY = y + top - this.y;\n\n    this._zoomTo(scale, originX, originY);\n  };\n\n  BScroll.prototype._zoomStart = function (e) {\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n    this.startDistance = getDistance(deltaX, deltaY);\n    this.startScale = this.scale;\n\n    var _offsetToBody2 = offsetToBody(this.wrapper),\n        left = _offsetToBody2.left,\n        top = _offsetToBody2.top;\n\n    this.originX = Math.abs(firstFinger.pageX + secondFinger.pageX) / 2 + left - this.x;\n    this.originY = Math.abs(firstFinger.pageY + secondFinger.pageY) / 2 + top - this.y;\n    this.trigger('zoomStart');\n  };\n\n  BScroll.prototype._zoom = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n    var distance = getDistance(deltaX, deltaY);\n    var scale = distance / this.startDistance * this.startScale;\n    this.scaled = true;\n    var _options$zoom2 = this.options.zoom,\n        _options$zoom2$min = _options$zoom2.min,\n        min = _options$zoom2$min === undefined ? 1 : _options$zoom2$min,\n        _options$zoom2$max = _options$zoom2.max,\n        max = _options$zoom2$max === undefined ? 4 : _options$zoom2$max;\n\n    if (scale < min) {\n      scale = 0.5 * min * Math.pow(2.0, scale / min);\n    } else if (scale > max) {\n      scale = 2.0 * max * Math.pow(0.5, max / scale);\n    }\n\n    var lastScale = scale / this.startScale;\n    var x = this.startX - (this.originX - this.relativeX) * (lastScale - 1);\n    var y = this.startY - (this.originY - this.relativeY) * (lastScale - 1);\n    this.setScale(scale);\n    this.scrollTo(x, y, 0);\n  };\n\n  BScroll.prototype._zoomEnd = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.isInTransition = false;\n    this.isAnimating = false;\n    this.initiated = 0;\n    var _options$zoom3 = this.options.zoom,\n        _options$zoom3$min = _options$zoom3.min,\n        min = _options$zoom3$min === undefined ? 1 : _options$zoom3$min,\n        _options$zoom3$max = _options$zoom3.max,\n        max = _options$zoom3$max === undefined ? 4 : _options$zoom3$max;\n    var scale = this.scale > max ? max : this.scale < min ? min : this.scale;\n\n    this._zoomTo(scale, this.originX, this.originY, this.startScale);\n\n    this.trigger('zoomEnd');\n  };\n} // import { ease } from '../util/ease'\n// Number of items to instantiate beyond current view in the scroll direction.\n\n\nvar RUNWAY_ITEMS = 30; // Number of items to instantiate beyond current view in the opposite direction.\n\nvar RUNWAY_ITEMS_OPPOSITE = 10; // The animation interval (in ms) for fading in content from tombstones.\n\nvar ANIMATION_DURATION_MS = 200; // The number of pixels of default additional length to allow scrolling to.\n\nvar DEFAULT_SCROLL_RUNWAY = 2000;\n\nfunction infiniteMixin(BScroll) {\n  BScroll.prototype._initInfinite = function () {\n    this.options.probeType = 3;\n    this.maxScrollY = -DEFAULT_SCROLL_RUNWAY;\n    this.infiniteScroller = new InfiniteScroller(this, this.options.infinity);\n  };\n}\n\nfunction isTombstoneNode(node) {\n  if (node && node.classList) {\n    return node.classList.contains('tombstone');\n  }\n}\n\nfunction InfiniteScroller(scroller, options) {\n  var _this = this;\n\n  this.options = options;\n  assert(typeof this.options.createTombstone === 'function', 'Infinite scroll need createTombstone Function to create tombstone');\n  assert(typeof this.options.fetch === 'function', 'Infinite scroll need fetch Function to fetch new data.');\n  assert(typeof this.options.render === 'function', 'Infinite scroll need render Function to render each item.');\n  this.firstAttachedItem = 0;\n  this.lastAttachedItem = 0;\n  this.anchorScrollTop = 0;\n  this.anchorItem = {\n    index: 0,\n    offset: 0\n  };\n  this.tombstoneHeight = 0;\n  this.tombstoneWidth = 0;\n  this.tombstones = [];\n  this.tombstonesAnimationHandlers = [];\n  this.items = [];\n  this.loadedItems = 0;\n  this.requestInProgress = false;\n  this.hasMore = true;\n  this.scroller = scroller;\n  this.wrapperEl = this.scroller.wrapper;\n  this.scrollerEl = this.scroller.scroller;\n  this.scroller.on('resize', function () {\n    _this.onResize();\n  });\n  this.scroller.on('destroy', function () {\n    _this.destroy();\n  }); // wait scroll core init\n\n  this._onResizeHandler = setTimeout(function () {\n    _this.onResize(); // must wait tombstoneHeight has size\n\n\n    _this.scroller.on('scroll', function () {\n      _this.onScroll();\n    });\n  });\n}\n\nInfiniteScroller.prototype.destroy = function () {\n  var _this2 = this; // In extreme scene, destroy is triggered before _onResizeHandler\n\n\n  clearTimeout(this._onResizeHandler);\n  this.tombstonesAnimationHandlers.forEach(function (handler) {\n    clearTimeout(handler);\n  });\n  this.tombstonesAnimationHandlers = null;\n  this.items.forEach(function (item) {\n    if (item.node) {\n      _this2.scrollerEl.removeChild(item.node);\n\n      item.node = null;\n    }\n  });\n  this.scroller.infiniteScroller = null;\n  this.scroller = null;\n  this.wrapperEl = null;\n  this.scrollerEl = null;\n  this.items = null;\n  this.tombstones = null;\n};\n\nInfiniteScroller.prototype.onScroll = function () {\n  var scrollTop = -this.scroller.y;\n  var delta = scrollTop - this.anchorScrollTop;\n\n  if (scrollTop === 0) {\n    this.anchorItem = {\n      index: 0,\n      offset: 0\n    };\n  } else {\n    this.anchorItem = this._calculateAnchoredItem(this.anchorItem, delta);\n  }\n\n  this.anchorScrollTop = scrollTop;\n\n  var lastScreenItem = this._calculateAnchoredItem(this.anchorItem, this.scroller.wrapperHeight);\n\n  var start = this.anchorItem.index;\n  var end = lastScreenItem.index;\n\n  if (delta < 0) {\n    start -= RUNWAY_ITEMS;\n    end += RUNWAY_ITEMS_OPPOSITE;\n  } else {\n    start -= RUNWAY_ITEMS_OPPOSITE;\n    end += RUNWAY_ITEMS;\n  }\n\n  this.fill(start, end);\n  this.maybeRequestContent();\n};\n\nInfiniteScroller.prototype.onResize = function () {\n  var tombstone = this.options.createTombstone();\n  tombstone.style.position = 'absolute';\n  this.scrollerEl.appendChild(tombstone);\n  tombstone.style.display = '';\n  this.tombstoneHeight = tombstone.offsetHeight;\n  this.tombstoneWidth = tombstone.offsetWidth;\n  this.scrollerEl.removeChild(tombstone);\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.items[i].height = this.items[i].width = 0;\n  }\n\n  this.onScroll();\n};\n\nInfiniteScroller.prototype.fill = function (start, end) {\n  this.firstAttachedItem = Math.max(0, start);\n\n  if (!this.hasMore) {\n    end = Math.min(end, this.items.length);\n  }\n\n  this.lastAttachedItem = end;\n  this.attachContent();\n};\n\nInfiniteScroller.prototype.maybeRequestContent = function () {\n  var _this3 = this;\n\n  if (this.requestInProgress || !this.hasMore) {\n    return;\n  }\n\n  var itemsNeeded = this.lastAttachedItem - this.loadedItems;\n\n  if (itemsNeeded <= 0) {\n    return;\n  }\n\n  this.requestInProgress = true;\n  this.options.fetch(itemsNeeded).then(function (items) {\n    _this3.requestInProgress = false;\n\n    if (items) {\n      _this3.addContent(items);\n    } else {\n      _this3.hasMore = false;\n\n      var tombstoneLen = _this3._removeTombstones();\n\n      var curPos = 0;\n\n      if (_this3.anchorItem.index <= _this3.items.length) {\n        curPos = _this3._fixScrollPosition();\n\n        _this3._setupAnimations({}, curPos);\n\n        _this3.scroller.resetPosition(_this3.scroller.options.bounceTime);\n      } else {\n        _this3.anchorItem.index -= tombstoneLen;\n        curPos = _this3._fixScrollPosition();\n\n        _this3._setupAnimations({}, curPos);\n\n        _this3.scroller.stop();\n\n        _this3.scroller.resetPosition();\n\n        _this3.onScroll();\n      }\n    }\n  });\n};\n\nInfiniteScroller.prototype.addContent = function (items) {\n  for (var i = 0; i < items.length; i++) {\n    if (this.items.length <= this.loadedItems) {\n      this._addItem();\n    }\n\n    this.items[this.loadedItems++].data = items[i];\n  }\n\n  this.attachContent();\n  this.maybeRequestContent();\n};\n\nInfiniteScroller.prototype.attachContent = function () {\n  var unusedNodes = this._collectUnusedNodes();\n\n  var tombstoneAnimations = this._createDOMNodes(unusedNodes);\n\n  this._cleanupUnusedNodes(unusedNodes);\n\n  this._cacheNodeSize();\n\n  var curPos = this._fixScrollPosition();\n\n  this._setupAnimations(tombstoneAnimations, curPos);\n};\n\nInfiniteScroller.prototype.resetMore = function () {\n  this.hasMore = true;\n};\n\nInfiniteScroller.prototype._removeTombstones = function () {\n  var markIndex = void 0;\n  var tombstoneLen = 0;\n  var itemLen = this.items.length;\n\n  for (var i = 0; i < itemLen; i++) {\n    var currentNode = this.items[i].node;\n    var currentData = this.items[i].data;\n\n    if ((!currentNode || isTombstoneNode(currentNode)) && !currentData) {\n      // 0 should be excluded\n      if (markIndex === void 0) {\n        markIndex = i;\n      }\n\n      if (currentNode) {\n        this.scrollerEl.removeChild(currentNode);\n      }\n    }\n  }\n\n  tombstoneLen = itemLen - markIndex;\n  this.items.splice(markIndex);\n  this.lastAttachedItem = Math.min(this.lastAttachedItem, this.items.length);\n  return tombstoneLen;\n};\n\nInfiniteScroller.prototype._collectUnusedNodes = function () {\n  var unusedNodes = [];\n\n  for (var i = 0; i < this.items.length; i++) {\n    // Skip the items which should be visible.\n    if (i === this.firstAttachedItem) {\n      i = this.lastAttachedItem - 1;\n      continue;\n    }\n\n    var currentNode = this.items[i].node;\n\n    if (currentNode) {\n      if (isTombstoneNode(currentNode)) {\n        // Cache tombstones for reuse\n        this.tombstones.push(currentNode);\n        this.tombstones[this.tombstones.length - 1].style.display = 'none';\n      } else {\n        unusedNodes.push(currentNode);\n      }\n    }\n\n    this.items[i].node = null;\n  }\n\n  return unusedNodes;\n};\n\nInfiniteScroller.prototype._createDOMNodes = function (unusedNodes) {\n  var tombstoneAnimations = {};\n\n  for (var i = this.firstAttachedItem; i < this.lastAttachedItem; i++) {\n    while (this.items.length <= i) {\n      this._addItem();\n    }\n\n    var currentNode = this.items[i].node;\n    var currentData = this.items[i].data;\n\n    if (currentNode) {\n      if (isTombstoneNode(currentNode) && currentData) {\n        currentNode.style.zIndex = 1;\n        tombstoneAnimations[i] = [currentNode, this.items[i].top - this.anchorScrollTop];\n        this.items[i].node = null;\n      } else {\n        continue;\n      }\n    }\n\n    var node = currentData ? this.options.render(currentData, unusedNodes.pop()) : this._getTombStone();\n    node.style.position = 'absolute';\n    this.items[i].top = -1;\n    this.scrollerEl.appendChild(node);\n    this.items[i].node = node;\n  }\n\n  return tombstoneAnimations;\n};\n\nInfiniteScroller.prototype._cleanupUnusedNodes = function (unusedNodes) {\n  while (unusedNodes.length) {\n    this.scrollerEl.removeChild(unusedNodes.pop());\n  }\n};\n\nInfiniteScroller.prototype._cacheNodeSize = function () {\n  for (var i = this.firstAttachedItem; i < this.lastAttachedItem; i++) {\n    var item = this.items[i]; // Only cache the height if we have the real contents, not a placeholder.\n\n    if (item.data && !item.height) {\n      var isTombstone = isTombstoneNode(item.node);\n      item.height = isTombstone ? this.tombstoneHeight : item.node.offsetHeight;\n      item.width = isTombstone ? this.tombstoneWidth : item.node.offsetWidth;\n    }\n  }\n};\n\nInfiniteScroller.prototype._fixScrollPosition = function () {\n  this.anchorScrollTop = 0;\n\n  for (var _i = 0; _i < this.anchorItem.index; _i++) {\n    this.anchorScrollTop += this.items[_i].height || this.tombstoneHeight;\n  }\n\n  this.anchorScrollTop += this.anchorItem.offset; // Position all nodes.\n\n  var curPos = this.anchorScrollTop - this.anchorItem.offset;\n  var i = this.anchorItem.index;\n\n  while (i > this.firstAttachedItem) {\n    curPos -= this.items[i - 1].height || this.tombstoneHeight;\n    i--;\n  }\n\n  return curPos;\n};\n\nInfiniteScroller.prototype._setupAnimations = function (tombstoneAnimations, curPos) {\n  var _this4 = this;\n\n  for (var i in tombstoneAnimations) {\n    var animation = tombstoneAnimations[i];\n    this.items[i].node.style[style.transform] = 'translateY(' + (this.anchorScrollTop + animation[1]) + 'px) scale(' + this.tombstoneWidth / this.items[i].width + ', ' + this.tombstoneHeight / this.items[i].height + ')'; // Call offsetTop on the nodes to be animated to force them to apply current transforms.\n\n    /* eslint-disable no-unused-expressions */\n\n    this.items[i].node.offsetTop;\n    animation[0].offsetTop;\n    this.items[i].node.style[style.transition] = cssVendor + 'transform ' + ANIMATION_DURATION_MS + 'ms';\n  }\n\n  for (var _i2 = this.firstAttachedItem; _i2 < this.lastAttachedItem; _i2++) {\n    var _animation = tombstoneAnimations[_i2];\n\n    if (_animation) {\n      var tombstoneNode = _animation[0];\n      tombstoneNode.style[style.transition] = cssVendor + 'transform ' + ANIMATION_DURATION_MS + 'ms, opacity ' + ANIMATION_DURATION_MS + 'ms';\n      tombstoneNode.style[style.transform] = 'translateY(' + curPos + 'px) scale(' + this.items[_i2].width / this.tombstoneWidth + ', ' + this.items[_i2].height / this.tombstoneHeight + ')';\n      tombstoneNode.style.opacity = 0;\n    }\n\n    if (curPos !== this.items[_i2].top) {\n      if (!_animation) {\n        this.items[_i2].node.style[style.transition] = '';\n      }\n\n      this.items[_i2].node.style[style.transform] = 'translateY(' + curPos + 'px)';\n    }\n\n    this.items[_i2].top = curPos;\n    curPos += this.items[_i2].height || this.tombstoneHeight;\n  }\n\n  this.scroller.maxScrollY = -(curPos - this.scroller.wrapperHeight + (this.hasMore ? DEFAULT_SCROLL_RUNWAY : 0));\n  var tombstoneAnimationsHandler = setTimeout(function () {\n    for (var _i3 in tombstoneAnimations) {\n      var _animation2 = tombstoneAnimations[_i3];\n      _animation2[0].style.display = 'none'; // Tombstone can be recycled now.\n\n      _this4.tombstones.push(_animation2[0]);\n    }\n  }, ANIMATION_DURATION_MS);\n  this.tombstonesAnimationHandlers.push(tombstoneAnimationsHandler);\n};\n\nInfiniteScroller.prototype._getTombStone = function () {\n  var tombstone = this.tombstones.pop();\n\n  if (tombstone) {\n    tombstone.style.display = '';\n    tombstone.style.opacity = 1;\n    tombstone.style[style.transform] = '';\n    tombstone.style[style.transition] = '';\n    return tombstone;\n  }\n\n  return this.options.createTombstone();\n};\n\nInfiniteScroller.prototype._addItem = function () {\n  this.items.push({\n    data: null,\n    node: null,\n    height: 0,\n    width: 0,\n    top: 0\n  });\n};\n\nInfiniteScroller.prototype._calculateAnchoredItem = function (initialAnchor, delta) {\n  if (delta === 0) {\n    return initialAnchor;\n  }\n\n  var i = initialAnchor.index;\n  var tombstones = 0;\n  delta += initialAnchor.offset;\n\n  if (delta < 0) {\n    while (delta < 0 && i > 0 && this.items[i - 1].height) {\n      delta += this.items[i - 1].height;\n      i--;\n    }\n\n    tombstones = Math.max(-i, Math.ceil(Math.min(delta, 0) / this.tombstoneHeight));\n  } else {\n    while (delta > 0 && i < this.items.length && this.items[i].height && this.items[i].height < delta) {\n      delta -= this.items[i].height;\n      i++;\n    }\n\n    if (i >= this.items.length || !this.items[i].height) {\n      tombstones = Math.floor(Math.max(delta, 0) / this.tombstoneHeight);\n    }\n  }\n\n  i += tombstones;\n  delta -= tombstones * this.tombstoneHeight;\n  return {\n    index: i,\n    offset: delta\n  };\n};\n\nfunction BScroll(el, options) {\n  this.wrapper = typeof el === 'string' ? document.querySelector(el) : el;\n\n  if (!this.wrapper) {\n    warn('Can not resolve the wrapper DOM.');\n  }\n\n  this.scroller = this.wrapper.children[0];\n\n  if (!this.scroller) {\n    warn('The wrapper need at least one child element to be scroller.');\n  } // cache style for better performance\n\n\n  this.scrollerStyle = this.scroller.style;\n\n  this._init(options);\n}\n\ninitMixin(BScroll);\ncoreMixin(BScroll);\neventMixin(BScroll);\nsnapMixin(BScroll);\nwheelMixin(BScroll);\nscrollbarMixin(BScroll);\npullDownMixin(BScroll);\npullUpMixin(BScroll);\nmouseWheelMixin(BScroll);\nzoomMixin(BScroll);\ninfiniteMixin(BScroll);\nBScroll.Version = '1.15.2';\nexport default BScroll;","map":{"version":3,"sources":["C:/Users/Dell/Desktop/day/node_modules/better-scroll/dist/bscroll.esm.js"],"names":["spliceOne","list","index","length","pop","slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","err","Array","isArray","Object","TypeError","toConsumableArray","arr2","from","eventMixin","BScroll","prototype","on","type","fn","context","arguments","_events","once","magic","off","apply","count","trigger","events","len","eventsCopy","concat","event","_event","slice","call","inBrowser","window","ua","navigator","userAgent","toLowerCase","isWeChatDevTools","test","isAndroid","indexOf","getNow","performance","now","timing","navigationStart","Date","extend","target","_len","rest","_key","source","key","isUndef","v","getDistance","x","y","Math","sqrt","elementStyle","document","createElement","style","vendor","transformNames","standard","webkit","Moz","O","ms","prefixStyle","charAt","toUpperCase","substr","addEvent","el","capture","addEventListener","passive","removeEvent","removeEventListener","offset","left","top","offsetLeft","offsetTop","offsetParent","offsetToBody","rect","getBoundingClientRect","pageXOffset","pageYOffset","cssVendor","transform","transition","hasPerspective","hasTouch","hasTransform","hasTransition","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","transitionEnd","TOUCH_EVENT","MOUSE_EVENT","eventType","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","getRect","SVGElement","width","height","offsetWidth","offsetHeight","preventDefaultException","exceptions","tap","e","eventName","ev","createEvent","initEvent","pageX","pageY","dispatchEvent","click","eventSource","changedTouches","posSrc","screenX","screenY","clientX","clientY","bubbles","cancelable","MouseEvent","forwardedTouchEvent","_constructed","dblclick","prepend","firstChild","before","appendChild","parentNode","insertBefore","removeChild","child","DEFAULT_OPTIONS","startX","startY","scrollX","scrollY","freeScroll","directionLockThreshold","eventPassthrough","bounce","bounceTime","momentum","momentumLimitTime","momentumLimitDistance","swipeTime","swipeBounceTime","deceleration","flickLimitTime","flickLimitDistance","resizePolling","probeType","preventDefault","tagName","HWCompositing","useTransition","useTransform","bindToWrapper","disableMouse","disableTouch","observeDOM","autoBlur","wheel","snap","scrollbar","pullDownRefresh","pullUpLoad","mouseWheel","stopPropagation","zoom","infinity","initMixin","_init","options","_handleOptions","directionX","directionY","setScale","_addDOMEvents","_initExtFeatures","_watchTransition","_initDOMObserver","_handleAutoBlur","refresh","scrollTo","enable","scale","lastScale","translateZ","eventOperation","_handleDOMEvents","_removeDOMEvents","wrapper","scroller","_initSnap","_initScrollbar","_initPullUp","_initPullDown","_initWheel","_initMouseWheel","_initZoom","_initInfinite","defineProperty","me","isInTransition","get","set","newVal","children","pointerEvents","pulling","activeElement","blur","_this","MutationObserver","timer","observer","mutations","_shouldNotRefresh","immediateRefresh","deferredRefresh","mutation","clearTimeout","setTimeout","config","attributes","childList","subtree","observe","disconnect","_checkDOMUpdate","outsideBoundaries","minScrollX","maxScrollX","minScrollY","maxScrollY","stopFromTransition","scrollerRect","oldWidth","oldHeight","check","destroyed","newWidth","newHeight","_this2","handleEvent","_start","touches","_zoomStart","_zoom","_move","scaled","_zoomEnd","_end","_resize","_transitionEnd","enabled","_onMouseWheel","isWrapperStatic","getComputedStyle","position","wrapperRect","wrapperWidth","wrapperHeight","scrollerWidth","round","scrollerHeight","relativeX","relativeY","items","_checkWheelAllDisabled","itemHeight","selectedIndex","hasHorizontalScroll","hasVerticalScroll","endTime","wrapperOffset","resetPosition","disable","ease","swipe","t","swipeBounce","current","start","time","lowerMargin","upperMargin","wrapperSize","scroll","distance","speed","abs","duration","rate","destination","_findNearestValidWheel","max","min","DEFAULT_INTERVAL","noop","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","interval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_LEFT","DIRECTION_RIGHT","PROBE_DEBOUNCE","PROBE_REALTIME","warn","msg","console","error","assert","condition","Error","coreMixin","_eventType","button","initiated","moved","distX","distY","movingDirectionX","movingDirectionY","directionLocked","_transitionTime","startTime","stop","point","absStartX","absStartY","pointX","pointY","deltaX","deltaY","absDistX","absDistY","timestamp","newX","newY","bottom","right","_translate","scrollLeft","documentElement","body","scrollTop","pX","pY","clientWidth","clientHeight","_checkPullDown","_checkClick","flick","momentumX","momentumY","adjustTime","easing","_nearestSnap","currentPage","snapSpeed","preventClick","className","wheelWrapperClass","_offset","_dblclick","dblclickTrigged","lastClickTime","_dblclick$delay","delay","resizeTimeout","_startProbe","probeTimer","probe","pos","getComputedPosition","scrollerStyle","indicators","transitionTime","_transitionTimingFunction","_i2","needReset","_options$wheel$rotate","rotate","deg","_i3","updatePosition","_animate","destX","destY","easingFn","startScale","destScale","destTime","step","isAnimating","newScale","animateTimer","scrollBy","isSilent","_reflow","scrollToElement","offsetX","offsetY","nodeType","querySelector","classList","contains","wheelItemClass","easeing","roundX","roundY","matrix","split","replace","destroy","snapMixin","loop","cloneNode","querySelectorAll","pages","stepX","stepY","cx","cy","l","m","n","_checkSnapLoop","initPageX","_loopX","initPageY","_loopY","_goToPage","snapThreshold","threshold","snapThresholdX","snapThresholdY","listenFlick","_children","posX","posY","goToPage","prev","getCurrentPage","wheelMixin","wheelTo","getSelectedIndex","wheelDisabledItemClass","currentIndex","cacheIndex","wheelItemsAllDisabled","INDICATOR_MIN_LEN","scrollbarMixin","_options$scrollbar","_options$scrollbar$fa","fade","_options$scrollbar$in","interactive","indicator","createScrollbar","direction","_insertScrollBar","Indicator","_removeScrollBars","cssText","wrapperStyle","indicatorStyle","visible","opacity","sizeRatioX","sizeRatioY","maxPosX","maxPosY","_shouldShow","_calculate","hold","fadeTimeout","indicatorHeight","_height","indicatorWidth","_width","lastPointX","lastPointY","_handleMoveEvents","_pos","snapOption","_snapOption$easing","display","pullDownMixin","_options$pullDownRefr","_options$pullDownRefr2","_options$pullDownRefr3","finishPullDown","openPullDown","closePullDown","autoPullDownRefresh","_options$pullDownRefr4","_options$pullDownRefr5","_options$pullDownRefr6","pullUpMixin","pullupWatching","_watchPullUp","_checkToEnd","_options$pullUpLoad$t","finishPullUp","openPullUp","closePullUp","mouseWheelMixin","_handleMouseWheelEvent","mouseWheelTimer","mouseWheelEndTimer","firstWheelOpreation","_options$mouseWheel","_options$mouseWheel$s","_options$mouseWheel$i","invert","_options$mouseWheel$e","easeTime","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","detail","needTriggerEnd","zoomMixin","_options$zoom","_options$zoom$start","_options$zoom$min","_options$zoom$max","_zoomTo","originX","originY","zoomTo","_offsetToBody","firstFinger","secondFinger","startDistance","_offsetToBody2","_options$zoom2","_options$zoom2$min","_options$zoom2$max","pow","_options$zoom3","_options$zoom3$min","_options$zoom3$max","RUNWAY_ITEMS","RUNWAY_ITEMS_OPPOSITE","ANIMATION_DURATION_MS","DEFAULT_SCROLL_RUNWAY","infiniteMixin","infiniteScroller","InfiniteScroller","isTombstoneNode","node","createTombstone","fetch","render","firstAttachedItem","lastAttachedItem","anchorScrollTop","anchorItem","tombstoneHeight","tombstoneWidth","tombstones","tombstonesAnimationHandlers","loadedItems","requestInProgress","hasMore","wrapperEl","scrollerEl","onResize","_onResizeHandler","onScroll","forEach","handler","item","delta","_calculateAnchoredItem","lastScreenItem","end","fill","maybeRequestContent","tombstone","attachContent","_this3","itemsNeeded","then","addContent","tombstoneLen","_removeTombstones","curPos","_fixScrollPosition","_setupAnimations","_addItem","data","unusedNodes","_collectUnusedNodes","tombstoneAnimations","_createDOMNodes","_cleanupUnusedNodes","_cacheNodeSize","resetMore","markIndex","itemLen","currentNode","currentData","splice","zIndex","_getTombStone","isTombstone","_this4","animation","_animation","tombstoneNode","tombstoneAnimationsHandler","_animation2","initialAnchor","ceil","floor","Version"],"mappings":"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","sourcesContent":["/*!\n * better-normal-scroll v1.15.2\n * (c) 2016-2019 ustbhuangyi\n * Released under the MIT License.\n */\n// As of V8 6.6, depending on the size of the array, this is anywhere\n// between 1.5-10x faster than the two-arg version of Array#splice()\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) {\n    list[index] = list[index + 1];\n  }\n\n  list.pop();\n}\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nfunction eventMixin(BScroll) {\n  BScroll.prototype.on = function (type, fn) {\n    var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n\n    if (!this._events[type]) {\n      this._events[type] = [];\n    }\n\n    this._events[type].push([fn, context]);\n  };\n\n  BScroll.prototype.once = function (type, fn) {\n    var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n\n    function magic() {\n      this.off(type, magic);\n\n      fn.apply(context, arguments);\n    }\n    // To expose the corresponding function method in order to execute the off method\n    magic.fn = fn;\n\n    this.on(type, magic);\n  };\n\n  BScroll.prototype.off = function (type, fn) {\n    var _events = this._events[type];\n    if (!_events) {\n      return;\n    }\n\n    var count = _events.length;\n    while (count--) {\n      if (_events[count][0] === fn || _events[count][0] && _events[count][0].fn === fn) {\n        spliceOne(_events, count);\n      }\n    }\n  };\n\n  BScroll.prototype.trigger = function (type) {\n    var events = this._events[type];\n    if (!events) {\n      return;\n    }\n\n    var len = events.length;\n    var eventsCopy = [].concat(toConsumableArray(events));\n    for (var i = 0; i < len; i++) {\n      var event = eventsCopy[i];\n\n      var _event = slicedToArray(event, 2),\n          fn = _event[0],\n          context = _event[1];\n\n      if (fn) {\n        fn.apply(context, [].slice.call(arguments, 1));\n      }\n    }\n  };\n}\n\n// ssr support\nvar inBrowser = typeof window !== 'undefined';\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\nvar isWeChatDevTools = ua && /wechatdevtools/.test(ua);\nvar isAndroid = ua && ua.indexOf('android') > 0;\n\nfunction getNow() {\n  return window.performance && window.performance.now ? window.performance.now() + window.performance.timing.navigationStart : +new Date();\n}\n\nfunction extend(target) {\n  for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    rest[_key - 1] = arguments[_key];\n  }\n\n  for (var i = 0; i < rest.length; i++) {\n    var source = rest[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nfunction isUndef(v) {\n  return v === undefined || v === null;\n}\n\nfunction getDistance(x, y) {\n  return Math.sqrt(x * x + y * y);\n}\n\nvar elementStyle = inBrowser && document.createElement('div').style;\n\nvar vendor = function () {\n  if (!inBrowser) {\n    return false;\n  }\n  // first pick up standard to fix #743\n  var transformNames = {\n    standard: 'transform',\n    webkit: 'webkitTransform',\n    Moz: 'MozTransform',\n    O: 'OTransform',\n    ms: 'msTransform'\n  };\n\n  for (var key in transformNames) {\n    if (elementStyle[transformNames[key]] !== undefined) {\n      return key;\n    }\n  }\n\n  return false;\n}();\n\nfunction prefixStyle(style) {\n  if (vendor === false) {\n    return false;\n  }\n\n  if (vendor === 'standard') {\n    if (style === 'transitionEnd') {\n      return 'transitionend';\n    }\n    return style;\n  }\n\n  return vendor + style.charAt(0).toUpperCase() + style.substr(1);\n}\n\nfunction addEvent(el, type, fn, capture) {\n  el.addEventListener(type, fn, { passive: false, capture: !!capture });\n}\n\nfunction removeEvent(el, type, fn, capture) {\n  el.removeEventListener(type, fn, { passive: false, capture: !!capture });\n}\n\nfunction offset(el) {\n  var left = 0;\n  var top = 0;\n\n  while (el) {\n    left -= el.offsetLeft;\n    top -= el.offsetTop;\n    el = el.offsetParent;\n  }\n\n  return {\n    left: left,\n    top: top\n  };\n}\n\nfunction offsetToBody(el) {\n  var rect = el.getBoundingClientRect();\n\n  return {\n    left: -(rect.left + window.pageXOffset),\n    top: -(rect.top + window.pageYOffset)\n  };\n}\n\nvar cssVendor = vendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\n\nvar transform = prefixStyle('transform');\nvar transition = prefixStyle('transition');\n\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle;\n// fix issue #361\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\nvar hasTransform = transform !== false;\nvar hasTransition = inBrowser && transition in elementStyle;\n\nvar style = {\n  transform: transform,\n  transition: transition,\n  transitionTimingFunction: prefixStyle('transitionTimingFunction'),\n  transitionDuration: prefixStyle('transitionDuration'),\n  transitionDelay: prefixStyle('transitionDelay'),\n  transformOrigin: prefixStyle('transformOrigin'),\n  transitionEnd: prefixStyle('transitionEnd')\n};\n\nvar TOUCH_EVENT = 1;\nvar MOUSE_EVENT = 2;\n\nvar eventType = {\n  touchstart: TOUCH_EVENT,\n  touchmove: TOUCH_EVENT,\n  touchend: TOUCH_EVENT,\n\n  mousedown: MOUSE_EVENT,\n  mousemove: MOUSE_EVENT,\n  mouseup: MOUSE_EVENT\n};\n\nfunction getRect(el) {\n  if (el instanceof window.SVGElement) {\n    var rect = el.getBoundingClientRect();\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    };\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n}\n\nfunction preventDefaultException(el, exceptions) {\n  for (var i in exceptions) {\n    if (exceptions[i].test(el[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction tap(e, eventName) {\n  var ev = document.createEvent('Event');\n  ev.initEvent(eventName, true, true);\n  ev.pageX = e.pageX;\n  ev.pageY = e.pageY;\n  e.target.dispatchEvent(ev);\n}\n\nfunction click(e) {\n  var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'click';\n\n  var eventSource = void 0;\n  if (e.type === 'mouseup' || e.type === 'mousecancel') {\n    eventSource = e;\n  } else if (e.type === 'touchend' || e.type === 'touchcancel') {\n    eventSource = e.changedTouches[0];\n  }\n  var posSrc = {};\n  if (eventSource) {\n    posSrc.screenX = eventSource.screenX || 0;\n    posSrc.screenY = eventSource.screenY || 0;\n    posSrc.clientX = eventSource.clientX || 0;\n    posSrc.clientY = eventSource.clientY || 0;\n  }\n  var ev = void 0;\n  var bubbles = true;\n  var cancelable = true;\n  if (typeof MouseEvent !== 'undefined') {\n    try {\n      ev = new MouseEvent(event, extend({\n        bubbles: bubbles,\n        cancelable: cancelable\n      }, posSrc));\n    } catch (e) {\n      createEvent();\n    }\n  } else {\n    createEvent();\n  }\n\n  function createEvent() {\n    ev = document.createEvent('Event');\n    ev.initEvent(event, bubbles, cancelable);\n    extend(ev, posSrc);\n  }\n\n  // forwardedTouchEvent set to true in case of the conflict with fastclick\n  ev.forwardedTouchEvent = true;\n  ev._constructed = true;\n  e.target.dispatchEvent(ev);\n}\n\nfunction dblclick(e) {\n  click(e, 'dblclick');\n}\n\nfunction prepend(el, target) {\n  if (target.firstChild) {\n    before(el, target.firstChild);\n  } else {\n    target.appendChild(el);\n  }\n}\n\nfunction before(el, target) {\n  target.parentNode.insertBefore(el, target);\n}\n\nfunction removeChild(el, child) {\n  el.removeChild(child);\n}\n\nvar DEFAULT_OPTIONS = {\n  startX: 0,\n  startY: 0,\n  scrollX: false,\n  scrollY: true,\n  freeScroll: false,\n  directionLockThreshold: 5,\n  eventPassthrough: '',\n  click: false,\n  tap: false,\n  /**\n   * support any side\n   * bounce: {\n   *   top: true,\n   *   bottom: true,\n   *   left: true,\n   *   right: true\n   * }\n   */\n  bounce: true,\n  bounceTime: 800,\n  momentum: true,\n  momentumLimitTime: 300,\n  momentumLimitDistance: 15,\n  swipeTime: 2500,\n  swipeBounceTime: 500,\n  deceleration: 0.0015,\n  flickLimitTime: 200,\n  flickLimitDistance: 100,\n  resizePolling: 60,\n  probeType: 0,\n  preventDefault: true,\n  preventDefaultException: {\n    tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/\n  },\n  HWCompositing: true,\n  useTransition: true,\n  useTransform: true,\n  bindToWrapper: false,\n  disableMouse: hasTouch,\n  disableTouch: !hasTouch,\n  observeDOM: true,\n  autoBlur: true,\n  /**\n   * for picker\n   * wheel: {\n   *   selectedIndex: 0,\n   *   rotate: 25,\n   *   adjustTime: 400\n   *   wheelWrapperClass: 'wheel-scroll',\n   *   wheelItemClass: 'wheel-item'\n   * }\n   */\n  wheel: false,\n  /**\n   * for slide\n   * snap: {\n   *   loop: false,\n   *   el: domEl,\n   *   threshold: 0.1,\n   *   stepX: 100,\n   *   stepY: 100,\n   *   speed: 400,\n   *   easing: {\n   *     style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n   *     fn: function (t) {\n   *       return t * (2 - t)\n   *     }\n   *   }\n   *   listenFlick: true\n   * }\n   */\n  snap: false,\n  /**\n   * for scrollbar\n   * scrollbar: {\n   *   fade: true,\n   *   interactive: false\n   * }\n   */\n  scrollbar: false,\n  /**\n   * for pull down and refresh\n   * pullDownRefresh: {\n   *   threshold: 50,\n   *   stop: 20\n   * }\n   */\n  pullDownRefresh: false,\n  /**\n   * for pull up and load\n   * pullUpLoad: {\n   *   threshold: 50\n   * }\n   */\n  pullUpLoad: false,\n  /**\n   * for mouse wheel\n   * mouseWheel: {\n   *   speed: 20,\n   *   invert: false,\n   *   easeTime: 300\n   * }\n   */\n  mouseWheel: false,\n  stopPropagation: false,\n  /**\n   * for zoom\n   * zoom: {\n   *   start: 1,\n   *   min: 1,\n   *   max: 4\n   * }\n   */\n  zoom: false,\n  /**\n   * for infinity\n   * infinity: {\n   *   render(item, div) {\n   *   },\n   *   createTombstone() {\n   *   },\n   *   fetch(count) {\n   *   }\n   * }\n   */\n  infinity: false,\n  /**\n   * for double click\n   * dblclick: {\n   *   delay: 300\n   * }\n   */\n  dblclick: false\n};\n\nfunction initMixin(BScroll) {\n  BScroll.prototype._init = function (options) {\n    this._handleOptions(options);\n\n    // init private custom events\n    this._events = {};\n\n    this.x = 0;\n    this.y = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n\n    this.setScale(1);\n\n    this._addDOMEvents();\n\n    this._initExtFeatures();\n\n    this._watchTransition();\n\n    if (this.options.observeDOM) {\n      this._initDOMObserver();\n    }\n\n    if (this.options.autoBlur) {\n      this._handleAutoBlur();\n    }\n\n    this.refresh();\n\n    if (!this.options.snap) {\n      this.scrollTo(this.options.startX, this.options.startY);\n    }\n\n    this.enable();\n  };\n\n  BScroll.prototype.setScale = function (scale) {\n    this.lastScale = isUndef(this.scale) ? scale : this.scale;\n    this.scale = scale;\n  };\n\n  BScroll.prototype._handleOptions = function (options) {\n    this.options = extend({}, DEFAULT_OPTIONS, options);\n\n    this.translateZ = this.options.HWCompositing && hasPerspective ? ' translateZ(0)' : '';\n\n    this.options.useTransition = this.options.useTransition && hasTransition;\n    this.options.useTransform = this.options.useTransform && hasTransform;\n\n    this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\n\n    // If you want eventPassthrough I have to lock one of the axes\n    this.options.scrollX = this.options.eventPassthrough === 'horizontal' ? false : this.options.scrollX;\n    this.options.scrollY = this.options.eventPassthrough === 'vertical' ? false : this.options.scrollY;\n\n    // With eventPassthrough we also need lockDirection mechanism\n    this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\n    this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\n\n    if (this.options.tap === true) {\n      this.options.tap = 'tap';\n    }\n  };\n\n  BScroll.prototype._addDOMEvents = function () {\n    var eventOperation = addEvent;\n    this._handleDOMEvents(eventOperation);\n  };\n\n  BScroll.prototype._removeDOMEvents = function () {\n    var eventOperation = removeEvent;\n    this._handleDOMEvents(eventOperation);\n  };\n\n  BScroll.prototype._handleDOMEvents = function (eventOperation) {\n    var target = this.options.bindToWrapper ? this.wrapper : window;\n    eventOperation(window, 'orientationchange', this);\n    eventOperation(window, 'resize', this);\n\n    if (this.options.click) {\n      eventOperation(this.wrapper, 'click', this, true);\n    }\n\n    if (!this.options.disableMouse) {\n      eventOperation(this.wrapper, 'mousedown', this);\n      eventOperation(target, 'mousemove', this);\n      eventOperation(target, 'mousecancel', this);\n      eventOperation(target, 'mouseup', this);\n    }\n\n    if (hasTouch && !this.options.disableTouch) {\n      eventOperation(this.wrapper, 'touchstart', this);\n      eventOperation(target, 'touchmove', this);\n      eventOperation(target, 'touchcancel', this);\n      eventOperation(target, 'touchend', this);\n    }\n\n    eventOperation(this.scroller, style.transitionEnd, this);\n  };\n\n  BScroll.prototype._initExtFeatures = function () {\n    if (this.options.snap) {\n      this._initSnap();\n    }\n    if (this.options.scrollbar) {\n      this._initScrollbar();\n    }\n    if (this.options.pullUpLoad) {\n      this._initPullUp();\n    }\n    if (this.options.pullDownRefresh) {\n      this._initPullDown();\n    }\n    if (this.options.wheel) {\n      this._initWheel();\n    }\n    if (this.options.mouseWheel) {\n      this._initMouseWheel();\n    }\n    if (this.options.zoom) {\n      this._initZoom();\n    }\n    if (this.options.infinity) {\n      this._initInfinite();\n    }\n  };\n\n  BScroll.prototype._watchTransition = function () {\n    if (typeof Object.defineProperty !== 'function') {\n      return;\n    }\n    var me = this;\n    var isInTransition = false;\n    var key = this.options.useTransition ? 'isInTransition' : 'isAnimating';\n    Object.defineProperty(this, key, {\n      get: function get() {\n        return isInTransition;\n      },\n      set: function set(newVal) {\n        isInTransition = newVal;\n        // fix issue #359\n        var el = me.scroller.children.length ? me.scroller.children : [me.scroller];\n        var pointerEvents = isInTransition && !me.pulling ? 'none' : 'auto';\n        for (var i = 0; i < el.length; i++) {\n          el[i].style.pointerEvents = pointerEvents;\n        }\n      }\n    });\n  };\n\n  BScroll.prototype._handleAutoBlur = function () {\n    this.on('scrollStart', function () {\n      var activeElement = document.activeElement;\n      if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {\n        activeElement.blur();\n      }\n    });\n  };\n\n  BScroll.prototype._initDOMObserver = function () {\n    var _this = this;\n\n    if (typeof MutationObserver !== 'undefined') {\n      var timer = void 0;\n      var observer = new MutationObserver(function (mutations) {\n        // don't do any refresh during the transition, or outside of the boundaries\n        if (_this._shouldNotRefresh()) {\n          return;\n        }\n        var immediateRefresh = false;\n        var deferredRefresh = false;\n        for (var i = 0; i < mutations.length; i++) {\n          var mutation = mutations[i];\n          if (mutation.type !== 'attributes') {\n            immediateRefresh = true;\n            break;\n          } else {\n            if (mutation.target !== _this.scroller) {\n              deferredRefresh = true;\n              break;\n            }\n          }\n        }\n        if (immediateRefresh) {\n          _this.refresh();\n        } else if (deferredRefresh) {\n          // attributes changes too often\n          clearTimeout(timer);\n          timer = setTimeout(function () {\n            if (!_this._shouldNotRefresh()) {\n              _this.refresh();\n            }\n          }, 60);\n        }\n      });\n      var config = {\n        attributes: true,\n        childList: true,\n        subtree: true\n      };\n      observer.observe(this.scroller, config);\n\n      this.on('destroy', function () {\n        observer.disconnect();\n      });\n    } else {\n      this._checkDOMUpdate();\n    }\n  };\n\n  BScroll.prototype._shouldNotRefresh = function () {\n    var outsideBoundaries = this.x > this.minScrollX || this.x < this.maxScrollX || this.y > this.minScrollY || this.y < this.maxScrollY;\n\n    return this.isInTransition || this.stopFromTransition || outsideBoundaries;\n  };\n\n  BScroll.prototype._checkDOMUpdate = function () {\n    var scrollerRect = getRect(this.scroller);\n    var oldWidth = scrollerRect.width;\n    var oldHeight = scrollerRect.height;\n\n    function check() {\n      if (this.destroyed) {\n        return;\n      }\n      scrollerRect = getRect(this.scroller);\n      var newWidth = scrollerRect.width;\n      var newHeight = scrollerRect.height;\n\n      if (oldWidth !== newWidth || oldHeight !== newHeight) {\n        this.refresh();\n      }\n      oldWidth = newWidth;\n      oldHeight = newHeight;\n\n      next.call(this);\n    }\n\n    function next() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        check.call(_this2);\n      }, 1000);\n    }\n\n    next.call(this);\n  };\n\n  BScroll.prototype.handleEvent = function (e) {\n    switch (e.type) {\n      case 'touchstart':\n      case 'mousedown':\n        this._start(e);\n        if (this.options.zoom && e.touches && e.touches.length > 1) {\n          this._zoomStart(e);\n        }\n        break;\n      case 'touchmove':\n      case 'mousemove':\n        if (this.options.zoom && e.touches && e.touches.length > 1) {\n          this._zoom(e);\n        } else {\n          this._move(e);\n        }\n        break;\n      case 'touchend':\n      case 'mouseup':\n      case 'touchcancel':\n      case 'mousecancel':\n        if (this.scaled) {\n          this._zoomEnd(e);\n        } else {\n          this._end(e);\n        }\n        break;\n      case 'orientationchange':\n      case 'resize':\n        this._resize();\n        break;\n      case 'transitionend':\n      case 'webkitTransitionEnd':\n      case 'oTransitionEnd':\n      case 'MSTransitionEnd':\n        this._transitionEnd(e);\n        break;\n      case 'click':\n        if (this.enabled && !e._constructed) {\n          if (!preventDefaultException(e.target, this.options.preventDefaultException)) {\n            e.preventDefault();\n            e.stopPropagation();\n          }\n        }\n        break;\n      case 'wheel':\n      case 'DOMMouseScroll':\n      case 'mousewheel':\n        this._onMouseWheel(e);\n        break;\n    }\n  };\n\n  BScroll.prototype.refresh = function () {\n    var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\n    var wrapperRect = getRect(this.wrapper);\n    this.wrapperWidth = wrapperRect.width;\n    this.wrapperHeight = wrapperRect.height;\n\n    var scrollerRect = getRect(this.scroller);\n    this.scrollerWidth = Math.round(scrollerRect.width * this.scale);\n    this.scrollerHeight = Math.round(scrollerRect.height * this.scale);\n\n    this.relativeX = scrollerRect.left;\n    this.relativeY = scrollerRect.top;\n\n    if (isWrapperStatic) {\n      this.relativeX -= wrapperRect.left;\n      this.relativeY -= wrapperRect.top;\n    }\n\n    this.minScrollX = 0;\n    this.minScrollY = 0;\n\n    var wheel = this.options.wheel;\n    if (wheel) {\n      this.items = this.scroller.children;\n      // check whether there are all disable items or not when refresh\n      this._checkWheelAllDisabled();\n      this.options.itemHeight = this.itemHeight = this.items.length ? this.scrollerHeight / this.items.length : 0;\n      if (this.selectedIndex === undefined) {\n        this.selectedIndex = wheel.selectedIndex || 0;\n      }\n      this.options.startY = -this.selectedIndex * this.itemHeight;\n\n      this.maxScrollX = 0;\n      this.maxScrollY = -this.itemHeight * (this.items.length - 1);\n    } else {\n      this.maxScrollX = this.wrapperWidth - this.scrollerWidth;\n      if (!this.options.infinity) {\n        this.maxScrollY = this.wrapperHeight - this.scrollerHeight;\n      }\n      if (this.maxScrollX < 0) {\n        this.maxScrollX -= this.relativeX;\n        this.minScrollX = -this.relativeX;\n      } else if (this.scale > 1) {\n        this.maxScrollX = this.maxScrollX / 2 - this.relativeX;\n        this.minScrollX = this.maxScrollX;\n      }\n      if (this.maxScrollY < 0) {\n        this.maxScrollY -= this.relativeY;\n        this.minScrollY = -this.relativeY;\n      } else if (this.scale > 1) {\n        this.maxScrollY = this.maxScrollY / 2 - this.relativeY;\n        this.minScrollY = this.maxScrollY;\n      }\n    }\n\n    this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < this.minScrollX;\n    this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < this.minScrollY;\n\n    if (!this.hasHorizontalScroll) {\n      this.maxScrollX = this.minScrollX;\n      this.scrollerWidth = this.wrapperWidth;\n    }\n\n    if (!this.hasVerticalScroll) {\n      this.maxScrollY = this.minScrollY;\n      this.scrollerHeight = this.wrapperHeight;\n    }\n\n    this.endTime = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.wrapperOffset = offset(this.wrapper);\n\n    this.trigger('refresh');\n\n    !this.scaled && this.resetPosition();\n  };\n\n  BScroll.prototype.enable = function () {\n    this.enabled = true;\n  };\n\n  BScroll.prototype.disable = function () {\n    this.enabled = false;\n  };\n}\n\nvar ease = {\n  // easeOutQuint\n  swipe: {\n    style: 'cubic-bezier(0.23, 1, 0.32, 1)',\n    fn: function fn(t) {\n      return 1 + --t * t * t * t * t;\n    }\n  },\n  // easeOutQuard\n  swipeBounce: {\n    style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    fn: function fn(t) {\n      return t * (2 - t);\n    }\n  },\n  // easeOutQuart\n  bounce: {\n    style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n    fn: function fn(t) {\n      return 1 - --t * t * t * t;\n    }\n  }\n};\n\nfunction momentum(current, start, time, lowerMargin, upperMargin, wrapperSize, options, scroll) {\n  var distance = current - start;\n  var speed = Math.abs(distance) / time;\n\n  var deceleration = options.deceleration,\n      itemHeight = options.itemHeight,\n      swipeBounceTime = options.swipeBounceTime,\n      wheel = options.wheel,\n      swipeTime = options.swipeTime;\n\n  var duration = swipeTime;\n  var rate = wheel ? 4 : 15;\n\n  var destination = current + speed / deceleration * (distance < 0 ? -1 : 1);\n\n  if (wheel && itemHeight) {\n    destination = scroll._findNearestValidWheel(destination).y;\n  }\n\n  if (destination < lowerMargin) {\n    destination = wrapperSize ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - wrapperSize / rate * speed) : lowerMargin;\n    duration = swipeBounceTime;\n  } else if (destination > upperMargin) {\n    destination = wrapperSize ? Math.min(upperMargin + wrapperSize / 4, upperMargin + wrapperSize / rate * speed) : upperMargin;\n    duration = swipeBounceTime;\n  }\n\n  return {\n    destination: Math.round(destination),\n    duration: duration\n  };\n}\n\nvar DEFAULT_INTERVAL = 100 / 60;\n\nfunction noop() {}\n\nvar requestAnimationFrame = function () {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop;\n  }\n  return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame ||\n  // if all else fails, use setTimeout\n  function (callback) {\n    return window.setTimeout(callback, (callback.interval || DEFAULT_INTERVAL) / 2); // make interval as precise as possible.\n  };\n}();\n\nvar cancelAnimationFrame = function () {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop;\n  }\n  return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || function (id) {\n    window.clearTimeout(id);\n  };\n}();\n\nvar DIRECTION_UP = 1;\nvar DIRECTION_DOWN = -1;\nvar DIRECTION_LEFT = 1;\nvar DIRECTION_RIGHT = -1;\n\nvar PROBE_DEBOUNCE = 1;\n\nvar PROBE_REALTIME = 3;\n\nfunction warn(msg) {\n  console.error('[BScroll warn]: ' + msg);\n}\n\nfunction assert(condition, msg) {\n  if (!condition) {\n    throw new Error('[BScroll] ' + msg);\n  }\n}\n\nfunction coreMixin(BScroll) {\n  BScroll.prototype._start = function (e) {\n    var _eventType = eventType[e.type];\n    if (_eventType !== TOUCH_EVENT) {\n      if (e.button !== 0) {\n        return;\n      }\n    }\n    if (!this.enabled || this.destroyed || this.initiated && this.initiated !== _eventType) {\n      return;\n    }\n    this.initiated = _eventType;\n\n    if (this.options.preventDefault && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.moved = false;\n    this.distX = 0;\n    this.distY = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.movingDirectionX = 0;\n    this.movingDirectionY = 0;\n    this.directionLocked = 0;\n\n    this._transitionTime();\n    this.startTime = getNow();\n\n    if (this.options.wheel) {\n      this.target = e.target;\n    }\n\n    this.stop();\n\n    var point = e.touches ? e.touches[0] : e;\n\n    this.startX = this.x;\n    this.startY = this.y;\n    this.absStartX = this.x;\n    this.absStartY = this.y;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n\n    this.trigger('beforeScrollStart');\n  };\n\n  BScroll.prototype._move = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    var point = e.touches ? e.touches[0] : e;\n    var deltaX = point.pageX - this.pointX;\n    var deltaY = point.pageY - this.pointY;\n\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n\n    this.distX += deltaX;\n    this.distY += deltaY;\n\n    var absDistX = Math.abs(this.distX);\n    var absDistY = Math.abs(this.distY);\n\n    var timestamp = getNow();\n\n    // We need to move at least momentumLimitDistance pixels for the scrolling to initiate\n    if (timestamp - this.endTime > this.options.momentumLimitTime && !this.moved && absDistY < this.options.momentumLimitDistance && absDistX < this.options.momentumLimitDistance) {\n      return;\n    }\n\n    // If you are scrolling in one direction lock the other\n    if (!this.directionLocked && !this.options.freeScroll) {\n      if (absDistX > absDistY + this.options.directionLockThreshold) {\n        this.directionLocked = 'h'; // lock horizontally\n      } else if (absDistY >= absDistX + this.options.directionLockThreshold) {\n        this.directionLocked = 'v'; // lock vertically\n      } else {\n        this.directionLocked = 'n'; // no lock\n      }\n    }\n\n    if (this.directionLocked === 'h') {\n      if (this.options.eventPassthrough === 'vertical') {\n        e.preventDefault();\n      } else if (this.options.eventPassthrough === 'horizontal') {\n        this.initiated = false;\n        return;\n      }\n      deltaY = 0;\n    } else if (this.directionLocked === 'v') {\n      if (this.options.eventPassthrough === 'horizontal') {\n        e.preventDefault();\n      } else if (this.options.eventPassthrough === 'vertical') {\n        this.initiated = false;\n        return;\n      }\n      deltaX = 0;\n    }\n\n    deltaX = this.hasHorizontalScroll ? deltaX : 0;\n    deltaY = this.hasVerticalScroll ? deltaY : 0;\n    this.movingDirectionX = deltaX > 0 ? DIRECTION_RIGHT : deltaX < 0 ? DIRECTION_LEFT : 0;\n    this.movingDirectionY = deltaY > 0 ? DIRECTION_DOWN : deltaY < 0 ? DIRECTION_UP : 0;\n\n    var newX = this.x + deltaX;\n    var newY = this.y + deltaY;\n\n    var top = false;\n    var bottom = false;\n    var left = false;\n    var right = false;\n    // Slow down or stop if outside of the boundaries\n    var bounce = this.options.bounce;\n    if (bounce !== false) {\n      top = bounce.top === undefined ? true : bounce.top;\n      bottom = bounce.bottom === undefined ? true : bounce.bottom;\n      left = bounce.left === undefined ? true : bounce.left;\n      right = bounce.right === undefined ? true : bounce.right;\n    }\n    if (newX > this.minScrollX || newX < this.maxScrollX) {\n      if (newX > this.minScrollX && left || newX < this.maxScrollX && right) {\n        newX = this.x + deltaX / 3;\n      } else {\n        newX = newX > this.minScrollX ? this.minScrollX : this.maxScrollX;\n      }\n    }\n    if (newY > this.minScrollY || newY < this.maxScrollY) {\n      if (newY > this.minScrollY && top || newY < this.maxScrollY && bottom) {\n        newY = this.y + deltaY / 3;\n      } else {\n        newY = newY > this.minScrollY ? this.minScrollY : this.maxScrollY;\n      }\n    }\n\n    if (!this.moved) {\n      this.moved = true;\n      this.trigger('scrollStart');\n    }\n\n    this._translate(newX, newY);\n\n    if (timestamp - this.startTime > this.options.momentumLimitTime) {\n      this.startTime = timestamp;\n      this.startX = this.x;\n      this.startY = this.y;\n\n      if (this.options.probeType === PROBE_DEBOUNCE) {\n        this.trigger('scroll', {\n          x: this.x,\n          y: this.y\n        });\n      }\n    }\n\n    if (this.options.probeType > PROBE_DEBOUNCE) {\n      this.trigger('scroll', {\n        x: this.x,\n        y: this.y\n      });\n    }\n\n    var scrollLeft = document.documentElement.scrollLeft || window.pageXOffset || document.body.scrollLeft;\n    var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n\n    var pX = this.pointX - scrollLeft;\n    var pY = this.pointY - scrollTop;\n\n    if (pX > document.documentElement.clientWidth - this.options.momentumLimitDistance || pX < this.options.momentumLimitDistance || pY < this.options.momentumLimitDistance || pY > document.documentElement.clientHeight - this.options.momentumLimitDistance) {\n      this._end(e);\n    }\n  };\n\n  BScroll.prototype._end = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n    this.initiated = false;\n\n    if (this.options.preventDefault && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.trigger('touchEnd', {\n      x: this.x,\n      y: this.y\n    });\n\n    this.isInTransition = false;\n\n    // ensures that the last position is rounded\n    var newX = Math.round(this.x);\n    var newY = Math.round(this.y);\n\n    var deltaX = newX - this.absStartX;\n    var deltaY = newY - this.absStartY;\n    this.directionX = deltaX > 0 ? DIRECTION_RIGHT : deltaX < 0 ? DIRECTION_LEFT : 0;\n    this.directionY = deltaY > 0 ? DIRECTION_DOWN : deltaY < 0 ? DIRECTION_UP : 0;\n\n    // if configure pull down refresh, check it first\n    if (this.options.pullDownRefresh && this._checkPullDown()) {\n      return;\n    }\n\n    // check if it is a click operation\n    if (this._checkClick(e)) {\n      this.trigger('scrollCancel');\n      return;\n    }\n\n    // reset if we are outside of the boundaries\n    if (this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      return;\n    }\n\n    this._translate(newX, newY);\n\n    this.endTime = getNow();\n    var duration = this.endTime - this.startTime;\n    var absDistX = Math.abs(newX - this.startX);\n    var absDistY = Math.abs(newY - this.startY);\n\n    // flick\n    if (this._events.flick && duration < this.options.flickLimitTime && absDistX < this.options.flickLimitDistance && absDistY < this.options.flickLimitDistance) {\n      this.trigger('flick');\n      return;\n    }\n\n    var time = 0;\n    // start momentum animation if needed\n    if (this.options.momentum && duration < this.options.momentumLimitTime && (absDistY > this.options.momentumLimitDistance || absDistX > this.options.momentumLimitDistance)) {\n      var top = false;\n      var bottom = false;\n      var left = false;\n      var right = false;\n      var bounce = this.options.bounce;\n      if (bounce !== false) {\n        top = bounce.top === undefined ? true : bounce.top;\n        bottom = bounce.bottom === undefined ? true : bounce.bottom;\n        left = bounce.left === undefined ? true : bounce.left;\n        right = bounce.right === undefined ? true : bounce.right;\n      }\n      var wrapperWidth = this.directionX === DIRECTION_RIGHT && left || this.directionX === DIRECTION_LEFT && right ? this.wrapperWidth : 0;\n      var wrapperHeight = this.directionY === DIRECTION_DOWN && top || this.directionY === DIRECTION_UP && bottom ? this.wrapperHeight : 0;\n      var momentumX = this.hasHorizontalScroll ? momentum(this.x, this.startX, duration, this.maxScrollX, this.minScrollX, wrapperWidth, this.options, this) : { destination: newX, duration: 0 };\n      var momentumY = this.hasVerticalScroll ? momentum(this.y, this.startY, duration, this.maxScrollY, this.minScrollY, wrapperHeight, this.options, this) : { destination: newY, duration: 0 };\n      newX = momentumX.destination;\n      newY = momentumY.destination;\n      time = Math.max(momentumX.duration, momentumY.duration);\n      this.isInTransition = true;\n    } else {\n      if (this.options.wheel) {\n        newY = this._findNearestValidWheel(newY).y;\n        time = this.options.wheel.adjustTime || 400;\n      }\n    }\n\n    var easing = ease.swipe;\n    if (this.options.snap) {\n      var snap = this._nearestSnap(newX, newY);\n      this.currentPage = snap;\n      time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(newX - snap.x), 1000), Math.min(Math.abs(newY - snap.y), 1000)), 300);\n      newX = snap.x;\n      newY = snap.y;\n\n      this.directionX = 0;\n      this.directionY = 0;\n      easing = this.options.snap.easing || ease.bounce;\n    }\n\n    if (newX !== this.x || newY !== this.y) {\n      // change easing function when scroller goes out of the boundaries\n      if (newX > this.minScrollX || newX < this.maxScrollX || newY > this.minScrollY || newY < this.maxScrollY) {\n        easing = ease.swipeBounce;\n      }\n      this.scrollTo(newX, newY, time, easing);\n      return;\n    }\n\n    if (this.options.wheel) {\n      this.selectedIndex = this._findNearestValidWheel(this.y).index;\n    }\n\n    this.trigger('scrollEnd', {\n      x: this.x,\n      y: this.y\n    });\n  };\n\n  BScroll.prototype._checkClick = function (e) {\n    // when in the process of pulling down, it should not prevent click\n    var preventClick = this.stopFromTransition && !this.pulling;\n    this.stopFromTransition = false;\n\n    // we scrolled less than 15 pixels\n    if (!this.moved) {\n      if (this.options.wheel) {\n        if (this.target && this.target.className === this.options.wheel.wheelWrapperClass) {\n          var index = this._findNearestValidWheel(this.y).index;\n          var _offset = Math.round((this.pointY + offsetToBody(this.wrapper).top - this.wrapperHeight / 2) / this.itemHeight);\n          this.target = this.items[index + _offset];\n        }\n        var top = offset(this.target).top;\n        var left = offset(this.target).left;\n        top -= this.wrapperOffset.top;\n        top -= Math.round(this.target.offsetHeight / 2 - this.wrapper.offsetHeight / 2) || 0;\n        left -= this.wrapperOffset.left;\n        left -= Math.round(this.target.offsetWidth / 2 - this.wrapper.offsetWidth / 2) || 0;\n\n        top = this._findNearestValidWheel(top).y;\n        this.scrollTo(left, top, this.options.wheel.adjustTime || 400, ease.swipe);\n        return true;\n      } else {\n        if (!preventClick) {\n          var _dblclick = this.options.dblclick;\n          var dblclickTrigged = false;\n          if (_dblclick && this.lastClickTime) {\n            var _dblclick$delay = _dblclick.delay,\n                delay = _dblclick$delay === undefined ? 300 : _dblclick$delay;\n\n            if (getNow() - this.lastClickTime < delay) {\n              dblclickTrigged = true;\n              dblclick(e);\n            }\n          }\n          if (this.options.tap) {\n            tap(e, this.options.tap);\n          }\n\n          if (this.options.click && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n            click(e);\n          }\n          this.lastClickTime = dblclickTrigged ? null : getNow();\n          return true;\n        }\n        return false;\n      }\n    }\n    return false;\n  };\n\n  BScroll.prototype._resize = function () {\n    var _this = this;\n\n    if (!this.enabled) {\n      return;\n    }\n    // fix a scroll problem under Android condition\n    if (isAndroid) {\n      this.wrapper.scrollTop = 0;\n    }\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = setTimeout(function () {\n      _this.refresh();\n    }, this.options.resizePolling);\n  };\n\n  BScroll.prototype._startProbe = function () {\n    cancelAnimationFrame(this.probeTimer);\n    this.probeTimer = requestAnimationFrame(probe);\n\n    var me = this;\n\n    function probe() {\n      var pos = me.getComputedPosition();\n      me.trigger('scroll', pos);\n      if (!me.isInTransition) {\n        me.trigger('scrollEnd', pos);\n        return;\n      }\n      me.probeTimer = requestAnimationFrame(probe);\n    }\n  };\n\n  BScroll.prototype._transitionTime = function () {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    this.scrollerStyle[style.transitionDuration] = time + 'ms';\n\n    if (this.options.wheel) {\n      for (var i = 0; i < this.items.length; i++) {\n        this.items[i].style[style.transitionDuration] = time + 'ms';\n      }\n    }\n\n    if (this.indicators) {\n      for (var _i = 0; _i < this.indicators.length; _i++) {\n        this.indicators[_i].transitionTime(time);\n      }\n    }\n  };\n\n  BScroll.prototype._transitionTimingFunction = function (easing) {\n    this.scrollerStyle[style.transitionTimingFunction] = easing;\n\n    if (this.options.wheel) {\n      for (var i = 0; i < this.items.length; i++) {\n        this.items[i].style[style.transitionTimingFunction] = easing;\n      }\n    }\n\n    if (this.indicators) {\n      for (var _i2 = 0; _i2 < this.indicators.length; _i2++) {\n        this.indicators[_i2].transitionTimingFunction(easing);\n      }\n    }\n  };\n\n  BScroll.prototype._transitionEnd = function (e) {\n    if (e.target !== this.scroller || !this.isInTransition) {\n      return;\n    }\n\n    this._transitionTime();\n    var needReset = !this.pulling || this.movingDirectionY === DIRECTION_UP;\n    if (needReset && !this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      this.isInTransition = false;\n      if (this.options.probeType !== PROBE_REALTIME) {\n        this.trigger('scrollEnd', {\n          x: this.x,\n          y: this.y\n        });\n      }\n    }\n  };\n\n  BScroll.prototype._translate = function (x, y, scale) {\n    assert(!isUndef(x) && !isUndef(y), 'Translate x or y is null or undefined.');\n    if (isUndef(scale)) {\n      scale = this.scale;\n    }\n    if (this.options.useTransform) {\n      this.scrollerStyle[style.transform] = 'translate(' + x + 'px,' + y + 'px) scale(' + scale + ')' + this.translateZ;\n    } else {\n      x = Math.round(x);\n      y = Math.round(y);\n      this.scrollerStyle.left = x + 'px';\n      this.scrollerStyle.top = y + 'px';\n    }\n\n    if (this.options.wheel) {\n      var _options$wheel$rotate = this.options.wheel.rotate,\n          rotate = _options$wheel$rotate === undefined ? 25 : _options$wheel$rotate;\n\n      for (var i = 0; i < this.items.length; i++) {\n        var deg = rotate * (y / this.itemHeight + i);\n        this.items[i].style[style.transform] = 'rotateX(' + deg + 'deg)';\n      }\n    }\n\n    this.x = x;\n    this.y = y;\n    this.setScale(scale);\n\n    if (this.indicators) {\n      for (var _i3 = 0; _i3 < this.indicators.length; _i3++) {\n        this.indicators[_i3].updatePosition();\n      }\n    }\n  };\n\n  BScroll.prototype._animate = function (destX, destY, duration, easingFn) {\n    var me = this;\n    var startX = this.x;\n    var startY = this.y;\n    var startScale = this.lastScale;\n    var destScale = this.scale;\n    var startTime = getNow();\n    var destTime = startTime + duration;\n\n    function step() {\n      var now = getNow();\n\n      if (now >= destTime) {\n        me.isAnimating = false;\n        me._translate(destX, destY, destScale);\n\n        me.trigger('scroll', {\n          x: me.x,\n          y: me.y\n        });\n\n        if (!me.pulling && !me.resetPosition(me.options.bounceTime)) {\n          me.trigger('scrollEnd', {\n            x: me.x,\n            y: me.y\n          });\n        }\n        return;\n      }\n      now = (now - startTime) / duration;\n      var easing = easingFn(now);\n      var newX = (destX - startX) * easing + startX;\n      var newY = (destY - startY) * easing + startY;\n      var newScale = (destScale - startScale) * easing + startScale;\n\n      me._translate(newX, newY, newScale);\n\n      if (me.isAnimating) {\n        me.animateTimer = requestAnimationFrame(step);\n      }\n\n      if (me.options.probeType === PROBE_REALTIME) {\n        me.trigger('scroll', {\n          x: me.x,\n          y: me.y\n        });\n      }\n    }\n\n    this.isAnimating = true;\n    cancelAnimationFrame(this.animateTimer);\n    step();\n  };\n\n  BScroll.prototype.scrollBy = function (x, y) {\n    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ease.bounce;\n\n    x = this.x + x;\n    y = this.y + y;\n\n    this.scrollTo(x, y, time, easing);\n  };\n\n  BScroll.prototype.scrollTo = function (x, y) {\n    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ease.bounce;\n    var isSilent = arguments[4];\n\n    if (this.options.wheel) {\n      y = this._findNearestValidWheel(y).y;\n    }\n    if (x === this.x && y === this.y) {\n      return;\n    }\n    this.isInTransition = this.options.useTransition && time > 0 && (this.x !== x || this.y !== y);\n\n    if (!time || this.options.useTransition) {\n      this._transitionTimingFunction(easing.style);\n      this._transitionTime(time);\n      this._translate(x, y);\n\n      if (time && this.options.probeType === PROBE_REALTIME) {\n        this._startProbe();\n      }\n      if (!time && !isSilent) {\n        // don't trigger resetPosition when zoom feature is open, fix #748\n        if (this.options.zoom) return;\n        this.trigger('scroll', {\n          x: x,\n          y: y\n        });\n        // force reflow to put everything in position\n        this._reflow = document.body.offsetHeight;\n        if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\n          this.trigger('scrollEnd', {\n            x: x,\n            y: y\n          });\n        }\n      }\n\n      if (this.options.wheel) {\n        this.selectedIndex = this._findNearestValidWheel(y).index;\n      }\n    } else {\n      this._animate(x, y, time, easing.fn);\n    }\n  };\n\n  BScroll.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\n    if (!el) {\n      return;\n    }\n    el = el.nodeType ? el : this.scroller.querySelector(el);\n\n    if (this.options.wheel && !el.classList.contains(this.options.wheel.wheelItemClass)) {\n      return;\n    }\n\n    var pos = offset(el);\n    pos.left -= this.wrapperOffset.left;\n    pos.top -= this.wrapperOffset.top;\n\n    // if offsetX/Y are true we center the element to the screen\n    if (offsetX === true) {\n      offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\n    }\n    if (offsetY === true) {\n      offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\n    }\n\n    pos.left -= offsetX || 0;\n    pos.top -= offsetY || 0;\n    pos.left = pos.left > this.minScrollX ? this.minScrollX : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\n    pos.top = pos.top > this.minScrollY ? this.minScrollY : pos.top < this.maxScrollY ? this.maxScrollY : pos.top;\n\n    if (this.options.wheel) {\n      pos.top = this._findNearestValidWheel(pos.top).y;\n    }\n\n    this.scrollTo(pos.left, pos.top, time, easing);\n  };\n\n  BScroll.prototype.resetPosition = function () {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var easeing = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ease.bounce;\n\n    var x = this.x;\n    var roundX = Math.round(x);\n    if (!this.hasHorizontalScroll || roundX > this.minScrollX) {\n      x = this.minScrollX;\n    } else if (roundX < this.maxScrollX) {\n      x = this.maxScrollX;\n    }\n\n    var y = this.y;\n    var roundY = Math.round(y);\n    if (!this.hasVerticalScroll || roundY > this.minScrollY) {\n      y = this.minScrollY;\n    } else if (roundY < this.maxScrollY) {\n      y = this.maxScrollY;\n    }\n\n    if (x === this.x && y === this.y) {\n      return false;\n    }\n\n    this.scrollTo(x, y, time, easeing);\n\n    return true;\n  };\n\n  BScroll.prototype.getComputedPosition = function () {\n    var matrix = window.getComputedStyle(this.scroller, null);\n    var x = void 0;\n    var y = void 0;\n\n    if (this.options.useTransform) {\n      matrix = matrix[style.transform].split(')')[0].split(', ');\n      x = +(matrix[12] || matrix[4]);\n      y = +(matrix[13] || matrix[5]);\n    } else {\n      x = +matrix.left.replace(/[^-\\d.]/g, '');\n      y = +matrix.top.replace(/[^-\\d.]/g, '');\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  BScroll.prototype.stop = function () {\n    if (this.options.useTransition && this.isInTransition) {\n      this.isInTransition = false;\n      cancelAnimationFrame(this.probeTimer);\n      var pos = this.getComputedPosition();\n      this._translate(pos.x, pos.y);\n      if (this.options.wheel) {\n        this.target = this.items[this._findNearestValidWheel(pos.y).index];\n      } else {\n        this.trigger('scrollEnd', {\n          x: this.x,\n          y: this.y\n        });\n      }\n      this.stopFromTransition = true;\n    } else if (!this.options.useTransition && this.isAnimating) {\n      this.isAnimating = false;\n      cancelAnimationFrame(this.animateTimer);\n      this.trigger('scrollEnd', {\n        x: this.x,\n        y: this.y\n      });\n      this.stopFromTransition = true;\n    }\n  };\n\n  BScroll.prototype.destroy = function () {\n    this.destroyed = true;\n    this.trigger('destroy');\n    if (this.options.useTransition) {\n      cancelAnimationFrame(this.probeTimer);\n    } else {\n      cancelAnimationFrame(this.animateTimer);\n    }\n    this._removeDOMEvents();\n    // remove custom events\n    this._events = {};\n  };\n}\n\nfunction snapMixin(BScroll) {\n  BScroll.prototype._initSnap = function () {\n    var _this = this;\n\n    this.currentPage = {};\n    var snap = this.options.snap;\n\n    if (snap.loop) {\n      var children = this.scroller.children;\n      if (children.length > 1) {\n        prepend(children[children.length - 1].cloneNode(true), this.scroller);\n        this.scroller.appendChild(children[1].cloneNode(true));\n      } else {\n        // Loop does not make any sense if there is only one child.\n        snap.loop = false;\n      }\n    }\n\n    var el = snap.el;\n    if (typeof el === 'string') {\n      el = this.scroller.querySelectorAll(el);\n    }\n\n    this.on('refresh', function () {\n      _this.pages = [];\n\n      if (!_this.wrapperWidth || !_this.wrapperHeight || !_this.scrollerWidth || !_this.scrollerHeight) {\n        return;\n      }\n\n      var stepX = snap.stepX || _this.wrapperWidth;\n      var stepY = snap.stepY || _this.wrapperHeight;\n\n      var x = 0;\n      var y = void 0;\n      var cx = void 0;\n      var cy = void 0;\n      var i = 0;\n      var l = void 0;\n      var m = 0;\n      var n = void 0;\n      var rect = void 0;\n      if (!el) {\n        cx = Math.round(stepX / 2);\n        cy = Math.round(stepY / 2);\n\n        while (x > -_this.scrollerWidth) {\n          _this.pages[i] = [];\n          l = 0;\n          y = 0;\n\n          while (y > -_this.scrollerHeight) {\n            _this.pages[i][l] = {\n              x: Math.max(x, _this.maxScrollX),\n              y: Math.max(y, _this.maxScrollY),\n              width: stepX,\n              height: stepY,\n              cx: x - cx,\n              cy: y - cy\n            };\n\n            y -= stepY;\n            l++;\n          }\n\n          x -= stepX;\n          i++;\n        }\n      } else {\n        l = el.length;\n        n = -1;\n\n        for (; i < l; i++) {\n          rect = getRect(el[i]);\n          if (i === 0 || rect.left <= getRect(el[i - 1]).left) {\n            m = 0;\n            n++;\n          }\n\n          if (!_this.pages[m]) {\n            _this.pages[m] = [];\n          }\n\n          x = Math.max(-rect.left, _this.maxScrollX);\n          y = Math.max(-rect.top, _this.maxScrollY);\n          cx = x - Math.round(rect.width / 2);\n          cy = y - Math.round(rect.height / 2);\n\n          _this.pages[m][n] = {\n            x: x,\n            y: y,\n            width: rect.width,\n            height: rect.height,\n            cx: cx,\n            cy: cy\n          };\n\n          if (x > _this.maxScrollX) {\n            m++;\n          }\n        }\n      }\n\n      _this._checkSnapLoop();\n\n      var initPageX = snap._loopX ? 1 : 0;\n      var initPageY = snap._loopY ? 1 : 0;\n      _this._goToPage(_this.currentPage.pageX || initPageX, _this.currentPage.pageY || initPageY, 0, undefined, true);\n\n      // Update snap threshold if needed.\n      var snapThreshold = snap.threshold;\n      if (snapThreshold % 1 === 0) {\n        _this.snapThresholdX = snapThreshold;\n        _this.snapThresholdY = snapThreshold;\n      } else {\n        _this.snapThresholdX = Math.round(_this.pages[_this.currentPage.pageX][_this.currentPage.pageY].width * snapThreshold);\n        _this.snapThresholdY = Math.round(_this.pages[_this.currentPage.pageX][_this.currentPage.pageY].height * snapThreshold);\n      }\n    });\n\n    this.on('scrollEnd', function () {\n      if (snap.loop) {\n        if (snap._loopX) {\n          if (_this.currentPage.pageX === 0) {\n            _this._goToPage(_this.pages.length - 2, _this.currentPage.pageY, 0, undefined, true);\n          }\n          if (_this.currentPage.pageX === _this.pages.length - 1) {\n            _this._goToPage(1, _this.currentPage.pageY, 0, undefined, true);\n          }\n        } else {\n          if (_this.currentPage.pageY === 0) {\n            _this._goToPage(_this.currentPage.pageX, _this.pages[0].length - 2, 0, undefined, true);\n          }\n          if (_this.currentPage.pageY === _this.pages[0].length - 1) {\n            _this._goToPage(_this.currentPage.pageX, 1, 0, undefined, true);\n          }\n        }\n      }\n    });\n\n    if (snap.listenFlick !== false) {\n      this.on('flick', function () {\n        var time = snap.speed || Math.max(Math.max(Math.min(Math.abs(_this.x - _this.startX), 1000), Math.min(Math.abs(_this.y - _this.startY), 1000)), 300);\n\n        _this._goToPage(_this.currentPage.pageX + _this.directionX, _this.currentPage.pageY + _this.directionY, time);\n      });\n    }\n\n    this.on('destroy', function () {\n      if (snap.loop) {\n        var _children = _this.scroller.children;\n        if (_children.length > 2) {\n          removeChild(_this.scroller, _children[_children.length - 1]);\n          removeChild(_this.scroller, _children[0]);\n        }\n      }\n    });\n  };\n\n  BScroll.prototype._checkSnapLoop = function () {\n    var snap = this.options.snap;\n\n    if (!snap.loop || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    if (this.pages.length > 1) {\n      snap._loopX = true;\n    }\n    if (this.pages[0] && this.pages[0].length > 1) {\n      snap._loopY = true;\n    }\n    if (snap._loopX && snap._loopY) {\n      warn('Loop does not support two direction at the same time.');\n    }\n  };\n\n  BScroll.prototype._nearestSnap = function (x, y) {\n    if (!this.pages.length) {\n      return { x: 0, y: 0, pageX: 0, pageY: 0 };\n    }\n\n    var i = 0;\n    // Check if we exceeded the snap threshold\n    if (Math.abs(x - this.absStartX) <= this.snapThresholdX && Math.abs(y - this.absStartY) <= this.snapThresholdY) {\n      return this.currentPage;\n    }\n\n    if (x > this.minScrollX) {\n      x = this.minScrollX;\n    } else if (x < this.maxScrollX) {\n      x = this.maxScrollX;\n    }\n\n    if (y > this.minScrollY) {\n      y = this.minScrollY;\n    } else if (y < this.maxScrollY) {\n      y = this.maxScrollY;\n    }\n\n    var l = this.pages.length;\n    for (; i < l; i++) {\n      if (x >= this.pages[i][0].cx) {\n        x = this.pages[i][0].x;\n        break;\n      }\n    }\n\n    l = this.pages[i].length;\n\n    var m = 0;\n    for (; m < l; m++) {\n      if (y >= this.pages[0][m].cy) {\n        y = this.pages[0][m].y;\n        break;\n      }\n    }\n\n    if (i === this.currentPage.pageX) {\n      i += this.directionX;\n\n      if (i < 0) {\n        i = 0;\n      } else if (i >= this.pages.length) {\n        i = this.pages.length - 1;\n      }\n\n      x = this.pages[i][0].x;\n    }\n\n    if (m === this.currentPage.pageY) {\n      m += this.directionY;\n\n      if (m < 0) {\n        m = 0;\n      } else if (m >= this.pages[0].length) {\n        m = this.pages[0].length - 1;\n      }\n\n      y = this.pages[0][m].y;\n    }\n\n    return {\n      x: x,\n      y: y,\n      pageX: i,\n      pageY: m\n    };\n  };\n\n  BScroll.prototype._goToPage = function (x) {\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var time = arguments[2];\n    var easing = arguments[3];\n    var isSilent = arguments[4];\n\n    var snap = this.options.snap;\n\n    if (!snap || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    easing = easing || snap.easing || ease.bounce;\n\n    if (x >= this.pages.length) {\n      x = this.pages.length - 1;\n    } else if (x < 0) {\n      x = 0;\n    }\n\n    if (!this.pages[x]) {\n      return;\n    }\n\n    if (y >= this.pages[x].length) {\n      y = this.pages[x].length - 1;\n    } else if (y < 0) {\n      y = 0;\n    }\n\n    var posX = this.pages[x][y].x;\n    var posY = this.pages[x][y].y;\n\n    time = time === undefined ? snap.speed || Math.max(Math.max(Math.min(Math.abs(posX - this.x), 1000), Math.min(Math.abs(posY - this.y), 1000)), 300) : time;\n\n    this.currentPage = {\n      x: posX,\n      y: posY,\n      pageX: x,\n      pageY: y\n    };\n    this.scrollTo(posX, posY, time, easing, isSilent);\n  };\n\n  BScroll.prototype.goToPage = function (x, y, time, easing) {\n    var snap = this.options.snap;\n    if (!snap || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    if (snap.loop) {\n      var len = void 0;\n      if (snap._loopX) {\n        len = this.pages.length - 2;\n        if (x >= len) {\n          x = len - 1;\n        } else if (x < 0) {\n          x = 0;\n        }\n        x += 1;\n      } else {\n        len = this.pages[0].length - 2;\n        if (y >= len) {\n          y = len - 1;\n        } else if (y < 0) {\n          y = 0;\n        }\n        y += 1;\n      }\n    }\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.next = function (time, easing) {\n    var snap = this.options.snap;\n    if (!snap) {\n      return;\n    }\n\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n\n    x++;\n    if (x >= this.pages.length && this.hasVerticalScroll) {\n      x = 0;\n      y++;\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.prev = function (time, easing) {\n    var snap = this.options.snap;\n    if (!snap) {\n      return;\n    }\n\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n\n    x--;\n    if (x < 0 && this.hasVerticalScroll) {\n      x = 0;\n      y--;\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.getCurrentPage = function () {\n    var snap = this.options.snap;\n    if (!snap) {\n      return null;\n    }\n\n    if (snap.loop) {\n      var currentPage = void 0;\n      if (snap._loopX) {\n        currentPage = extend({}, this.currentPage, {\n          pageX: this.currentPage.pageX - 1\n        });\n      } else {\n        currentPage = extend({}, this.currentPage, {\n          pageY: this.currentPage.pageY - 1\n        });\n      }\n      return currentPage;\n    }\n    return this.currentPage;\n  };\n}\n\nfunction wheelMixin(BScroll) {\n  BScroll.prototype.wheelTo = function () {\n    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (this.options.wheel) {\n      var y = -index * this.itemHeight;\n      this.scrollTo(0, y);\n    }\n  };\n\n  BScroll.prototype.getSelectedIndex = function () {\n    return this.options.wheel && this.selectedIndex;\n  };\n\n  BScroll.prototype._initWheel = function () {\n    var wheel = this.options.wheel;\n    if (!wheel.wheelWrapperClass) {\n      wheel.wheelWrapperClass = 'wheel-scroll';\n    }\n    if (!wheel.wheelItemClass) {\n      wheel.wheelItemClass = 'wheel-item';\n    }\n    if (!wheel.wheelDisabledItemClass) {\n      wheel.wheelDisabledItemClass = 'wheel-disabled-item';\n    }\n    if (wheel.selectedIndex === undefined) {\n      wheel.selectedIndex = 0;\n    }\n  };\n\n  BScroll.prototype._findNearestValidWheel = function (y) {\n    y = y > 0 ? 0 : y < this.maxScrollY ? this.maxScrollY : y;\n    var wheel = this.options.wheel;\n    var currentIndex = Math.abs(Math.round(-y / this.itemHeight));\n    var cacheIndex = currentIndex;\n    var items = this.items;\n    // Impersonation web native select\n    // first, check whether there is a enable item whose index is smaller than currentIndex\n    // then, check whether there is a enable item whose index is bigger than currentIndex\n    // otherwise, there are all disabled items, just keep currentIndex unchange\n    while (currentIndex >= 0) {\n      if (items[currentIndex].className.indexOf(wheel.wheelDisabledItemClass) === -1) {\n        break;\n      }\n      currentIndex--;\n    }\n\n    if (currentIndex < 0) {\n      currentIndex = cacheIndex;\n      while (currentIndex <= items.length - 1) {\n        if (items[currentIndex].className.indexOf(wheel.wheelDisabledItemClass) === -1) {\n          break;\n        }\n        currentIndex++;\n      }\n    }\n\n    // keep it unchange when all the items are disabled\n    if (currentIndex === items.length) {\n      currentIndex = cacheIndex;\n    }\n    // when all the items are disabled, this.selectedIndex should always be -1\n    return {\n      index: this.wheelItemsAllDisabled ? -1 : currentIndex,\n      y: -currentIndex * this.itemHeight\n    };\n  };\n\n  BScroll.prototype._checkWheelAllDisabled = function () {\n    var wheel = this.options.wheel;\n    var items = this.items;\n    this.wheelItemsAllDisabled = true;\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].className.indexOf(wheel.wheelDisabledItemClass) === -1) {\n        this.wheelItemsAllDisabled = false;\n        break;\n      }\n    }\n  };\n}\n\nvar INDICATOR_MIN_LEN = 8;\n\nfunction scrollbarMixin(BScroll) {\n  BScroll.prototype._initScrollbar = function () {\n    var _this = this;\n\n    var _options$scrollbar = this.options.scrollbar,\n        _options$scrollbar$fa = _options$scrollbar.fade,\n        fade = _options$scrollbar$fa === undefined ? true : _options$scrollbar$fa,\n        _options$scrollbar$in = _options$scrollbar.interactive,\n        interactive = _options$scrollbar$in === undefined ? false : _options$scrollbar$in;\n\n    this.indicators = [];\n    var indicator = void 0;\n\n    if (this.options.scrollX) {\n      indicator = {\n        el: createScrollbar('horizontal'),\n        direction: 'horizontal',\n        fade: fade,\n        interactive: interactive\n      };\n      this._insertScrollBar(indicator.el);\n\n      this.indicators.push(new Indicator(this, indicator));\n    }\n\n    if (this.options.scrollY) {\n      indicator = {\n        el: createScrollbar('vertical'),\n        direction: 'vertical',\n        fade: fade,\n        interactive: interactive\n      };\n      this._insertScrollBar(indicator.el);\n      this.indicators.push(new Indicator(this, indicator));\n    }\n\n    this.on('refresh', function () {\n      for (var i = 0; i < _this.indicators.length; i++) {\n        _this.indicators[i].refresh();\n      }\n    });\n\n    if (fade) {\n      this.on('scrollEnd', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade();\n        }\n      });\n\n      this.on('scrollCancel', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade();\n        }\n      });\n\n      this.on('scrollStart', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade(true);\n        }\n      });\n\n      this.on('beforeScrollStart', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade(true, true);\n        }\n      });\n    }\n\n    this.on('destroy', function () {\n      _this._removeScrollBars();\n    });\n  };\n\n  BScroll.prototype._insertScrollBar = function (scrollbar) {\n    this.wrapper.appendChild(scrollbar);\n  };\n\n  BScroll.prototype._removeScrollBars = function () {\n    for (var i = 0; i < this.indicators.length; i++) {\n      this.indicators[i].destroy();\n    }\n  };\n}\n\nfunction createScrollbar(direction) {\n  var scrollbar = document.createElement('div');\n  var indicator = document.createElement('div');\n\n  scrollbar.style.cssText = 'position:absolute;z-index:9999;pointerEvents:none';\n  indicator.style.cssText = 'box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;';\n\n  indicator.className = 'bscroll-indicator';\n\n  if (direction === 'horizontal') {\n    scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\n    indicator.style.height = '100%';\n    scrollbar.className = 'bscroll-horizontal-scrollbar';\n  } else {\n    scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\n    indicator.style.width = '100%';\n    scrollbar.className = 'bscroll-vertical-scrollbar';\n  }\n\n  scrollbar.style.cssText += ';overflow:hidden';\n  scrollbar.appendChild(indicator);\n\n  return scrollbar;\n}\n\nfunction Indicator(scroller, options) {\n  this.wrapper = options.el;\n  this.wrapperStyle = this.wrapper.style;\n  this.indicator = this.wrapper.children[0];\n  this.indicatorStyle = this.indicator.style;\n  this.scroller = scroller;\n  this.direction = options.direction;\n  if (options.fade) {\n    this.visible = 0;\n    this.wrapperStyle.opacity = '0';\n  } else {\n    this.visible = 1;\n  }\n\n  this.sizeRatioX = 1;\n  this.sizeRatioY = 1;\n  this.maxPosX = 0;\n  this.maxPosY = 0;\n  this.x = 0;\n  this.y = 0;\n\n  if (options.interactive) {\n    this._addDOMEvents();\n  }\n}\n\nIndicator.prototype.handleEvent = function (e) {\n  switch (e.type) {\n    case 'touchstart':\n    case 'mousedown':\n      this._start(e);\n      break;\n    case 'touchmove':\n    case 'mousemove':\n      this._move(e);\n      break;\n    case 'touchend':\n    case 'mouseup':\n    case 'touchcancel':\n    case 'mousecancel':\n      this._end(e);\n      break;\n  }\n};\n\nIndicator.prototype.refresh = function () {\n  if (this._shouldShow()) {\n    this.transitionTime();\n    this._calculate();\n    this.updatePosition();\n  }\n};\n\nIndicator.prototype.fade = function (visible, hold) {\n  var _this2 = this;\n\n  if (hold && !this.visible) {\n    return;\n  }\n\n  var time = visible ? 250 : 500;\n\n  visible = visible ? '1' : '0';\n\n  this.wrapperStyle[style.transitionDuration] = time + 'ms';\n\n  clearTimeout(this.fadeTimeout);\n  this.fadeTimeout = setTimeout(function () {\n    _this2.wrapperStyle.opacity = visible;\n    _this2.visible = +visible;\n  }, 0);\n};\n\nIndicator.prototype.updatePosition = function () {\n  if (this.direction === 'vertical') {\n    var y = Math.round(this.sizeRatioY * this.scroller.y);\n\n    if (y < 0) {\n      this.transitionTime(500);\n      var height = Math.max(this.indicatorHeight + y * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.height = height + 'px';\n      y = 0;\n    } else if (y > this.maxPosY) {\n      this.transitionTime(500);\n      var _height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.height = _height + 'px';\n      y = this.maxPosY + this.indicatorHeight - _height;\n    } else {\n      this.indicatorStyle.height = this.indicatorHeight + 'px';\n    }\n    this.y = y;\n\n    if (this.scroller.options.useTransform) {\n      this.indicatorStyle[style.transform] = 'translateY(' + y + 'px)' + this.scroller.translateZ;\n    } else {\n      this.indicatorStyle.top = y + 'px';\n    }\n  } else {\n    var x = Math.round(this.sizeRatioX * this.scroller.x);\n\n    if (x < 0) {\n      this.transitionTime(500);\n      var width = Math.max(this.indicatorWidth + x * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.width = width + 'px';\n      x = 0;\n    } else if (x > this.maxPosX) {\n      this.transitionTime(500);\n      var _width = Math.max(this.indicatorWidth - (x - this.maxPosX) * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.width = _width + 'px';\n      x = this.maxPosX + this.indicatorWidth - _width;\n    } else {\n      this.indicatorStyle.width = this.indicatorWidth + 'px';\n    }\n\n    this.x = x;\n\n    if (this.scroller.options.useTransform) {\n      this.indicatorStyle[style.transform] = 'translateX(' + x + 'px)' + this.scroller.translateZ;\n    } else {\n      this.indicatorStyle.left = x + 'px';\n    }\n  }\n};\n\nIndicator.prototype.transitionTime = function () {\n  var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n  this.indicatorStyle[style.transitionDuration] = time + 'ms';\n};\n\nIndicator.prototype.transitionTimingFunction = function (easing) {\n  this.indicatorStyle[style.transitionTimingFunction] = easing;\n};\n\nIndicator.prototype.destroy = function () {\n  this._removeDOMEvents();\n  this.wrapper.parentNode.removeChild(this.wrapper);\n};\n\nIndicator.prototype._start = function (e) {\n  var point = e.touches ? e.touches[0] : e;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  this.transitionTime();\n\n  this.initiated = true;\n  this.moved = false;\n  this.lastPointX = point.pageX;\n  this.lastPointY = point.pageY;\n\n  this.startTime = getNow();\n\n  this._handleMoveEvents(addEvent);\n  this.scroller.trigger('beforeScrollStart');\n};\n\nIndicator.prototype._move = function (e) {\n  var point = e.touches ? e.touches[0] : e;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  if (!this.moved) {\n    this.scroller.trigger('scrollStart');\n  }\n\n  this.moved = true;\n\n  var deltaX = point.pageX - this.lastPointX;\n  this.lastPointX = point.pageX;\n\n  var deltaY = point.pageY - this.lastPointY;\n  this.lastPointY = point.pageY;\n\n  var newX = this.x + deltaX;\n  var newY = this.y + deltaY;\n\n  this._pos(newX, newY);\n};\n\nIndicator.prototype._end = function (e) {\n  if (!this.initiated) {\n    return;\n  }\n  this.initiated = false;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  this._handleMoveEvents(removeEvent);\n\n  var snapOption = this.scroller.options.snap;\n  if (snapOption) {\n    var speed = snapOption.speed,\n        _snapOption$easing = snapOption.easing,\n        easing = _snapOption$easing === undefined ? ease.bounce : _snapOption$easing;\n\n    var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\n\n    var time = speed || Math.max(Math.max(Math.min(Math.abs(this.scroller.x - snap.x), 1000), Math.min(Math.abs(this.scroller.y - snap.y), 1000)), 300);\n\n    if (this.scroller.x !== snap.x || this.scroller.y !== snap.y) {\n      this.scroller.directionX = 0;\n      this.scroller.directionY = 0;\n      this.scroller.currentPage = snap;\n      this.scroller.scrollTo(snap.x, snap.y, time, easing);\n    }\n  }\n\n  if (this.moved) {\n    this.scroller.trigger('scrollEnd', {\n      x: this.scroller.x,\n      y: this.scroller.y\n    });\n  }\n};\n\nIndicator.prototype._pos = function (x, y) {\n  if (x < 0) {\n    x = 0;\n  } else if (x > this.maxPosX) {\n    x = this.maxPosX;\n  }\n\n  if (y < 0) {\n    y = 0;\n  } else if (y > this.maxPosY) {\n    y = this.maxPosY;\n  }\n\n  x = Math.round(x / this.sizeRatioX);\n  y = Math.round(y / this.sizeRatioY);\n\n  this.scroller.scrollTo(x, y);\n  this.scroller.trigger('scroll', {\n    x: this.scroller.x,\n    y: this.scroller.y\n  });\n};\n\nIndicator.prototype._shouldShow = function () {\n  if (this.direction === 'vertical' && this.scroller.hasVerticalScroll || this.direction === 'horizontal' && this.scroller.hasHorizontalScroll) {\n    this.wrapper.style.display = '';\n    return true;\n  }\n  this.wrapper.style.display = 'none';\n  return false;\n};\n\nIndicator.prototype._calculate = function () {\n  if (this.direction === 'vertical') {\n    var wrapperHeight = this.wrapper.clientHeight;\n    this.indicatorHeight = Math.max(Math.round(wrapperHeight * wrapperHeight / (this.scroller.scrollerHeight || wrapperHeight || 1)), INDICATOR_MIN_LEN);\n    this.indicatorStyle.height = this.indicatorHeight + 'px';\n\n    this.maxPosY = wrapperHeight - this.indicatorHeight;\n\n    this.sizeRatioY = this.maxPosY / this.scroller.maxScrollY;\n  } else {\n    var wrapperWidth = this.wrapper.clientWidth;\n    this.indicatorWidth = Math.max(Math.round(wrapperWidth * wrapperWidth / (this.scroller.scrollerWidth || wrapperWidth || 1)), INDICATOR_MIN_LEN);\n    this.indicatorStyle.width = this.indicatorWidth + 'px';\n\n    this.maxPosX = wrapperWidth - this.indicatorWidth;\n\n    this.sizeRatioX = this.maxPosX / this.scroller.maxScrollX;\n  }\n};\n\nIndicator.prototype._addDOMEvents = function () {\n  var eventOperation = addEvent;\n  this._handleDOMEvents(eventOperation);\n};\n\nIndicator.prototype._removeDOMEvents = function () {\n  var eventOperation = removeEvent;\n  this._handleDOMEvents(eventOperation);\n  this._handleMoveEvents(eventOperation);\n};\n\nIndicator.prototype._handleMoveEvents = function (eventOperation) {\n  if (!this.scroller.options.disableTouch) {\n    eventOperation(window, 'touchmove', this);\n  }\n  if (!this.scroller.options.disableMouse) {\n    eventOperation(window, 'mousemove', this);\n  }\n};\n\nIndicator.prototype._handleDOMEvents = function (eventOperation) {\n  if (!this.scroller.options.disableTouch) {\n    eventOperation(this.indicator, 'touchstart', this);\n    eventOperation(window, 'touchend', this);\n  }\n  if (!this.scroller.options.disableMouse) {\n    eventOperation(this.indicator, 'mousedown', this);\n    eventOperation(window, 'mouseup', this);\n  }\n};\n\nfunction pullDownMixin(BScroll) {\n  BScroll.prototype._initPullDown = function () {\n    // must watch scroll in real time\n    this.options.probeType = PROBE_REALTIME;\n  };\n\n  BScroll.prototype._checkPullDown = function () {\n    var _options$pullDownRefr = this.options.pullDownRefresh,\n        _options$pullDownRefr2 = _options$pullDownRefr.threshold,\n        threshold = _options$pullDownRefr2 === undefined ? 90 : _options$pullDownRefr2,\n        _options$pullDownRefr3 = _options$pullDownRefr.stop,\n        stop = _options$pullDownRefr3 === undefined ? 40 : _options$pullDownRefr3;\n\n    // check if a real pull down action\n\n    if (this.directionY !== DIRECTION_DOWN || this.y < threshold) {\n      return false;\n    }\n\n    if (!this.pulling) {\n      this.pulling = true;\n      this.trigger('pullingDown');\n    }\n    this.scrollTo(this.x, stop, this.options.bounceTime, ease.bounce);\n\n    return this.pulling;\n  };\n\n  BScroll.prototype.finishPullDown = function () {\n    this.pulling = false;\n    this.resetPosition(this.options.bounceTime, ease.bounce);\n  };\n\n  BScroll.prototype.openPullDown = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this.options.pullDownRefresh = config;\n    this._initPullDown();\n  };\n\n  BScroll.prototype.closePullDown = function () {\n    this.options.pullDownRefresh = false;\n  };\n\n  BScroll.prototype.autoPullDownRefresh = function () {\n    var _options$pullDownRefr4 = this.options.pullDownRefresh,\n        _options$pullDownRefr5 = _options$pullDownRefr4.threshold,\n        threshold = _options$pullDownRefr5 === undefined ? 90 : _options$pullDownRefr5,\n        _options$pullDownRefr6 = _options$pullDownRefr4.stop,\n        stop = _options$pullDownRefr6 === undefined ? 40 : _options$pullDownRefr6;\n\n\n    if (this.pulling) {\n      return;\n    }\n    this.pulling = true;\n\n    this.scrollTo(this.x, threshold);\n    this.trigger('pullingDown');\n    this.scrollTo(this.x, stop, this.options.bounceTime, ease.bounce);\n  };\n}\n\nfunction pullUpMixin(BScroll) {\n  BScroll.prototype._initPullUp = function () {\n    // must watch scroll in real time\n    this.options.probeType = PROBE_REALTIME;\n\n    this.pullupWatching = false;\n    this._watchPullUp();\n  };\n\n  BScroll.prototype._watchPullUp = function () {\n    if (this.pullupWatching) {\n      return;\n    }\n    this.pullupWatching = true;\n    this.on('scroll', this._checkToEnd);\n  };\n\n  BScroll.prototype._checkToEnd = function (pos) {\n    var _this = this;\n\n    var _options$pullUpLoad$t = this.options.pullUpLoad.threshold,\n        threshold = _options$pullUpLoad$t === undefined ? 0 : _options$pullUpLoad$t;\n\n    if (this.movingDirectionY === DIRECTION_UP && pos.y <= this.maxScrollY + threshold) {\n      // reset pullupWatching status after scroll end.\n      this.once('scrollEnd', function () {\n        _this.pullupWatching = false;\n      });\n      this.trigger('pullingUp');\n      this.off('scroll', this._checkToEnd);\n    }\n  };\n\n  BScroll.prototype.finishPullUp = function () {\n    var _this2 = this;\n\n    if (this.pullupWatching) {\n      this.once('scrollEnd', function () {\n        _this2._watchPullUp();\n      });\n    } else {\n      this._watchPullUp();\n    }\n  };\n\n  BScroll.prototype.openPullUp = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this.options.pullUpLoad = config;\n    this._initPullUp();\n  };\n\n  BScroll.prototype.closePullUp = function () {\n    this.options.pullUpLoad = false;\n    if (!this.pullupWatching) {\n      return;\n    }\n    this.pullupWatching = false;\n    this.off('scroll', this._checkToEnd);\n  };\n}\n\nfunction mouseWheelMixin(BScroll) {\n  BScroll.prototype._initMouseWheel = function () {\n    var _this = this;\n\n    this._handleMouseWheelEvent(addEvent);\n\n    this.on('destroy', function () {\n      clearTimeout(_this.mouseWheelTimer);\n      clearTimeout(_this.mouseWheelEndTimer);\n      _this._handleMouseWheelEvent(removeEvent);\n    });\n\n    this.firstWheelOpreation = true;\n  };\n\n  BScroll.prototype._handleMouseWheelEvent = function (eventOperation) {\n    eventOperation(this.wrapper, 'wheel', this);\n    eventOperation(this.wrapper, 'mousewheel', this);\n    eventOperation(this.wrapper, 'DOMMouseScroll', this);\n  };\n\n  BScroll.prototype._onMouseWheel = function (e) {\n    var _this2 = this;\n\n    if (!this.enabled) {\n      return;\n    }\n    e.preventDefault();\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    if (this.firstWheelOpreation) {\n      this.trigger('scrollStart');\n    }\n    this.firstWheelOpreation = false;\n\n    var _options$mouseWheel = this.options.mouseWheel,\n        _options$mouseWheel$s = _options$mouseWheel.speed,\n        speed = _options$mouseWheel$s === undefined ? 20 : _options$mouseWheel$s,\n        _options$mouseWheel$i = _options$mouseWheel.invert,\n        invert = _options$mouseWheel$i === undefined ? false : _options$mouseWheel$i,\n        _options$mouseWheel$e = _options$mouseWheel.easeTime,\n        easeTime = _options$mouseWheel$e === undefined ? 300 : _options$mouseWheel$e;\n\n\n    clearTimeout(this.mouseWheelTimer);\n    this.mouseWheelTimer = setTimeout(function () {\n      if (!_this2.options.snap && !easeTime) {\n        _this2.trigger('scrollEnd', {\n          x: _this2.x,\n          y: _this2.y\n        });\n      }\n      _this2.firstWheelOpreation = true;\n    }, 400);\n\n    var wheelDeltaX = void 0;\n    var wheelDeltaY = void 0;\n\n    switch (true) {\n      case 'deltaX' in e:\n        if (e.deltaMode === 1) {\n          wheelDeltaX = -e.deltaX * speed;\n          wheelDeltaY = -e.deltaY * speed;\n        } else {\n          wheelDeltaX = -e.deltaX;\n          wheelDeltaY = -e.deltaY;\n        }\n        break;\n      case 'wheelDeltaX' in e:\n        wheelDeltaX = e.wheelDeltaX / 120 * speed;\n        wheelDeltaY = e.wheelDeltaY / 120 * speed;\n        break;\n      case 'wheelDelta' in e:\n        wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * speed;\n        break;\n      case 'detail' in e:\n        wheelDeltaX = wheelDeltaY = -e.detail / 3 * speed;\n        break;\n      default:\n        return;\n    }\n\n    var direction = invert ? -1 : 1;\n    wheelDeltaX *= direction;\n    wheelDeltaY *= direction;\n\n    if (!this.hasVerticalScroll) {\n      wheelDeltaX = wheelDeltaY;\n      wheelDeltaY = 0;\n    }\n\n    var newX = void 0;\n    var newY = void 0;\n    if (this.options.snap) {\n      newX = this.currentPage.pageX;\n      newY = this.currentPage.pageY;\n\n      if (wheelDeltaX > 0) {\n        newX--;\n      } else if (wheelDeltaX < 0) {\n        newX++;\n      }\n\n      if (wheelDeltaY > 0) {\n        newY--;\n      } else if (wheelDeltaY < 0) {\n        newY++;\n      }\n\n      this._goToPage(newX, newY);\n      return;\n    }\n\n    newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\n    newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\n\n    this.movingDirectionX = this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;\n    this.movingDirectionY = this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;\n\n    if (newX > this.minScrollX) {\n      newX = this.minScrollX;\n    } else if (newX < this.maxScrollX) {\n      newX = this.maxScrollX;\n    }\n\n    if (newY > this.minScrollY) {\n      newY = this.minScrollY;\n    } else if (newY < this.maxScrollY) {\n      newY = this.maxScrollY;\n    }\n\n    var needTriggerEnd = this.y === newY;\n    this.scrollTo(newX, newY, easeTime, ease.swipe);\n    this.trigger('scroll', {\n      x: this.x,\n      y: this.y\n    });\n    clearTimeout(this.mouseWheelEndTimer);\n    if (needTriggerEnd) {\n      this.mouseWheelEndTimer = setTimeout(function () {\n        _this2.trigger('scrollEnd', {\n          x: _this2.x,\n          y: _this2.y\n        });\n      }, easeTime);\n    }\n  };\n}\n\nfunction zoomMixin(BScroll) {\n  BScroll.prototype._initZoom = function () {\n    var _options$zoom = this.options.zoom,\n        _options$zoom$start = _options$zoom.start,\n        start = _options$zoom$start === undefined ? 1 : _options$zoom$start,\n        _options$zoom$min = _options$zoom.min,\n        min = _options$zoom$min === undefined ? 1 : _options$zoom$min,\n        _options$zoom$max = _options$zoom.max,\n        max = _options$zoom$max === undefined ? 4 : _options$zoom$max;\n\n    this.scale = Math.min(Math.max(start, min), max);\n    this.setScale(this.scale);\n    this.scrollerStyle[style.transformOrigin] = '0 0';\n  };\n\n  BScroll.prototype._zoomTo = function (scale, originX, originY, startScale) {\n    this.scaled = true;\n\n    var lastScale = scale / (startScale || this.scale);\n    this.setScale(scale);\n\n    this.refresh();\n\n    var newX = Math.round(this.startX - (originX - this.relativeX) * (lastScale - 1));\n    var newY = Math.round(this.startY - (originY - this.relativeY) * (lastScale - 1));\n\n    if (newX > this.minScrollX) {\n      newX = this.minScrollX;\n    } else if (newX < this.maxScrollX) {\n      newX = this.maxScrollX;\n    }\n\n    if (newY > this.minScrollY) {\n      newY = this.minScrollY;\n    } else if (newY < this.maxScrollY) {\n      newY = this.maxScrollY;\n    }\n\n    if (this.x !== newX || this.y !== newY) {\n      this.scrollTo(newX, newY, this.options.bounceTime);\n    }\n\n    this.scaled = false;\n  };\n\n  BScroll.prototype.zoomTo = function (scale, x, y) {\n    var _offsetToBody = offsetToBody(this.wrapper),\n        left = _offsetToBody.left,\n        top = _offsetToBody.top;\n\n    var originX = x + left - this.x;\n    var originY = y + top - this.y;\n    this._zoomTo(scale, originX, originY);\n  };\n\n  BScroll.prototype._zoomStart = function (e) {\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n\n    this.startDistance = getDistance(deltaX, deltaY);\n    this.startScale = this.scale;\n\n    var _offsetToBody2 = offsetToBody(this.wrapper),\n        left = _offsetToBody2.left,\n        top = _offsetToBody2.top;\n\n    this.originX = Math.abs(firstFinger.pageX + secondFinger.pageX) / 2 + left - this.x;\n    this.originY = Math.abs(firstFinger.pageY + secondFinger.pageY) / 2 + top - this.y;\n\n    this.trigger('zoomStart');\n  };\n\n  BScroll.prototype._zoom = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n    var distance = getDistance(deltaX, deltaY);\n    var scale = distance / this.startDistance * this.startScale;\n\n    this.scaled = true;\n\n    var _options$zoom2 = this.options.zoom,\n        _options$zoom2$min = _options$zoom2.min,\n        min = _options$zoom2$min === undefined ? 1 : _options$zoom2$min,\n        _options$zoom2$max = _options$zoom2.max,\n        max = _options$zoom2$max === undefined ? 4 : _options$zoom2$max;\n\n\n    if (scale < min) {\n      scale = 0.5 * min * Math.pow(2.0, scale / min);\n    } else if (scale > max) {\n      scale = 2.0 * max * Math.pow(0.5, max / scale);\n    }\n\n    var lastScale = scale / this.startScale;\n\n    var x = this.startX - (this.originX - this.relativeX) * (lastScale - 1);\n    var y = this.startY - (this.originY - this.relativeY) * (lastScale - 1);\n\n    this.setScale(scale);\n\n    this.scrollTo(x, y, 0);\n  };\n\n  BScroll.prototype._zoomEnd = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.isInTransition = false;\n    this.isAnimating = false;\n    this.initiated = 0;\n\n    var _options$zoom3 = this.options.zoom,\n        _options$zoom3$min = _options$zoom3.min,\n        min = _options$zoom3$min === undefined ? 1 : _options$zoom3$min,\n        _options$zoom3$max = _options$zoom3.max,\n        max = _options$zoom3$max === undefined ? 4 : _options$zoom3$max;\n\n\n    var scale = this.scale > max ? max : this.scale < min ? min : this.scale;\n\n    this._zoomTo(scale, this.originX, this.originY, this.startScale);\n\n    this.trigger('zoomEnd');\n  };\n}\n\n// import { ease } from '../util/ease'\n\n// Number of items to instantiate beyond current view in the scroll direction.\nvar RUNWAY_ITEMS = 30;\n\n// Number of items to instantiate beyond current view in the opposite direction.\nvar RUNWAY_ITEMS_OPPOSITE = 10;\n\n// The animation interval (in ms) for fading in content from tombstones.\nvar ANIMATION_DURATION_MS = 200;\n\n// The number of pixels of default additional length to allow scrolling to.\nvar DEFAULT_SCROLL_RUNWAY = 2000;\n\nfunction infiniteMixin(BScroll) {\n  BScroll.prototype._initInfinite = function () {\n    this.options.probeType = 3;\n    this.maxScrollY = -DEFAULT_SCROLL_RUNWAY;\n    this.infiniteScroller = new InfiniteScroller(this, this.options.infinity);\n  };\n}\n\nfunction isTombstoneNode(node) {\n  if (node && node.classList) {\n    return node.classList.contains('tombstone');\n  }\n}\n\nfunction InfiniteScroller(scroller, options) {\n  var _this = this;\n\n  this.options = options;\n  assert(typeof this.options.createTombstone === 'function', 'Infinite scroll need createTombstone Function to create tombstone');\n\n  assert(typeof this.options.fetch === 'function', 'Infinite scroll need fetch Function to fetch new data.');\n\n  assert(typeof this.options.render === 'function', 'Infinite scroll need render Function to render each item.');\n\n  this.firstAttachedItem = 0;\n  this.lastAttachedItem = 0;\n\n  this.anchorScrollTop = 0;\n  this.anchorItem = {\n    index: 0,\n    offset: 0\n  };\n  this.tombstoneHeight = 0;\n  this.tombstoneWidth = 0;\n  this.tombstones = [];\n  this.tombstonesAnimationHandlers = [];\n\n  this.items = [];\n  this.loadedItems = 0;\n  this.requestInProgress = false;\n  this.hasMore = true;\n\n  this.scroller = scroller;\n  this.wrapperEl = this.scroller.wrapper;\n  this.scrollerEl = this.scroller.scroller;\n\n  this.scroller.on('resize', function () {\n    _this.onResize();\n  });\n  this.scroller.on('destroy', function () {\n    _this.destroy();\n  });\n\n  // wait scroll core init\n  this._onResizeHandler = setTimeout(function () {\n    _this.onResize();\n\n    // must wait tombstoneHeight has size\n    _this.scroller.on('scroll', function () {\n      _this.onScroll();\n    });\n  });\n}\n\nInfiniteScroller.prototype.destroy = function () {\n  var _this2 = this;\n\n  // In extreme scene, destroy is triggered before _onResizeHandler\n  clearTimeout(this._onResizeHandler);\n  this.tombstonesAnimationHandlers.forEach(function (handler) {\n    clearTimeout(handler);\n  });\n  this.tombstonesAnimationHandlers = null;\n  this.items.forEach(function (item) {\n    if (item.node) {\n      _this2.scrollerEl.removeChild(item.node);\n      item.node = null;\n    }\n  });\n  this.scroller.infiniteScroller = null;\n  this.scroller = null;\n  this.wrapperEl = null;\n  this.scrollerEl = null;\n  this.items = null;\n  this.tombstones = null;\n};\n\nInfiniteScroller.prototype.onScroll = function () {\n  var scrollTop = -this.scroller.y;\n  var delta = scrollTop - this.anchorScrollTop;\n  if (scrollTop === 0) {\n    this.anchorItem = {\n      index: 0,\n      offset: 0\n    };\n  } else {\n    this.anchorItem = this._calculateAnchoredItem(this.anchorItem, delta);\n  }\n\n  this.anchorScrollTop = scrollTop;\n  var lastScreenItem = this._calculateAnchoredItem(this.anchorItem, this.scroller.wrapperHeight);\n\n  var start = this.anchorItem.index;\n  var end = lastScreenItem.index;\n  if (delta < 0) {\n    start -= RUNWAY_ITEMS;\n    end += RUNWAY_ITEMS_OPPOSITE;\n  } else {\n    start -= RUNWAY_ITEMS_OPPOSITE;\n    end += RUNWAY_ITEMS;\n  }\n  this.fill(start, end);\n  this.maybeRequestContent();\n};\n\nInfiniteScroller.prototype.onResize = function () {\n  var tombstone = this.options.createTombstone();\n  tombstone.style.position = 'absolute';\n  this.scrollerEl.appendChild(tombstone);\n  tombstone.style.display = '';\n  this.tombstoneHeight = tombstone.offsetHeight;\n  this.tombstoneWidth = tombstone.offsetWidth;\n  this.scrollerEl.removeChild(tombstone);\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.items[i].height = this.items[i].width = 0;\n  }\n\n  this.onScroll();\n};\n\nInfiniteScroller.prototype.fill = function (start, end) {\n  this.firstAttachedItem = Math.max(0, start);\n  if (!this.hasMore) {\n    end = Math.min(end, this.items.length);\n  }\n  this.lastAttachedItem = end;\n  this.attachContent();\n};\n\nInfiniteScroller.prototype.maybeRequestContent = function () {\n  var _this3 = this;\n\n  if (this.requestInProgress || !this.hasMore) {\n    return;\n  }\n  var itemsNeeded = this.lastAttachedItem - this.loadedItems;\n  if (itemsNeeded <= 0) {\n    return;\n  }\n  this.requestInProgress = true;\n  this.options.fetch(itemsNeeded).then(function (items) {\n    _this3.requestInProgress = false;\n    if (items) {\n      _this3.addContent(items);\n    } else {\n      _this3.hasMore = false;\n      var tombstoneLen = _this3._removeTombstones();\n      var curPos = 0;\n      if (_this3.anchorItem.index <= _this3.items.length) {\n        curPos = _this3._fixScrollPosition();\n        _this3._setupAnimations({}, curPos);\n        _this3.scroller.resetPosition(_this3.scroller.options.bounceTime);\n      } else {\n        _this3.anchorItem.index -= tombstoneLen;\n        curPos = _this3._fixScrollPosition();\n        _this3._setupAnimations({}, curPos);\n        _this3.scroller.stop();\n        _this3.scroller.resetPosition();\n        _this3.onScroll();\n      }\n    }\n  });\n};\n\nInfiniteScroller.prototype.addContent = function (items) {\n  for (var i = 0; i < items.length; i++) {\n    if (this.items.length <= this.loadedItems) {\n      this._addItem();\n    }\n    this.items[this.loadedItems++].data = items[i];\n  }\n  this.attachContent();\n  this.maybeRequestContent();\n};\n\nInfiniteScroller.prototype.attachContent = function () {\n  var unusedNodes = this._collectUnusedNodes();\n  var tombstoneAnimations = this._createDOMNodes(unusedNodes);\n  this._cleanupUnusedNodes(unusedNodes);\n  this._cacheNodeSize();\n  var curPos = this._fixScrollPosition();\n  this._setupAnimations(tombstoneAnimations, curPos);\n};\n\nInfiniteScroller.prototype.resetMore = function () {\n  this.hasMore = true;\n};\n\nInfiniteScroller.prototype._removeTombstones = function () {\n  var markIndex = void 0;\n  var tombstoneLen = 0;\n  var itemLen = this.items.length;\n  for (var i = 0; i < itemLen; i++) {\n    var currentNode = this.items[i].node;\n    var currentData = this.items[i].data;\n    if ((!currentNode || isTombstoneNode(currentNode)) && !currentData) {\n      // 0 should be excluded\n      if (markIndex === void 0) {\n        markIndex = i;\n      }\n      if (currentNode) {\n        this.scrollerEl.removeChild(currentNode);\n      }\n    }\n  }\n  tombstoneLen = itemLen - markIndex;\n  this.items.splice(markIndex);\n  this.lastAttachedItem = Math.min(this.lastAttachedItem, this.items.length);\n  return tombstoneLen;\n};\n\nInfiniteScroller.prototype._collectUnusedNodes = function () {\n  var unusedNodes = [];\n  for (var i = 0; i < this.items.length; i++) {\n    // Skip the items which should be visible.\n    if (i === this.firstAttachedItem) {\n      i = this.lastAttachedItem - 1;\n      continue;\n    }\n    var currentNode = this.items[i].node;\n    if (currentNode) {\n      if (isTombstoneNode(currentNode)) {\n        // Cache tombstones for reuse\n        this.tombstones.push(currentNode);\n        this.tombstones[this.tombstones.length - 1].style.display = 'none';\n      } else {\n        unusedNodes.push(currentNode);\n      }\n    }\n    this.items[i].node = null;\n  }\n  return unusedNodes;\n};\n\nInfiniteScroller.prototype._createDOMNodes = function (unusedNodes) {\n  var tombstoneAnimations = {};\n  for (var i = this.firstAttachedItem; i < this.lastAttachedItem; i++) {\n    while (this.items.length <= i) {\n      this._addItem();\n    }\n    var currentNode = this.items[i].node;\n    var currentData = this.items[i].data;\n    if (currentNode) {\n      if (isTombstoneNode(currentNode) && currentData) {\n        currentNode.style.zIndex = 1;\n        tombstoneAnimations[i] = [currentNode, this.items[i].top - this.anchorScrollTop];\n        this.items[i].node = null;\n      } else {\n        continue;\n      }\n    }\n    var node = currentData ? this.options.render(currentData, unusedNodes.pop()) : this._getTombStone();\n    node.style.position = 'absolute';\n    this.items[i].top = -1;\n    this.scrollerEl.appendChild(node);\n    this.items[i].node = node;\n  }\n  return tombstoneAnimations;\n};\n\nInfiniteScroller.prototype._cleanupUnusedNodes = function (unusedNodes) {\n  while (unusedNodes.length) {\n    this.scrollerEl.removeChild(unusedNodes.pop());\n  }\n};\n\nInfiniteScroller.prototype._cacheNodeSize = function () {\n  for (var i = this.firstAttachedItem; i < this.lastAttachedItem; i++) {\n    var item = this.items[i];\n    // Only cache the height if we have the real contents, not a placeholder.\n    if (item.data && !item.height) {\n      var isTombstone = isTombstoneNode(item.node);\n      item.height = isTombstone ? this.tombstoneHeight : item.node.offsetHeight;\n      item.width = isTombstone ? this.tombstoneWidth : item.node.offsetWidth;\n    }\n  }\n};\n\nInfiniteScroller.prototype._fixScrollPosition = function () {\n  this.anchorScrollTop = 0;\n  for (var _i = 0; _i < this.anchorItem.index; _i++) {\n    this.anchorScrollTop += this.items[_i].height || this.tombstoneHeight;\n  }\n  this.anchorScrollTop += this.anchorItem.offset;\n\n  // Position all nodes.\n  var curPos = this.anchorScrollTop - this.anchorItem.offset;\n  var i = this.anchorItem.index;\n  while (i > this.firstAttachedItem) {\n    curPos -= this.items[i - 1].height || this.tombstoneHeight;\n    i--;\n  }\n\n  return curPos;\n};\n\nInfiniteScroller.prototype._setupAnimations = function (tombstoneAnimations, curPos) {\n  var _this4 = this;\n\n  for (var i in tombstoneAnimations) {\n    var animation = tombstoneAnimations[i];\n    this.items[i].node.style[style.transform] = 'translateY(' + (this.anchorScrollTop + animation[1]) + 'px) scale(' + this.tombstoneWidth / this.items[i].width + ', ' + this.tombstoneHeight / this.items[i].height + ')';\n    // Call offsetTop on the nodes to be animated to force them to apply current transforms.\n    /* eslint-disable no-unused-expressions */\n    this.items[i].node.offsetTop;\n    animation[0].offsetTop;\n    this.items[i].node.style[style.transition] = cssVendor + 'transform ' + ANIMATION_DURATION_MS + 'ms';\n  }\n\n  for (var _i2 = this.firstAttachedItem; _i2 < this.lastAttachedItem; _i2++) {\n    var _animation = tombstoneAnimations[_i2];\n    if (_animation) {\n      var tombstoneNode = _animation[0];\n      tombstoneNode.style[style.transition] = cssVendor + 'transform ' + ANIMATION_DURATION_MS + 'ms, opacity ' + ANIMATION_DURATION_MS + 'ms';\n      tombstoneNode.style[style.transform] = 'translateY(' + curPos + 'px) scale(' + this.items[_i2].width / this.tombstoneWidth + ', ' + this.items[_i2].height / this.tombstoneHeight + ')';\n      tombstoneNode.style.opacity = 0;\n    }\n    if (curPos !== this.items[_i2].top) {\n      if (!_animation) {\n        this.items[_i2].node.style[style.transition] = '';\n      }\n      this.items[_i2].node.style[style.transform] = 'translateY(' + curPos + 'px)';\n    }\n    this.items[_i2].top = curPos;\n    curPos += this.items[_i2].height || this.tombstoneHeight;\n  }\n\n  this.scroller.maxScrollY = -(curPos - this.scroller.wrapperHeight + (this.hasMore ? DEFAULT_SCROLL_RUNWAY : 0));\n\n  var tombstoneAnimationsHandler = setTimeout(function () {\n    for (var _i3 in tombstoneAnimations) {\n      var _animation2 = tombstoneAnimations[_i3];\n      _animation2[0].style.display = 'none';\n      // Tombstone can be recycled now.\n      _this4.tombstones.push(_animation2[0]);\n    }\n  }, ANIMATION_DURATION_MS);\n\n  this.tombstonesAnimationHandlers.push(tombstoneAnimationsHandler);\n};\n\nInfiniteScroller.prototype._getTombStone = function () {\n  var tombstone = this.tombstones.pop();\n  if (tombstone) {\n    tombstone.style.display = '';\n    tombstone.style.opacity = 1;\n    tombstone.style[style.transform] = '';\n    tombstone.style[style.transition] = '';\n    return tombstone;\n  }\n  return this.options.createTombstone();\n};\n\nInfiniteScroller.prototype._addItem = function () {\n  this.items.push({\n    data: null,\n    node: null,\n    height: 0,\n    width: 0,\n    top: 0\n  });\n};\n\nInfiniteScroller.prototype._calculateAnchoredItem = function (initialAnchor, delta) {\n  if (delta === 0) {\n    return initialAnchor;\n  }\n  var i = initialAnchor.index;\n  var tombstones = 0;\n\n  delta += initialAnchor.offset;\n  if (delta < 0) {\n    while (delta < 0 && i > 0 && this.items[i - 1].height) {\n      delta += this.items[i - 1].height;\n      i--;\n    }\n    tombstones = Math.max(-i, Math.ceil(Math.min(delta, 0) / this.tombstoneHeight));\n  } else {\n    while (delta > 0 && i < this.items.length && this.items[i].height && this.items[i].height < delta) {\n      delta -= this.items[i].height;\n      i++;\n    }\n    if (i >= this.items.length || !this.items[i].height) {\n      tombstones = Math.floor(Math.max(delta, 0) / this.tombstoneHeight);\n    }\n  }\n  i += tombstones;\n  delta -= tombstones * this.tombstoneHeight;\n\n  return {\n    index: i,\n    offset: delta\n  };\n};\n\nfunction BScroll(el, options) {\n  this.wrapper = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!this.wrapper) {\n    warn('Can not resolve the wrapper DOM.');\n  }\n  this.scroller = this.wrapper.children[0];\n  if (!this.scroller) {\n    warn('The wrapper need at least one child element to be scroller.');\n  }\n  // cache style for better performance\n  this.scrollerStyle = this.scroller.style;\n\n  this._init(options);\n}\n\ninitMixin(BScroll);\ncoreMixin(BScroll);\neventMixin(BScroll);\nsnapMixin(BScroll);\nwheelMixin(BScroll);\nscrollbarMixin(BScroll);\npullDownMixin(BScroll);\npullUpMixin(BScroll);\nmouseWheelMixin(BScroll);\nzoomMixin(BScroll);\ninfiniteMixin(BScroll);\n\nBScroll.Version = '1.15.2';\n\nexport default BScroll;\n"]},"metadata":{},"sourceType":"module"}