{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\day\\\\src\\\\views\\\\Detail\\\\Diancan\\\\Diancan.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport \"../../../mock/mock.js\";\nimport Item from \"../../../components/Item\";\nimport BScroll from \"better-scroll\";\nexport default class Diancan extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      list: [],\n      ind: 0,\n      scrollH: []\n    };\n\n    this.handClick = ind => {\n      this.setState({\n        ind\n      });\n      this.myScroll.scrollToElement('.title' + ind, 1000);\n    };\n  }\n\n  componentDidMount() {\n    Axios.get('/getlist').then(res => {\n      console.log(res.data.goods);\n      this.setState({\n        list: res.data.goods\n      });\n    });\n    this.myScroll = new BScroll(\".right\", {\n      probeType: 3\n    });\n    let scrollH = this.state.scrollH;\n    let child = Array.from(this.refs.picTxt.children);\n    console.log(this.refs.picTxt.children);\n    console.log(this.refs.picTxt.children, \"111111111111\");\n    console.log(child, \"child\"); //获取滚动元素的所有列表\n\n    child.forEach(item => {\n      scrollH.push(item.scrollTop - 45); //获取每个元素滚动的距离\n    }); // let last = child[child.length-1]\n    // scrollH.push(last.scrollTop + last.offsetHeight);\n    // this.setState({scrollH})\n    // // 监听滚动\n    // this.myScroll.on('scroll',({y})=>{\n    //     let scrollY = Math.abs(y);\n    //     // console.log(scrollY,\"00000000\")//滚动条滚动的高度\n    //     for(let i=0;i<child.length;i++){\n    //         if(scrollY>child[i] && scrollY<child[i+1]){\n    //             console.log(i);\n    //             this.setState({ind:i})\n    //         }\n    //     }\n    // })\n  } // 点击左侧列表\n\n\n  render() {\n    let _this$state = this.state,\n        list = _this$state.list,\n        ind = _this$state.ind;\n    return React.createElement(\"div\", {\n      className: \"diancan\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, list && list.map((item, index) => {\n      return React.createElement(\"p\", {\n        key: index,\n        onClick: this.handClick.bind(this, index),\n        className: index == ind ? \"active\" : \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, item.name);\n    })), React.createElement(\"div\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      ref: \"picTxt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, list && list.map((item, index) => {\n      return React.createElement(Item, {\n        key: index,\n        item: item,\n        index: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      });\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Dell/Desktop/day/src/views/Detail/Diancan/Diancan.js"],"names":["React","Component","Axios","Item","BScroll","Diancan","state","list","ind","scrollH","handClick","setState","myScroll","scrollToElement","componentDidMount","get","then","res","console","log","data","goods","probeType","child","Array","from","refs","picTxt","children","forEach","item","push","scrollTop","render","map","index","bind","name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,uBAAP;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AAEA,OAAOC,OAAP,MAAoB,eAApB;AACA,eAAe,MAAMC,OAAN,SAAsBJ,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC3CK,KAD2C,GACrC;AACFC,MAAAA,IAAI,EAAC,EADH;AAEFC,MAAAA,GAAG,EAAC,CAFF;AAGFC,MAAAA,OAAO,EAAC;AAHN,KADqC;;AAAA,SA0C3CC,SA1C2C,GA0C9BF,GAAD,IAAO;AACf,WAAKG,QAAL,CAAc;AAACH,QAAAA;AAAD,OAAd;AACA,WAAKI,QAAL,CAAcC,eAAd,CAA8B,WAASL,GAAvC,EAA2C,IAA3C;AACH,KA7C0C;AAAA;;AAM3CM,EAAAA,iBAAiB,GAAE;AACfZ,IAAAA,KAAK,CAACa,GAAN,CAAU,UAAV,EAAsBC,IAAtB,CAA2BC,GAAG,IAAE;AAC5BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAJ,CAASC,KAArB;AACA,WAAKV,QAAL,CAAc;AAACJ,QAAAA,IAAI,EAACU,GAAG,CAACG,IAAJ,CAASC;AAAf,OAAd;AACH,KAHD;AAKA,SAAKT,QAAL,GAAgB,IAAIR,OAAJ,CAAY,QAAZ,EAAqB;AACjCkB,MAAAA,SAAS,EAAC;AADuB,KAArB,CAAhB;AANe,QAWVb,OAXU,GAWC,KAAKH,KAXN,CAWVG,OAXU;AAYf,QAAIc,KAAK,GAAIC,KAAK,CAACC,IAAN,CAAW,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,QAA5B,CAAb;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKO,IAAL,CAAUC,MAAV,CAAiBC,QAA7B;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKO,IAAL,CAAUC,MAAV,CAAiBC,QAA7B,EAAsC,cAAtC;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ,EAAkB,OAAlB,EAfe,CAeW;;AAC1BA,IAAAA,KAAK,CAACM,OAAN,CAAeC,IAAD,IAAQ;AAClBrB,MAAAA,OAAO,CAACsB,IAAR,CAAaD,IAAI,CAACE,SAAL,GAAiB,EAA9B,EADkB,CACgB;AACrC,KAFD,EAhBe,CAmBf;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,GAxC0C,CAyC3C;;;AAKAC,EAAAA,MAAM,GAAG;AAAA,sBACgB,KAAK3B,KADrB;AAAA,QACCC,IADD,eACCA,IADD;AAAA,QACQC,GADR,eACQA,GADR;AAEL,WACI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQD,IAAI,IAAIA,IAAI,CAAC2B,GAAL,CAAS,CAACJ,IAAD,EAAMK,KAAN,KAAc;AAC/B,aAAO;AAAG,QAAA,GAAG,EAAEA,KAAR;AAAe,QAAA,OAAO,EAAE,KAAKzB,SAAL,CAAe0B,IAAf,CAAoB,IAApB,EAAyBD,KAAzB,CAAxB;AAAyD,QAAA,SAAS,EAAEA,KAAK,IAAE3B,GAAP,GAAW,QAAX,GAAoB,EAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA6FsB,IAAI,CAACO,IAAlG,CAAP;AACC,KAFO,CAFhB,CAFJ,EAUI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,GAAG,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEY9B,IAAI,IAAIA,IAAI,CAAC2B,GAAL,CAAS,CAACJ,IAAD,EAAMK,KAAN,KAAc;AAC3B,aACA,oBAAC,IAAD;AAAM,QAAA,GAAG,EAAEA,KAAX;AAAkB,QAAA,IAAI,EAAEL,IAAxB;AAA8B,QAAA,KAAK,EAAEK,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA;AAGH,KAJO,CAFpB,CADJ,CAVJ,CADJ;AAwBH;;AAxE0C","sourcesContent":["import React, { Component } from 'react'\r\nimport Axios from 'axios';\r\nimport \"../../../mock/mock.js\"\r\nimport Item from \"../../../components/Item\"\r\n\r\nimport BScroll from \"better-scroll\";\r\nexport default class Diancan extends Component {\r\n    state={\r\n        list:[],\r\n        ind:0,\r\n        scrollH:[]\r\n    }\r\n    componentDidMount(){\r\n        Axios.get('/getlist').then(res=>{\r\n            console.log(res.data.goods);\r\n            this.setState({list:res.data.goods})\r\n        })\r\n\r\n        this.myScroll = new BScroll(\".right\",{\r\n            probeType:3\r\n        })\r\n        \r\n\r\n        let {scrollH} = this.state;\r\n        let child =  Array.from(this.refs.picTxt.children);\r\n        console.log(this.refs.picTxt.children)\r\n        console.log(this.refs.picTxt.children,\"111111111111\")\r\n        console.log(child,\"child\")//获取滚动元素的所有列表\r\n        child.forEach((item)=>{\r\n            scrollH.push(item.scrollTop - 45);//获取每个元素滚动的距离\r\n        })\r\n        // let last = child[child.length-1]\r\n        // scrollH.push(last.scrollTop + last.offsetHeight);\r\n        // this.setState({scrollH})\r\n\r\n        // // 监听滚动\r\n        // this.myScroll.on('scroll',({y})=>{\r\n        //     let scrollY = Math.abs(y);\r\n        //     // console.log(scrollY,\"00000000\")//滚动条滚动的高度\r\n        //     for(let i=0;i<child.length;i++){\r\n        //         if(scrollY>child[i] && scrollY<child[i+1]){\r\n        //             console.log(i);\r\n        //             this.setState({ind:i})\r\n        //         }\r\n        //     }\r\n        // })\r\n    }\r\n    // 点击左侧列表\r\n    handClick = (ind)=>{\r\n        this.setState({ind})\r\n        this.myScroll.scrollToElement('.title'+ind,1000)\r\n    }\r\n    render() {\r\n        let { list , ind } = this.state;\r\n        return (\r\n            <div className=\"diancan\">\r\n                {/* 左侧列表导航 */}\r\n                <div className=\"left\">\r\n                    {\r\n                        list && list.map((item,index)=>{\r\n                        return <p key={index} onClick={this.handClick.bind(this,index)} className={index==ind?\"active\":\"\"}>{item.name}</p>\r\n                        })\r\n                    }\r\n                </div>\r\n                {/* 右侧数据列表 */}\r\n                <div className=\"right\">\r\n                    <div ref=\"picTxt\">\r\n                            {\r\n                                list && list.map((item,index)=>{\r\n                                    return (\r\n                                    <Item key={index} item={item} index={index}></Item>\r\n                                    )\r\n                                })\r\n                            }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}